[Whonix Homepage](https://sourceforge.net/p/whonix/wiki/Home/)

[TOC]

The Tor software does not support UDP itself yet. Whonix provides a limited workaround for using UDP anyway, in the best possible secure manner.

# VPN method (WORKING) #
Read first: [Tor Plus VPN](https://trac.torproject.org/projects/tor/wiki/doc/TorPlusVPN) and [Whonix VPN disclaimer](https://sourceforge.net/p/whonix/wiki/Authorship/#whonix-vpn-disclaimer).

This tutorial uses OpenVPN. Other VPN implementations, such as PPTP, might be useful as well, but we haven't researched that yet.

Obviously a VPN provider is required. For testing purposes [usaip.eu](https://www.usaip.eu/) was used. They have been chosen, because they were free and didn't block the tested outgoing UDP port. The free version of usaip.eu can probable only be used for testing purposes, as it's only a test version, which force disconnects every 7 minutes. For longer and serious/stable use, you'll probable need another, perhaps paid, VPN account.

At the moment we are not aware of any free OpenVPN accounts fulfilling the requirements. 
1. Possible to connect to the VPN over TCP, because Tor does not support UDP. 
2. Not blocking outgoing UDP, as this is, what we want to tunnel. 

Perhaps there exist other VPN implementations, which also support UDP, and were free services exist, which allow UDP. We haven't researched that yet.

Install rdate for UDP and TCP testing.

    sudo apt-get install rdate

Install lynx (console browser).

    sudo apt-get install lynx-curl

Test if your Whonix setup is working in general.

    lynx check.torproject.org

Which should show "Congratulations. Your browser is configured to use Tor.".

Before we setup the VPN, you should make yourself with rdate familiar. The command line switch -p results in just showing the date and time, without setting it. -u uses UDP instant of TCP (default).

Commands for TCP testing are.

    rdate -p time.u.washington.edu
    rdate -p time.nist.gov
    rdate -p ptbtime1.ptb.de

Commands for UDP testing are.

    rdate -u -p time.u.washington.edu
    rdate -u -p time.nist.gov
    rdate -u -p ptbtime1.ptb.de

Your tests should reveal, that without a VPN, you can run TCP over Tor, but not UDP.

Install OpenVPN.

    sudo apt-get install openvpn

Go to [usaip.eu](http://usaip.eu/en/index.php) and click on free demo. Download the usaip.zip. It contains the OpenVPN configuration files. Unpack. Open a shell and get into the folder *cd usaip*. List all files *dir*. Connect to a VPN, for example:

    sudo openvpn /home/user/usaip/eu-luxemburg.ovpn

The page stated, the password was *demo*, password also *demo*. Wait until it's connected. When success, it will show "Initialization Sequence Completed". It might happen, that the connection will not succeed for some unknown reason. In this case try replacing the eu-luxemburg.ovpn from the example above with another <country>.ovpn from the usaip folder.

Open a new shell and check if you can still connect to check.torpoject.org. *lynx check.torproject.org* This time it should answer "Sorry. You are not using Tor." (Because you are now connected to the VPN.)

Note, usaip probable blocks SSL, therefore *lynx https://check.torproject.org* will not work.

Test rdate again, first in TCP mode, then in UDP mode. Both should work.

# SSH method (NOT DOCUMENTED) #
In theory we can also use SSH servers to tunnel UDP over Tor. Unfortunately we can't provide instructions here. Free SSH services are rarely available, that makes developing such as solution impossible. The existing free SSH services are blocking certain ports, which does not make this easier as well. Even though SSH can provide a socks5 proxy, it is not capable of providing [support for tunneling UDP itself](http://zarb.org/~gc/html/udp-in-ssh-tunneling.html). Extra software installed on the client, and even worse on the server is required (needs root). Most admins will not do this. The link in the instructions are most likely only useful for you, if you have your own server. But even then, you are probable better off, using the VPN method.

# socks5 proxy method (FAILED) #
Moved to [Dev] Archiv Tunneling UDP over Tor.