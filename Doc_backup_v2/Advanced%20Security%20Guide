<!DOCTYPE html>
<!-- Server: sfn-web-2 -->


  










<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]>--> <html lang="en" class="no-js"> <!--<![endif]-->
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
    <title>Whonix / Documentation / Advanced Security Guide</title>
    

<script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/modernizr.custom.90514.js"></script>

<script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/jquery-1.8.0.min.js"></script>

<script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/header.js"></script>
<!--[if lt IE 7 ]>
  <script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
<![endif]-->
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular' rel='stylesheet' type='text/css'>
<style type="text/css">
    @font-face {
        font-family: "Pictos";
        src: url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.eot');
        src: local("â˜º"), url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.woff') format('woff'), url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.ttf') format('truetype'), url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.svg') format('svg');
    }
</style>
    <script type="text/javascript">
            /*jslint onevar: false, nomen: false, evil: true, css: true, plusplus: false, white: false, forin: true, on: true, immed: false */
            /*global confirm, alert, unescape, window, jQuery, $, net, COMSCORE */
    </script>
    
      <!-- ew:head_css -->

    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/allura/css/forge/hilite.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/tool/wiki/css/wiki.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/forge.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/_slim/css?href=css%2Fmarkitup_sf.css%3Bcss%2Fpage_list.css"
                >
    
      <style>
            input.label_edit{ float: left; }
            .tagEditor{
                margin: 4px 0;
                padding: 0;
                float: left;
            }

            .tagEditor li, .removable{
                display: inline;
                background-image: url('http://a.fsdn.com/allura/nf/1358968642/_static_/images/minus_small.png');
                background-color: #eef;
                background-position: right center;
                background-repeat: no-repeat;
                list-style-type: none;
                padding: 0 18px 0 6px;
                margin: 0 4px;
                cursor: pointer;
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
            }

            .tagEditor li:hover{
                background-color: #ebebeb;
            }</style>
    
      
<!-- /ew:head_css -->

    
    
    
      <!-- ew:head_js -->

    
      
<!-- /ew:head_js -->

    
    

    
      <style type="text/css">
        #page-body.project---init-- #top_nav { display: none; }
#page-body.project---init-- #nav_menu_holder { display: none; margin-bottom: 0; }
#page-body.project---init-- #content_base {margin-top: 0; }
      </style>
    
    
<style>
  .hidden { display: none }
  a.notfound { color: #f00; }
</style>

      <style>.XqFtOMqAdqsJdcLYBnfRAVg { display:none }</style>

    
<link rel="alternate" type="application/rss+xml" title="Page RSS" href="feed.rss"/>
<link rel="alternate" type="application/atom+xml" title="Page Atom" href="feed.atom"/>
<link rel="alternate" type="application/rss+xml" title="Wiki RSS" href="../feed.rss"/>
<link rel="alternate" type="application/atom+xml" title="Wiki Atom" href="../feed.atom"/>

    
    


<script type="text/javascript">
    var _gaq = _gaq || [];

    function _add_tracking(prefix, tracking_id, send_user) {
        _gaq.push([prefix+'._setAccount', tracking_id]);
        _gaq.push([prefix+'._setCustomVar', 1, 'Page Type', 'wiki', 3]);_gaq.push([prefix+'._trackPageview']);
    }
      _add_tracking('sfnt1', 'UA-32013-6', true);
      _add_tracking('sfnt2', 'UA-36130941-1', true);
    

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' === document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </head>

  <body class="wiki-Advanced_Security_Guide" id="forge">
    
      <!-- ew:body_top_js -->

    
      
<!-- /ew:body_top_js -->

    
    
<header id="site-header">
    <div class="wrapper">
        <a href="/" class="logo">
            <span>SourceForge</span>
        </a>
        
        <form method="get" action="/directory/">
            <input type="text" id="words" name="q" placeholder="Search">
        </form>
        
        <!--Switch to {language}-->
        <nav id="nav-site">
            <a href="/directory/" title="Browse our software.">Browse</a>
            <a href="/blog/" title="Read the latest news from the SF HQ.">Blog</a>
            <a href="/support" title="Contact us for help and feedback.">Help</a>
        </nav>
        <nav id="nav-account">
            
              <div class="logged_out">
                <a href="/account/login.php">Log In</a>
                <span>or</span>
                <a href="https://sourceforge.net/user/registration/">Join</a>
              </div>
            
        </nav>
        
    </div>
</header>
<header id="site-sec-header">
    <div class="wrapper">
        <nav id="nav-hubs">
            <h4>Solution Centers</h4>
            <a href="http://ibmsmartercommerce.sourceforge.net/">Smarter Commerce</a>
            <a href="http://goparallel.sourceforge.net/">Go Parallel</a>
            <a href="http://html5center.sourceforge.net/">HTML5</a>
            <a href="http://ibmsmarteritservices.sourceforge.net/">Smarter IT</a>
        </nav>
        <nav id="nav-collateral">
            <a href="/jobs?source=header">Jobs</a>
            <a href="http://library.geeknetmedia.com">Resources</a>
            
            <a href="">Newsletters</a>
            
        </nav>
    </div>
</header>
    
    <section id="page-body" class=" neighborhood-Projects project-whonix mountpoint-wiki">
	  <div class="grid-24" id="nav_menu_holder">
            
            


  
  <a href="/p/whonix/">
    
      <img src="/p/whonix//icon?2012-10-18 23:06:52+00:00" class="project_icon" alt="Project Logo">
    
	<h1 class="project_title">
      
        Whonix
      
	</h1>
	</a>

            
      </div>
      <div id="top_nav" class="">
        
        
  
    <a href="/p/whonix/homelink/" class="ui-icon-tool-link">
      Homepage
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/wiki/" class="ui-icon-tool-wiki">
      Documentation
      
        
          <span class="diamond"></span>
        
      
      
      
    </a>
	
    <a href="/p/whonix/blog/" class="ui-icon-tool-blog">
      Important Blog
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/featureblog/" class="ui-icon-tool-blog">
      Feature Blog
      
        
      
      
      
    </a>
	
    <a href="/projects/whonix/files/" class="ui-icon-tool-files">
      _
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/discussion/" class="ui-icon-tool-discussion">
      User Help Forum
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/mailman/" class="ui-icon-tool-mailman">
      Developer Mailing List
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/code/" class="ui-icon-tool-git">
      Source Code
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/donate/" class="ui-icon-tool-link">
      Donate
      
        
      
      
      
    </a>
	
	<div style="clear:both"></div>

        
      </div>
      <div id="content_base">
			  
          
        
			  
          
        
        <div class="grid-24 pad">
          <h2 class="dark title">Advanced Security Guide
            <!-- actions -->
            <small>
            
  
    
    <a href="history" title="History"><b data-icon="N" class="ico ico-history" title="History"></b></a>
  
  
	<a href="feed" title="RSS"><b data-icon="f" class="ico ico-feed" title="Feed"></b></a>
  <a href="../search" title="Search"><b data-icon="s" class="ico ico-search" title="Search"></b></a>

            </small>
            <!-- /actions -->
          </h2>
		
  

          <div>
            
            
  
<div class="markdown_content"><div>
<div class="markdown_content"><p><a class="" href="https://sourceforge.net/p/whonix/wiki/Home/#whonix-homepage">Whonix Homepage</a> | <img alt="" src="http://whonix.sourceforge.net/screenshots/BC_Rnd_32px.png" /> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/#donate">Donate</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Download/#stay-tuned">News</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Screenshots/">Screenshots</a> | <a class="" href="http://whonix.sourceforge.net/videos.html">Videos</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Download/">Download</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Documentation/">Documentation</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/About/">About</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Features/">Features</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Security%20Guide/">Security Guide</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/FAQ/">FAQ</a> | <a class="" href="https://sourceforge.net/p/whonix/discussion/">Forum</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contact/">Contact</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Bridges/">Bridges Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Features/#vpn-tunnel-support">VPN/Tunnel Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Hidden%20Services/">Hidden Service Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/OtherOperatingSystems/">Windows Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/BrowserPlugins/">Flash Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/">You Can Help</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/">Contribiute</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Design/">Tech. Design</a> | <a class="" href="https://trac.torproject.org/projects/tor/wiki/doc/TorBOX/Dev" rel="nofollow">Development</a> | <a class="" href="https://github.com/adrelanos/Whonix" rel="nofollow">Source Code</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/BuildDocumentation/">Build Documentation</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Changelog/">Changelog</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Authorship/">Authorship</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Authorship/#disclaimer">Disclaimer</a></p></div>
</div>
<div class="toc">
<ul>
<li><a href="#basics">Basics</a></li>
<li><a href="#host-security">Host Security</a><ul>
<li><a href="#recommendation-to-use-whonix-with-physical-isolation">Recommendation to use Whonix with Physical Isolation</a></li>
<li><a href="#hardening">Hardening</a></li>
<li><a href="#one-vm">One VM</a></li>
<li><a href="#physical-attacks">Physical Attacks</a><ul>
<li><a href="#full-disk-encryption">Full Disk Encryption</a></li>
<li><a href="#screen-lock">Screen lock</a></li>
<li><a href="#cold-boot-attacks">Cold Boot Attacks</a></li>
<li><a href="#evil-maid-attack">Evil Maid Attack</a></li>
<li><a href="#problematic-interfaces">Problematic Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#operating-system">Operating System</a><ul>
<li><a href="#about-debian">About Debian</a><ul>
<li><a href="#harden-debian">Harden Debian</a></li>
</ul>
</li>
<li><a href="#harden-software-repositories">Harden Software Repositories</a></li>
<li><a href="#about-grsecurity">About grsecurity</a></li>
</ul>
</li>
<li><a href="#virtualization-platform">Virtualization Platform</a><ul>
<li><a href="#about-virtualbox">About VirtualBox</a></li>
<li><a href="#secure-label">Secure Label</a></li>
</ul>
</li>
<li><a href="#whonix-workstation-security">Whonix-Workstation Security</a><ul>
<li><a href="#hardening_1">Hardening</a></li>
<li><a href="#more-than-one-tor-browser-in-whonix">More than one Tor Browser in Whonix</a></li>
<li><a href="#using-multiple-whonix-workstations">Using multiple Whonix-Workstations</a></li>
</ul>
</li>
<li><a href="#stream-isolation">Stream Isolation</a></li>
<li><a href="#entropy">Entropy</a></li>
<li><a href="#encrypted-authenticated-connection-between-whonix-gateway-and-whonix-workstation">(encrypted) (authenticated) Connection Between Whonix-Gateway and Whonix-Workstation</a></li>
<li><a href="#restrict-transport">Restrict TransPort</a></li>
<li><a href="#license">License</a></li>
</ul>
</div>
<!--<!--
Copyright:

   Whonix Advanced Security Guide wiki page Copyright (C) Amnesia <amnesia at boum dot org>
   Whonix Advanced Security Guide wiki page Portions Copyright (C) 2012 adrelanos <adrelanos at riseup dot net>

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 3 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program; if not, write to:

    Free Software Foundation, Inc. 
    51 Franklin St, Fifth Floor
    Boston, MA 02110-1301, USA.

On Debian GNU/Linux systems, the complete text of the GNU General Public
License can be found in the /usr/share/common-licenses' directory.

The complete text of the GNU General Public License can also be found online on gnu.org <https://www.gnu.org/licenses/gpl.html>, in Whonix virtual machine images in /usr/share/common-licenses/GPL-3 file or in Whonix wiki on <https://sourceforge.net/p/whonix/wiki/GPLv3></https://sourceforge.net/p/whonix/wiki/GPLv3>.
-->-->
<!--<!--
This wiki page contains material from the of the Tails Protection against cold boot attacks  page, from this exact source <http://git.immerda.ch/?p=amnesia.git;a=blob;f=wiki/src/doc/advanced_topics/cold_boot_attacks.mdwn;hb=d249db72228b498407d85fb762b49ec155871ded>.
-->-->
<h1 id="basics">Basics</h1>
<p>Please understand the basics first, read the <a class="alink" href="/p/whonix/wiki/Security%20Guide/">[Security Guide]</a> first!</p>
<h1 id="host-security">Host Security</h1>
<h2 id="recommendation-to-use-whonix-with-physical-isolation">Recommendation to use Whonix with Physical Isolation</h2>
<p>Whonix using Physical Isolation, setup using two different computers AND virtualization. This is the most secure Tor configuration to date. Unfortunately, it is difficult to setup. See <a class="alink" href="/p/whonix/wiki/PhysicalIsolation/">[PhysicalIsolation]</a>.</p>
<h2 id="hardening">Hardening</h2>
<p>General hardening recommendations apply: Minimize attack surface, securely configure services (e.g. for ssh: use fail2ban, allow only key authentication), add proactive (compile time hardening, MAC, IPS...) and retroactive defenses (rkhunter, IDS, AV...). This is probably beyond the scope of this guide.</p>
<h2 id="one-vm">One VM</h2>
<p><strong>One VM is deprecated.</strong> It was tested and developed for 0.1.3. The concept worked. It's deprecated now, because it has no maintainer.</p>
<p>Alternatively, you could also use one VM instead of two, where Tor runs on the host. It has some security and other kinds of advantages/disadvantages listed in the article. See <a class="alink" href="/p/whonix/wiki/OneVM/">[OneVM]</a>.</p>
<h2 id="physical-attacks">Physical Attacks</h2>
<h3 id="full-disk-encryption">Full Disk Encryption</h3>
<p>To protect against physical attacks use FDE (Full Disk Encryption).</p>
<h3 id="screen-lock">Screen lock</h3>
<p>Always lock the screen (or better shut down) if you leave the system unattended.</p>
<h3 id="cold-boot-attacks">Cold Boot Attacks</h3>
<p>Due to how modern computing works, basically everything that you have done during a session is stored in the RAM. If an attacker has physical access to your computer when you are running Whonix, it may enable her to recover everything that have been achieved during the session - even if you are using Full Disk Encryptoion. From typed texts to saved files, including passwords and encryption keys. The more recent the activity, the more likely it is that it is still in the RAM.</p>
<p>Furthermore, it has been shown that the data present in the RAM might be recoverable for seconds or even minutes after the computer is powered off using a cold boot attack.</p>
<p>In both cases the RAM contents can be analyzed in a computer forensics laboratory which might turn into a major disaster depending on what they find.</p>
<p>As far as the authors know, cold boot attacks are not standard procedure within law enforcements and similar organizations anywhere in the world yet, but it might still be good to be prepared and stay on the safe side.</p>
<p>Wipe RAM on shutdown (e.g. using a kexec script) - or do not leave the computer unattended immediately after shutdown. Unfortunately there is not yet an upstream script, to implement wiping the RAM on shutdown. We can not provide a solution for this attack, this is solved nowhere but <a class="" href="https://tails.boum.org/bugs/sdmem_does_not_clear_all_memory/" rel="nofollow">partially</a> in Tails and Liberte Linux (not checked), waiting for upstream solution, see <a class="alink" href="/p/whonix/wiki/Dev/">[Dev]</a> Wipe RAM panic script. It's up to you to implement a panic button which will wipe the RAM, please <a class="" href="http://sourceforge.net/p/whonix/wiki/Contribute/">Contribute</a>. The least you can do is <a class="" href="http://sourceforge.net/p/whonix/wiki/Contribute/#vote-ideas">Vote</a> at upstream for the feature.</p>
<p><strong>Hypothetical...</strong> So, what should you do when you hear an attacker knocking at your door? You could just press the hypothetical panic button on the host. It would start to wipe the contents of the RAM by filling it out with random junk, thus erasing everything that was stored there before, including the encryption key of the encrypted storage devices you might use and the traces of your session. Then you would wait, possibly trying to buy valuable time by barricading your door.</p>
<h3 id="evil-maid-attack">Evil Maid Attack</h3>
<p>See <a class="" href="https://www.schneier.com/blog/archives/2009/10/evil_maid_attac.html" rel="nofollow">Evil Maid Attack</a>.</p>
<h3 id="problematic-interfaces">Problematic Interfaces</h3>
<p>Some interfaces such as ExpressCard, PCMCIA, FireWire or Thunderbol may depending on the host operating system settings allow an attacker with physical access to read the RAM. You are advised to securely configure those interfaces, to disable them or to remove them.</p>
<h1 id="operating-system">Operating System</h1>
<h2 id="about-debian">About Debian</h2>
<h3 id="harden-debian">Harden Debian</h3>
<ul>
<li><a class="" href="http://www.debian.org/security/" rel="nofollow">Debian Security Information</a></li>
<li><a class="" href="http://www.debian.org/doc/manuals/securing-debian-howto/ch-automatic-harden.en.html" rel="nofollow">Securing Debian Manual Chapter 6 - Automatic hardening of Debian systems</a></li>
<li><a class="" href="http://www.debian.org/doc/manuals/securing-debian-howto/ch-automatic-harden.en.html" rel="nofollow">Securing Debian Manual</a></li>
<li><a class="" href="http://wiki.debian.org/HardeningWalkthrough" rel="nofollow">Hardening Walkthrough</a></li>
<li>Feel free to research even more.</li>
</ul>
<p>Most hardening steps can not be easily added by default to Whonix. Mostly the user has to understand them and to be aware of them, require knowledge and effort, otherwise one thing or another will break. This is still under investigation and open for suggestions. Having a secure operating system will always be an important topic.</p>
<h2 id="harden-software-repositories">Harden Software Repositories</h2>
<p>Many operating systems provide multiple repositories. Since <em>Whonix's example implementation</em> is based on Debian, you should read <a class="" href="https://help.ubuntu.com/community/Repositories/" rel="nofollow">Ubuntu Repositories (similar in Debian)</a> and <a class="" href="http://www.debian.org/doc/debian-policy/ch-archive.html" rel="nofollow">Debian Policy Manual Chapter 2 - The Debian Archive</a> as introduction.</p>
<p>In conclusion, the main repository gets most attention and security updates. It would make sense to tweak <em>/etc/apt/sources.list</em> and to only use software from the main repository and to only install security fixes, no other updates.</p>
<p>Whonix currently doesn't do that by default and it's an open question for research if that really improves security.</p>
<p><a class="" href="https://github.com/fab1an/unix-admin-tools/blob/master/dpkg-origins" rel="nofollow">dpkg-origins</a> can create a list of all packages and their repository.</p>
<h2 id="about-grsecurity">About grsecurity</h2>
<p>Linux kernel is not a secure OS, Linus himself made it pretty clear that he doesn't think highly of the "security community". His threat model and a Tor User threat model don't have much in common. Good that Linux is open source and if we disagree with a policy or politics we can just patch or fork it... Grsecurity/PaX is the most comprehensive kernel patch providing much needed security hardening both for the kernel itself and for making userland protections more effective.</p>
<p>Sadly no distribution of binary grsec kernel exists. ^1^ That means either a packager/maintainer of Whonix needs to compile them EVERY TIME there is a security update to the kernel (which is pretty frequently) or the Whonix users themselves need to compile and update their kernels. This is undesirable because kernel compilation is not set and forget, you need a bit of knowledge, it takes a while, especially in a resource restricted VM and you need to keep updated about new releases via mailing lists or similar because your software updater doesn't automatically handle custom kernels (even emerge in hardened gentoo doesn't). All this would most likely only result in users running old, outdated kernel versions.</p>
<p>Further for Whonix-Gateway and the Identity/Location TCB grsecurity only addresses a subset of security risks: It can mitigate <em>some</em> kernel vulnerabilities (and we only really care about the networking stack which is pretty secure judging from its track record). <strong>Maybe</strong> <strong><em>some</em></strong> (memory corruption) vulnerabilities in apt-get and Tor that aren't already mitigated by the existing userland hardening done by Ubuntu. It can't protect against backdoors or security issues related to design, policy or yet unknown classes of exploits. We feel that these relatively small advantages outweigh the issues introduced by using a custom compiled kernel. We hope a binary distro will step forward and start using grsecurity. In that case we'll most likely switch Whonix-Gateway to that distro as soon as possible.</p>
<p>For Whonix-Workstation the benefits are even more doubtful. To be effective grsecurity needs to lock down some functions that are needed by Xorg, JIT compilers... but we need those to be working. To solve this we'd have to write a restrictive RBAC policy which is far from trivial. We think accepting that Whonix-Workstation will be exploitable and acting accordingly (using snapshots and rolling back to clean state) is the right approach for a desktop system.</p>
<p>If you disagree with this assessment or have any suggestions how to improve the current situation please let us know on <a class="alink" href="/p/whonix/wiki/Dev/">[Dev]</a>!</p>
<p>Experts only: There is also Hardened Gentoo based Whonix-Gateway. Outdated, needs maintainer. See <a class="alink" href="/p/whonix/wiki/HardenedGentooTG/">[HardenedGentooTG]</a></p>
<p><font size="-3"><br />
,,<br />
^1^ There's Alpine Linux but they don't package Tor yet: <a class="" href="http://bugs.alpinelinux.org/issues/1067" rel="nofollow">Package Request: Tor<br />
</a>.<br />
</font></p>
<h1 id="virtualization-platform">Virtualization Platform</h1>
<h2 id="about-virtualbox">About VirtualBox</h2>
<p>VirtualBox is developed by Oracle, a company not exactly know for being very "open". That includes how they announce security issues in their products as well as how they are perceived by the security community and how they will communicate with each other.</p>
<p>VirtualBox is primarily a simple, "user friendly", desktop solution and most certainly not designed with our threat model in mind. I haven't heard of anyone seriously auditing the code and I'd like to recommend a different VM solution at least as an alternative. There's KVM and Xen, open source but not cross-platform. It seems they are still lacking in terms of a reliable "internal networking" feature which Whonix heavily depends on. (If you know more, please edit this paragraph).</p>
<p>Anyone looking into Whonix solely because of security should really consider using Whonix with <a class="alink" href="/p/whonix/wiki/PhysicalIsolation/">[PhysicalIsolation]</a>.</p>
<p>Related Virtual Box Links:</p>
<ul>
<li><a class="" href="https://www.virtualbox.org/query?summary=~&amp;col=id&amp;col=summary&amp;col=status&amp;col=owner&amp;col=type&amp;col=priority&amp;col=component&amp;order=priority" rel="nofollow">Custom Ticket Search</a></li>
<li><a class="" href="https://www.virtualbox.org/newticket" rel="nofollow">New Ticket</a></li>
</ul>
<h2 id="secure-label">Secure Label</h2>
<p><a class="" href="http://www.virtualbox.org/manual/ch09.html#idp12297856" rel="nofollow">Secure labeling with VBoxSDL</a> has not yet been added to Whonix. I couldn't get it to work. If you know more, please share your knowledge.</p>
<p>We must not end up with non-standard desktop resolution, as per <a class="" href="https://sourceforge.net/p/whonix/wiki/Whonix%27s%20Protocol-Leak-Protection%20and%20Fingerprinting-Protection/">Whonix's Protocol-Leak-Protection and Fingerprinting-Protection</a>.</p>
<h1 id="whonix-workstation-security">Whonix-Workstation Security</h1>
<h2 id="hardening_1">Hardening</h2>
<p>Whonix isn't a perfectly hardened system. Additional hardening would be very welcome. At the same time, hardening by default is very difficult. That's why this is outside the scope of the Whonix Anonymous Operating System project, unless the project gets serious amounts of help with it. Hardening is left to the upstream operating system. See <a class="" href="https://sourceforge.net/p/whonix/wiki/Security/#operating-system">Operating System</a> for details.</p>
<p>Use AppAmor:</p>
<ul>
<li><a class="" href="https://trac.torproject.org/projects/tor/wiki/doc/AppArmorForTBB" rel="nofollow">AppArmor Profile for TBB</a></li>
</ul>
<h2 id="more-than-one-tor-browser-in-whonix">More than one Tor Browser in Whonix</h2>
<p>As the <a class="alink" href="/p/whonix/wiki/Warning/">[Warning]</a> page stated, <a class="" href="https://sourceforge.net/p/whonix/wiki/Warning/#whonix-doesnt-magically-separate-your-different-contextual-identities">Whonix doesn't magically separate your different contextual identities</a> and since Tor Browser and Tor Button do not yet solve this, for further separation of identities you could use <a class="" href="https://sourceforge.net/p/whonix/wiki/Multiple%20Whonix-Workstations/">Multiple Whonix-Workstations</a>, which would be more secure. </p>
<p>Alternatively, less secure than Multiple Whonix-Workstations, you could start multiple instances of Tor Browser and run them through different SocksPorts. The instructions in the <a class="alink" href="/p/whonix/wiki/ManualTBupdate/">[ManualTBupdate]</a> article need minimal changes.</p>
<p>Instead of</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span class="c">#!/bin/bash</span>
<span class="c">## Whonix Tor Browser start script</span>

~/tor-browser_en-US/App/Firefox/firefox --profile ~/tor-browser_en-US/Data/profile

<span class="c">## End of Whonix Tor Browser start script</span>
</pre></div>
</td></tr></table>
<p>Use</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span class="c">#!/bin/bash</span>
<span class="c">## Whonix Tor Browser start script</span>

<span class="c">## Adjust the path!</span>
~/tor-browser_2/App/Firefox/firefox --profile ~/tor-browser_2/Data/profile -no-remote

<span class="c">## End of Whonix Tor Browser start script</span>
</pre></div>
</td></tr></table>
<p>Only <em>-no-remote</em> was added to the start script. Otherwise Tor Browser would connect the the already running Tor Browser and this isn't what you want. And don't forget to adjust the path to the other Tor Browser.</p>
<p>You also have to use a different SocksPort in <em>user.js</em>. (See <a class="" href="https://sourceforge.net/p/whonix/wiki/TorBrowser/#whonix-proxy-settings-userjs">Whonix Proxy Settings / user.js</a> explanation.) Change</p>
<div class="codehilite"><pre><span class="n">user_pref</span><span class="p">(</span>&quot;<span class="n">extensions</span><span class="p">.</span><span class="n">torbutton</span><span class="p">.</span><span class="n">socks_port</span>&quot;<span class="p">,</span> 9100<span class="p">);</span>
</pre></div>
<p>For example to </p>
<div class="codehilite"><pre><span class="n">user_pref</span><span class="p">(</span>&quot;<span class="n">extensions</span><span class="p">.</span><span class="n">torbutton</span><span class="p">.</span><span class="n">socks_port</span>&quot;<span class="p">,</span> 9159<span class="p">);</span>
</pre></div>
<p>(See <a class="alink" href="/p/whonix/wiki/Stream%20Isolation/">[Stream Isolation]</a> page for explanation why you should use different SocksPorts.)</p>
<h2 id="using-multiple-whonix-workstations">Using multiple Whonix-Workstations</h2>
<p>See <a class="" href="https://sourceforge.net/p/whonix/wiki/Multiple%20Whonix-Workstations/">Using multiple Whonix-Workstations</a>.</p>
<h1 id="stream-isolation">Stream Isolation</h1>
<p>See <a class="alink" href="/p/whonix/wiki/Stream%20Isolation/">[Stream Isolation]</a>.</p>
<h1 id="entropy">Entropy</h1>
<p>See <a class="alink" href="/p/whonix/wiki/Entropy/">[Entropy]</a>.</p>
<h1 id="encrypted-authenticated-connection-between-whonix-gateway-and-whonix-workstation">(encrypted) (authenticated) Connection Between Whonix-Gateway and Whonix-Workstation</h1>
<p>See <a class="" href="https://sourceforge.net/p/whonix/wiki/Connection%20Between%20Whonix-Gateway%20and%20Whonix-Workstation/">(encrypted) (authenticated) Connection Between Whonix-Gateway and Whonix-Workstation</a>.</p>
<h1 id="restrict-transport">Restrict TransPort</h1>
<p>Explained under <a class="" href="https://sourceforge.net/p/whonix/wiki/Install%20Software/#whonix-workstation-is-firewalled">Whonix-Workstation is firewalled</a>.</p>
<h1 id="license">License</h1>
<div class="codehilite"><pre><span class="n">Whonix</span> <span class="n">Advanced</span> <span class="n">Security</span> <span class="n">Guide</span> <span class="n">wiki</span> <span class="n">page</span> <span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="n">Amnesia</span> <span class="o">&lt;</span><span class="n">amnesia</span> <span class="n">at</span> <span class="n">boum</span> <span class="nb">dot</span> <span class="n">org</span><span class="o">&gt;</span>
<span class="n">Whonix</span> <span class="n">Advanced</span> <span class="n">Security</span> <span class="n">Guide</span> <span class="n">wiki</span> <span class="n">page</span> <span class="n">Portions</span> <span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> 2012 <span class="n">adrelanos</span> <span class="o">&lt;</span><span class="n">adrelanos</span> <span class="n">at</span> <span class="n">riseup</span> <span class="nb">dot</span> <span class="n">net</span><span class="o">&gt;</span>

<span class="n">This</span> <span class="n">program</span> <span class="n">comes</span> <span class="n">with</span> <span class="n">ABSOLUTELY</span> <span class="n">NO</span> <span class="n">WARRANTY</span><span class="p">;</span> <span class="k">for</span> <span class="n">details</span> <span class="n">see</span> <span class="n">the</span> <span class="n">wiki</span> <span class="n">source</span> <span class="n">code</span><span class="p">.</span>
<span class="n">This</span> <span class="n">is</span> <span class="n">free</span> <span class="n">software</span><span class="p">,</span> <span class="n">and</span> <span class="n">you</span> <span class="n">are</span> <span class="n">welcome</span> <span class="n">to</span> <span class="n">redistribute</span> <span class="n">it</span>
<span class="n">under</span> <span class="n">certain</span> <span class="n">conditions</span><span class="p">;</span> <span class="n">see</span> <span class="n">the</span> <span class="n">wiki</span> <span class="n">source</span> <span class="n">code</span> <span class="k">for</span> <span class="n">details</span><span class="p">.</span>
</pre></div>
</div>

  <div id="create_wiki_page_holder" title="Create New Page" style="display:none">
    <form>
        <label class="grid-2">Name</label>
        <div class="grid-7"><input type="text" name="name"/></div>
    </form>
  </div>

          </div>
			
          
  <hr class="grid-19" style="margin-top: 1em; margin-bottom: 2em; clear:both;">
  
  
    <h4>Related</h4>
    <p>
    
      <a href="/p/whonix/wiki/Security%20Guide/">Wiki: Security Guide</a><br>
    
      <a href="/p/whonix/wiki/PhysicalIsolation/">Wiki: PhysicalIsolation</a><br>
    
      <a href="/p/whonix/wiki/OneVM/">Wiki: OneVM</a><br>
    
      <a href="/p/whonix/wiki/Dev/">Wiki: Dev</a><br>
    
      <a href="/p/whonix/wiki/HardenedGentooTG/">Wiki: HardenedGentooTG</a><br>
    
      <a href="/p/whonix/wiki/Warning/">Wiki: Warning</a><br>
    
      <a href="/p/whonix/wiki/ManualTBupdate/">Wiki: ManualTBupdate</a><br>
    
      <a href="/p/whonix/wiki/Stream%20Isolation/">Wiki: Stream Isolation</a><br>
    
      <a href="/p/whonix/wiki/Entropy/">Wiki: Entropy</a><br>
    
      <a href="/p/whonix/wiki/Host/">Wiki: Host</a><br>
    
      <a href="/p/whonix/wiki/FAQ/">Wiki: FAQ</a><br>
    
    </p>
  
  

        </div>
      </div>
    </section>
      
<footer id="site-footer">
    <div class="wrapper">
        <nav>
            <h5>SourceForge</h5>
            <a href="/about">About</a>
            <a href="/blog/category/sitestatus/">Site Status</a>
            <a href="http://twitter.com/sfnet_ops">@sfnet_ops</a>
        </nav>
        <nav>
            <h5>Find and Develop Software</h5>
            <a href="/create/">Create a Project</a>
            <a href="/directory/">Software Directory</a>
            <a href="/top">Top Downloaded Projects</a>
        </nav>
        <nav>
            <h5>Community</h5>
            <a href="/blog/">Blog</a>
            <a href="http://twitter.com/sourceforge">@sourceforge</a>
            <a href="/jobs?source=footer">Job Board</a>
        </nav>
        <nav>
            <h5>Help</h5>
            <a href="/apps/trac/sourceforge/wiki/WikiStart">Site Documentation</a>
            <a href="/support">Support Request</a>
            <a href="https://sourceforge.net/p/forge/documentation/Support%20via%20IRC/">Real-Time Support</a>
        </nav>
    </div>
</footer>
<footer id="site-copyright-footer">
    <div class="wrapper">
        <div id="copyright">
            Copyright &copy; 2013 SourceForge. All Rights Reserved.<br />
            SourceForge is a <a href="http://www.diceholdingsinc.com/phoenix.zhtml?c=211152&amp;p=irol-landing">Dice Holdings, Inc.</a> company.
        </div>
        <nav>
            <a href="http://geeknetmedia.com/terms-of-use">Terms</a>
            <a href="http://geeknetmedia.com/privacy-statement/">Privacy</a>
            <a href="http://geeknetmedia.com/opt-out-choices">Cookies/Opt Out</a>
            <a href="http://geeknetmedia.com">Advertise</a>
            <a href="http://sourceforge.jp/">SourceForge.JP</a>
        </nav>
    </div>
</footer>
    <div id="messages">
        
    </div>
    
      <!-- ew:body_js -->

    
      <script type="text/javascript" src="http://a.fsdn.com/allura/nf/1358968642/_ew_/_slim/js?href=allura%2Fjs%2Fjquery-base.js%3Ballura%2Fjs%2Fjquery.notify.js%3Ballura%2Fjs%2Fsylvester.js%3Ballura%2Fjs%2Fpb.transformie.min.js%3Ballura%2Fjs%2Fallura-base.js%3Bjs%2Fjquery.lightbox_me.js%3Bjs%2Fjquery.autosize-min.js%3Bjs%2Fjquery.textarea.js%3Bjs%2Fsf_markitup.js%3Bjs%2Fjquery.tag.editor.js"></script>
    
      
<!-- /ew:body_js -->

    
    
      <!-- ew:body_js_tail -->

    
      <script type="text/javascript">$(function () {
            var $lightbox = $('#lightbox_create_wiki_page');
            var $trigger = $('#sidebar a.add_wiki_page');
            $trigger.bind('click', function(e) {
                $lightbox.lightbox_me();
                return false;
            });
            $($lightbox).delegate('.close', 'click', function(e) {
                $lightbox.trigger('close');
                return false;
            });
        });
$(function () {
            $('#lightbox_create_wiki_page form').submit(function(){
                location.href = $('#sidebar a.add_wiki_page').attr('href') +
                    encodeURIComponent($('input[name=name]', $(this)).val().replace('/', '-')) + '/edit';
                return false;
            });
        });
$(function () {
            $('textarea.auto_resize').focus(function(){$(this).autosize();});
        });
$(document).ready(function () {
            $("a.attachment_form_add_button").click(function(evt){
                $(this).hide();
                $(".attachment_form_fields", this.parentNode).show();
                evt.preventDefault();
            });
            $("a.cancel_edit_post").click(function(evt){
                $("textarea", this.parentNode).val($("input.original_value", this.parentNode).val());
                $(".attachment_form_fields input", this.parentNode).val('');
                evt.preventDefault();
            });
         });

        (function () {
            $('div.discussion-post').each(function () {
                var post = this;
                $('.submit', post).button();
                $('.flag_post, .delete_post', post).click(function (ele) {
                    this.parentNode.submit();
                    return false;
                });
                if($('a.edit_post', post)){
                    $('a.edit_post', post).click(function (ele) {
                        $('.display_post', post).hide();
                        $('.edit_post_form', post).show();
                        $('.edit_post_form textarea', post).focus();
                        return false;
                    });
                    $("a.cancel_edit_post", post).click(function(evt){
                        $('.display_post', post).show();
                        $('.edit_post_form', post).hide();
                    });
                }
                if($('.reply_post', post)){
                    $('.reply_post', post).click(function (ele) {
                        $('.reply_post_form', post).show();
                        $('.reply_post_form textarea', post).focus();
                        return false;
                    });
                    $('.reply_post', post).button();
                }
                if($('.add_attachment', post)){
                    $('.add_attachment', post).click(function (ele) {
                        $('.add_attachment_form', post).show();
                        return false;
                    });
                }
                if($('.promote_to_thread', post)){
                    $('.promote_to_thread', post).click(function (ele) {
                        $('.promote_to_thread_form', post).show();
                        return false;
                    });
                }
                if($('.shortlink', post)){
                    var popup = $('.shortlink_popup', post);
                    $('.shortlink', post).click(function(evt){
                        evt.preventDefault();
                        popup.lightbox_me({
                            onLoad: function() {
                                $('input', popup).select();
                            }
                        });
                    });
                    $('.close', popup).bind('click', function() {
                        popup.hide();
                    });
                }
            });
        }());
        
$(function () {
            $('select.results_per_page').change(function () {
                this.form.submit();});});
$(function () {
          $('input.label_edit').tagEditor({
            confirmRemoval: false,
            completeOnSeparator: true,
            completeOnBlur: true
          });
        });

        $(document).ready(function () {
            var thread_tag = $('a.thread_tag');
            var thread_spam = $('a.sidebar_thread_spam');
            var tag_thread_holder = $('#tag_thread_holder');
            var allow_moderate = $('#allow_moderate');
            var mod_thread_link = $('#mod_thread_link');
            var mod_thread_form = $('#mod_thread_form');
            if (mod_thread_link.length) {
                if (mod_thread_form.length) {
                    mod_thread_link.click(function (e) {
                        mod_thread_form.show();
                        return false;
                    });
                }
            }
            if (thread_tag.length) {
                if (tag_thread_holder.length) {
                    var submit_button = $('input[type="submit"]', tag_thread_holder);
                    var cancel_button = $('<a href="#" class="btn link">Cancel</a>').click(function(evt){
                        evt.preventDefault();
                        tag_thread_holder.hide();
                        thread_tag.removeClass('active');
                    });
                    submit_button.after(cancel_button);
                    thread_tag.click(function (e) {
                        tag_thread_holder.show();
                        thread_tag.addClass('active');
                        // focus the submit to scroll to the form, then focus the subject for them to start typing
                        submit_button.focus();
                        $('input[type="text"]', tag_thread_holder).focus();
                        return false;
                    });
                }
            }
            if (thread_spam.length) {
                if (allow_moderate.length) {
                    var cval = $.cookie('_session_id');
                    thread_spam[0].style.display='block';
                }
            }
        });
        </script>
    
      
<!-- /ew:body_js_tail -->

    
    
  <div id="lightbox_create_wiki_page" class="modal" style="display:none">
  <b data-icon="D" class="ico ico-close close"></b>
  
    <h1>Add a Wiki Page</h1>
    <form class="grid-10">
        <label class="grid-2">Name</label>
        <div class="grid-7"><input type="text" name="name"></div>
        <label class="grid-2">&nbsp;</label>
        <div class="grid-7"><input type="submit" value="Create page"></div>
    </form>
  
</div>
<script type="text/javascript">
  /*<![CDATA[*/
  $('.post-link')
    .click(function(evt) {
        var cval = $.cookie('_session_id');
        evt.preventDefault();
        $.post(this.href, {_session_id:cval}, function(val)
            { window.location = val.location; },
            'json');
      });
  /*]]>*/
</script>
  

    
      
    
    
   
    
  </body>
</html>