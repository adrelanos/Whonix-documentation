<!DOCTYPE html>
<!-- Server: sfn-web-2 -->


  










<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]>--> <html lang="en" class="no-js"> <!--<![endif]-->
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
    <title>Whonix / Documentation / Deprecated</title>
    

<script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/modernizr.custom.90514.js"></script>

<script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/jquery-1.8.0.min.js"></script>

<script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/header.js"></script>
<!--[if lt IE 7 ]>
  <script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
<![endif]-->
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular' rel='stylesheet' type='text/css'>
<style type="text/css">
    @font-face {
        font-family: "Pictos";
        src: url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.eot');
        src: local("â˜º"), url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.woff') format('woff'), url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.ttf') format('truetype'), url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.svg') format('svg');
    }
</style>
    <script type="text/javascript">
            /*jslint onevar: false, nomen: false, evil: true, css: true, plusplus: false, white: false, forin: true, on: true, immed: false */
            /*global confirm, alert, unescape, window, jQuery, $, net, COMSCORE */
    </script>
    
      <!-- ew:head_css -->

    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/allura/css/forge/hilite.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/tool/wiki/css/wiki.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/forge.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/_slim/css?href=css%2Fmarkitup_sf.css%3Bcss%2Fpage_list.css"
                >
    
      <style>
            input.label_edit{ float: left; }
            .tagEditor{
                margin: 4px 0;
                padding: 0;
                float: left;
            }

            .tagEditor li, .removable{
                display: inline;
                background-image: url('http://a.fsdn.com/allura/nf/1358968642/_static_/images/minus_small.png');
                background-color: #eef;
                background-position: right center;
                background-repeat: no-repeat;
                list-style-type: none;
                padding: 0 18px 0 6px;
                margin: 0 4px;
                cursor: pointer;
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
            }

            .tagEditor li:hover{
                background-color: #ebebeb;
            }</style>
    
      
<!-- /ew:head_css -->

    
    
    
      <!-- ew:head_js -->

    
      
<!-- /ew:head_js -->

    
    

    
      <style type="text/css">
        #page-body.project---init-- #top_nav { display: none; }
#page-body.project---init-- #nav_menu_holder { display: none; margin-bottom: 0; }
#page-body.project---init-- #content_base {margin-top: 0; }
      </style>
    
    
<style>
  .hidden { display: none }
  a.notfound { color: #f00; }
</style>

      <style>.XVnDkcwIDChmPjSuTknWHpHlnQ { display:none }</style>

    
<link rel="alternate" type="application/rss+xml" title="Page RSS" href="feed.rss"/>
<link rel="alternate" type="application/atom+xml" title="Page Atom" href="feed.atom"/>
<link rel="alternate" type="application/rss+xml" title="Wiki RSS" href="../feed.rss"/>
<link rel="alternate" type="application/atom+xml" title="Wiki Atom" href="../feed.atom"/>

    
    


<script type="text/javascript">
    var _gaq = _gaq || [];

    function _add_tracking(prefix, tracking_id, send_user) {
        _gaq.push([prefix+'._setAccount', tracking_id]);
        _gaq.push([prefix+'._setCustomVar', 1, 'Page Type', 'wiki', 3]);_gaq.push([prefix+'._trackPageview']);
    }
      _add_tracking('sfnt1', 'UA-32013-6', true);
      _add_tracking('sfnt2', 'UA-36130941-1', true);
    

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' === document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </head>

  <body class="wiki-Deprecated" id="forge">
    
      <!-- ew:body_top_js -->

    
      
<!-- /ew:body_top_js -->

    
    
<header id="site-header">
    <div class="wrapper">
        <a href="/" class="logo">
            <span>SourceForge</span>
        </a>
        
        <form method="get" action="/directory/">
            <input type="text" id="words" name="q" placeholder="Search">
        </form>
        
        <!--Switch to {language}-->
        <nav id="nav-site">
            <a href="/directory/" title="Browse our software.">Browse</a>
            <a href="/blog/" title="Read the latest news from the SF HQ.">Blog</a>
            <a href="/support" title="Contact us for help and feedback.">Help</a>
        </nav>
        <nav id="nav-account">
            
              <div class="logged_out">
                <a href="/account/login.php">Log In</a>
                <span>or</span>
                <a href="https://sourceforge.net/user/registration/">Join</a>
              </div>
            
        </nav>
        
    </div>
</header>
<header id="site-sec-header">
    <div class="wrapper">
        <nav id="nav-hubs">
            <h4>Solution Centers</h4>
            <a href="http://ibmsmartercommerce.sourceforge.net/">Smarter Commerce</a>
            <a href="http://goparallel.sourceforge.net/">Go Parallel</a>
            <a href="http://html5center.sourceforge.net/">HTML5</a>
            <a href="http://ibmsmarteritservices.sourceforge.net/">Smarter IT</a>
        </nav>
        <nav id="nav-collateral">
            <a href="/jobs?source=header">Jobs</a>
            <a href="http://library.geeknetmedia.com">Resources</a>
            
            <a href="">Newsletters</a>
            
        </nav>
    </div>
</header>
    
    <section id="page-body" class=" neighborhood-Projects project-whonix mountpoint-wiki">
	  <div class="grid-24" id="nav_menu_holder">
            
            


  
  <a href="/p/whonix/">
    
      <img src="/p/whonix//icon?2012-10-18 23:06:52+00:00" class="project_icon" alt="Project Logo">
    
	<h1 class="project_title">
      
        Whonix
      
	</h1>
	</a>

            
      </div>
      <div id="top_nav" class="">
        
        
  
    <a href="/p/whonix/homelink/" class="ui-icon-tool-link">
      Homepage
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/wiki/" class="ui-icon-tool-wiki">
      Documentation
      
        
          <span class="diamond"></span>
        
      
      
      
    </a>
	
    <a href="/p/whonix/blog/" class="ui-icon-tool-blog">
      Important Blog
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/featureblog/" class="ui-icon-tool-blog">
      Feature Blog
      
        
      
      
      
    </a>
	
    <a href="/projects/whonix/files/" class="ui-icon-tool-files">
      _
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/discussion/" class="ui-icon-tool-discussion">
      User Help Forum
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/mailman/" class="ui-icon-tool-mailman">
      Developer Mailing List
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/code/" class="ui-icon-tool-git">
      Source Code
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/donate/" class="ui-icon-tool-link">
      Donate
      
        
      
      
      
    </a>
	
	<div style="clear:both"></div>

        
      </div>
      <div id="content_base">
			  
          
        
			  
          
        
        <div class="grid-24 pad">
          <h2 class="dark title">Deprecated
            <!-- actions -->
            <small>
            
  
    
    <a href="history" title="History"><b data-icon="N" class="ico ico-history" title="History"></b></a>
  
  
	<a href="feed" title="RSS"><b data-icon="f" class="ico ico-feed" title="Feed"></b></a>
  <a href="../search" title="Search"><b data-icon="s" class="ico ico-search" title="Search"></b></a>

            </small>
            <!-- /actions -->
          </h2>
		
  

          <div>
            
            
  
<div class="markdown_content"><div>
<div class="markdown_content"><p><a class="" href="https://sourceforge.net/p/whonix/wiki/Home/#whonix-homepage">Whonix Homepage</a> | <img alt="" src="http://whonix.sourceforge.net/screenshots/BC_Rnd_32px.png" /> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/#donate">Donate</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Download/#stay-tuned">News</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Screenshots/">Screenshots</a> | <a class="" href="http://whonix.sourceforge.net/videos.html">Videos</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Download/">Download</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Documentation/">Documentation</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/About/">About</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Features/">Features</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Security%20Guide/">Security Guide</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/FAQ/">FAQ</a> | <a class="" href="https://sourceforge.net/p/whonix/discussion/">Forum</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contact/">Contact</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Bridges/">Bridges Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Features/#vpn-tunnel-support">VPN/Tunnel Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Hidden%20Services/">Hidden Service Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/OtherOperatingSystems/">Windows Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/BrowserPlugins/">Flash Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/">You Can Help</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/">Contribiute</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Design/">Tech. Design</a> | <a class="" href="https://trac.torproject.org/projects/tor/wiki/doc/TorBOX/Dev" rel="nofollow">Development</a> | <a class="" href="https://github.com/adrelanos/Whonix" rel="nofollow">Source Code</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/BuildDocumentation/">Build Documentation</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Changelog/">Changelog</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Authorship/">Authorship</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Authorship/#disclaimer">Disclaimer</a></p></div>
</div>
<div class="toc">
<ul>
<li><a href="#about-this-page">About this page</a></li>
<li><a href="#updating-tor">Updating Tor</a></li>
<li><a href="#virtualbox-guest-additions">VirtualBox Guest Additions</a><ul>
<li><a href="#introduction">Introduction</a></li>
</ul>
</li>
<li><a href="#torchat-source-package">TorChat source package</a><ul>
<li><a href="#howto">HowTo</a><ul>
<li><a href="#alternative">Alternative</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#mixmaster">Mixmaster</a><ul>
<li><a href="#mx-capable-dns-resolver">MX capable DNS resolver</a></li>
<li><a href="#install-postfix">Install Postfix</a></li>
<li><a href="#debugging-postfix">Debugging Postfix</a></li>
</ul>
</li>
<li><a href="#bugs">Bugs</a></li>
</ul>
</div>
<h1 id="about-this-page">About this page</h1>
<p><strong>This is outdated documentation which no longer applies. Kept in case it it will be required again in future.</strong></p>
<h1 id="updating-tor">Updating Tor</h1>
<p>Tor was installed on Whonix according to <a class="" href="https://www.torproject.org/docs/debian#ubuntu" rel="nofollow">official instructions for Ubuntu</a>. You can update Tor (and the rest of the system) using <em>apt-get update</em> and <em>apt-get dist-upgrade</em>.</p>
<p>If you run in the following error message when running <em>apt-get update</em> on the Gateway...</p>
<div class="codehilite"><pre><span class="n">W</span><span class="o">:</span> <span class="n">GPG</span> <span class="n">error</span><span class="o">:</span> <span class="n">http</span><span class="o">://</span><span class="n">deb</span><span class="o">.</span><span class="na">torproject</span><span class="o">.</span><span class="na">org</span> <span class="n">precise</span> <span class="n">Inrelease</span><span class="o">:</span> <span class="n">The</span> <span class="n">following</span> <span class="n">signature</span> <span class="n">were</span> <span class="n">invalid</span><span class="o">:</span> <span class="n">Keyexpired</span> <span class="mi">1346668560</span>
</pre></div>
<p>...or into the following error message on the Gateway when running <em>apt-get dist-upgrade</em>:</p>
<div class="codehilite"><pre><span class="n">Warning</span><span class="o">:</span> <span class="n">The</span> <span class="n">following</span> <span class="n">packages</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">authenticated</span><span class="o">!</span>
<span class="n">deb</span><span class="o">.</span><span class="na">torproject</span><span class="o">.</span><span class="na">org</span><span class="o">-</span><span class="n">keyring</span> <span class="n">tor</span>
<span class="n">Install</span> <span class="n">these</span> <span class="n">packages</span> <span class="n">without</span> <span class="n">varification</span><span class="o">?</span>
</pre></div>
<p>...please use the workaround below. Please do not install without verification for your own safety!</p>
<p>Temporary fix. Run these two commands. (Check if they are still current and genuine in official instructions for Ubuntu.)</p>
<div class="codehilite"><pre><span class="n">gpg</span> <span class="o">--</span><span class="n">keyserver</span> <span class="n">keys</span><span class="p">.</span><span class="n">gnupg</span><span class="p">.</span><span class="n">net</span> <span class="o">--</span><span class="n">recv</span> 886<span class="n">DDD89</span>

<span class="n">gpg</span> <span class="o">--</span><span class="n">export</span> <span class="n">A3C4F0F979CAA22CDBA8F512EE8CBC9E886DDD89</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">key</span> <span class="n">add</span> <span class="o">-</span>
</pre></div>
<p>(If they fail for the first time, perhaps because you are on a slow network or slow Tor circuit, run them a few times until the succeed.)</p>
<p>,, Technical problem: The latest Whonix release is a few days ago and in meanwhile there is a new deb.torproject.org-keyring got renewed while the old torproject deb keys expired. Fixing the problem requires a new Whonix release. It will be fixed in 0.3.0.</p>
<h1 id="virtualbox-guest-additions">VirtualBox Guest Additions</h1>
<h2 id="introduction">Introduction</h2>
<p>Written and tested with Whonix 0.2.1 (Ubuntu precise). Many things can go wrong and none or the very least of them will be caused by Whonix. This has only limited support by the Whonix developers, because 1. it's not recommend, for security reasons and 2. the guest additions related bugs and instructions are somewhat out of the scope of the Whonix project.</p>
<p>Installation is somewhat difficult and no packages exist. Just search the internet and you'll see, that loads of people having issues installing the VirtualBox guest additions. People having problems for years. VMware is of no alternative, people are also having trouble installing the VMware tools into Linux guests. The issue with the guest additions is ridiculous. For years no solution has been found. With each kernel update, recompilation is required, and quite often, due to some updates, complication becomes difficult or impossible for a long time.</p>
<p>Also see article, <a class="" href="http://www.phoronix.com/scan.php?page#news_item&amp;px#OTk5Mw" rel="nofollow">The VirtualBox Kernel Driver Is Tainted Crap</a>.</p>
<p>If you are having trouble, than in most cases not because of Whonix. The Whonix setup is a regular Ubuntu Linux and VirtualBox. You can try asking the regular VirtualBox and Ubuntu resources if you have trouble.</p>
<h1 id="torchat-source-package">TorChat source package</h1>
<h2 id="howto">HowTo</h2>
<p><strong>EXPERIMENTAL</strong> Experimental as in it is difficult to install. Only use it in case you trust TorChat. There shouldn't be any anonymity leaks and it should be as safe as other hidden services in general and in Whonix.</p>
<p>Learn about <a class="" href="https://sourceforge.net/p/whonix/wiki/Hidden%20Services/">Hidden Services</a> in Whonix first and learn how to set up the hidden webserver. This will ease following this guide.</p>
<p>On Whonix-Gateway.</p>
<p>Open torrc.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">nano</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">tor</span><span class="o">/</span><span class="n">torrc</span>
</pre></div>
<p>Add.</p>
<div class="codehilite"><pre><span class="n">HiddenServiceDir</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">tor</span><span class="o">/</span><span class="n">torchat_service</span><span class="o">/</span>
<span class="n">HiddenServicePort</span> 11009 192<span class="p">.</span>168<span class="p">.</span>0<span class="p">.</span>11<span class="p">:</span>11009
</pre></div>
<p>Save. Reload Tor.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">service</span> <span class="n">tor</span> <span class="n">reload</span>
</pre></div>
<p>On Whonix-Gateway.</p>
<p>Install dependencies.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python</span> <span class="n">python</span><span class="o">-</span><span class="n">wxgtk2</span><span class="p">.</span>8
</pre></div>
<p>Get your onion address.</p>
<div class="codehilite"><pre><span class="n">nano</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">tor</span><span class="o">/</span><span class="n">torchat_service</span><span class="o">/</span><span class="n">hostname</span>
</pre></div>
<p>Backup your key, if you want to ever restore it one another machine, a newer Whonix-Workstation or after hdd failure.</p>
<div class="codehilite"><pre><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">tor</span><span class="o">/</span><span class="n">torchat_service</span><span class="o">/</span><span class="n">private_key</span>
</pre></div>
<p>Download the latest Python version of TorChat source code, for example as time of writing torchat-source-0.9.9.553.zip - Python source code (classic standalone 0.9.9 version) from (<a href="https://github.com/prof7bit/TorChat/downloads" rel="nofollow">https://github.com/prof7bit/TorChat/downloads</a>) and store it in <em>/home/user</em>.</p>
<p>Unpack.</p>
<div class="codehilite"><pre><span class="n">unzip</span> <span class="n">torchat</span><span class="o">-</span><span class="n">source</span><span class="o">-</span>0<span class="p">.</span>9<span class="p">.</span>9<span class="p">.</span>553<span class="p">.</span><span class="n">zip</span>
</pre></div>
<p>Get into the torchat source folder. For example.</p>
<div class="codehilite"><pre><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">torchat</span><span class="o">-</span><span class="n">source</span><span class="o">-</span>0<span class="p">.</span>9<span class="p">.</span>9<span class="p">.</span>553<span class="o">/</span>
</pre></div>
<p>Get into the src folder.</p>
<div class="codehilite"><pre><span class="n">cd</span> <span class="n">src</span>
</pre></div>
<p>Get into the Tor folder.</p>
<div class="codehilite"><pre><span class="n">cd</span> <span class="n">Tor</span>
</pre></div>
<p>Rename tor.sh.</p>
<div class="codehilite"><pre><span class="n">mv</span> <span class="n">tor</span><span class="p">.</span><span class="n">sh</span> <span class="n">backup_tor</span><span class="p">.</span><span class="n">sh</span>
</pre></div>
<p>Go back to the src folder.</p>
<div class="codehilite"><pre><span class="n">cd</span> <span class="p">..</span>
</pre></div>
<p>Create torchat.ini.</p>
<div class="codehilite"><pre><span class="n">nano</span> <span class="n">torchat</span><span class="p">.</span><span class="n">ini</span>
</pre></div>
<p>Add the following content.</p>
<div class="codehilite"><pre><span class="k">[client]</span>
<span class="na">listen_interface</span> <span class="o">=</span> <span class="s">192.168.0.11</span>
<span class="na">listen_port</span> <span class="o">=</span> <span class="s">11009</span>
<span class="na">own_hostname</span> <span class="o">=</span> <span class="s">&lt;your onion hostname without .onion&gt;</span>

<span class="k">[tor]</span>
<span class="na">tor_server</span> <span class="o">=</span> <span class="s">192.168.0.10</span>
<span class="na">tor_server_control_port</span> <span class="o">=</span> <span class="s">9154</span>
<span class="na">tor_server_socks_port</span> <span class="o">=</span> <span class="s">9154</span>

<span class="k">[tor_portable]</span>
<span class="na">tor_server</span> <span class="o">=</span> <span class="s">192.168.0.10</span>
<span class="na">tor_server_control_port</span> <span class="o">=</span> <span class="s">9154</span>
<span class="na">tor_server_socks_port</span> <span class="o">=</span> <span class="s">9154</span>
</pre></div>
<p>Make torchat executable.</p>
<div class="codehilite"><pre><span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="n">torchat</span><span class="p">.</span><span class="n">py</span>
</pre></div>
<p>Run torchat.</p>
<div class="codehilite"><pre><span class="o">./</span><span class="n">torchat</span>
</pre></div>
<h3 id="alternative">Alternative</h3>
<p>After installing the dependencies we could also force install the torchat deb package.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">dpkg</span> <span class="o">-</span><span class="nb">i</span> <span class="o">--</span><span class="n">force</span><span class="o">-</span><span class="n">depends</span> <span class="n">torchat</span><span class="o">-</span>0<span class="p">.</span>9<span class="p">.</span>9<span class="p">.</span>553<span class="p">.</span><span class="n">deb</span>
</pre></div>
<p>And then configure the files inside <em>/home/user/.torchat</em>. I don't know if that may be the better way.</p>
<h1 id="mixmaster">Mixmaster</h1>
<h2 id="mx-capable-dns-resolver">MX capable DNS resolver</h2>
<p>No longer required.</p>
<p><font size="-3"><br />
Mixmaster needs to resolve MX DNS records, <a class="" href="https://trac.torproject.org/projects/tor/ticket/7829" rel="nofollow">while Tor does not support that</a>. We have to install a DNS resolver capable of doing that. It still comes with caveats.</font></p>
<p>Required knowledge:</p>
<ul>
<li>Introduction chapter of <a class="" href="https://sourceforge.net/p/whonix/wiki/Secondary%20DNS%20Resolver/">Secondary DNS Resolver</a></li>
</ul>
<p>The <a class="" href="https://sourceforge.net/p/whonix/wiki/Secondary%20DNS%20Resolver/#example-with-cznic-labs-dns-resolver">Example with CZ.NIC Labs DNS resolver</a> worked in this case.<br />
</p>
<p><font size="-3"><br />
Security considerations when replacing the system wide DNS resolver:</font></p>
<ul>
<li>The third party DNS resolver traffic goes through it's own circuit, which is good.</li>
<li>All (custom installed) applications not configured to use a SocksPort (see <a class="alink" href="/p/whonix/wiki/Stream%20Isolation/">[Stream Isolation]</a>), would resolve their DNS through the system wide DNS resolver, which would be the third party resolver, giving too much power to it, because it's always the same, only one service provider, not changing like Tor circuits but static.<br />
</li>
</ul>
<h2 id="install-postfix">Install Postfix</h2>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">postfix</span>
## <span class="n">configure</span> <span class="n">postfix</span> <span class="n">as</span> <span class="n">sattelite</span> <span class="n">system</span><span class="p">,</span> <span class="n">default</span> <span class="n">settings</span>
</pre></div>
<p><font size="-3">Technical background:<br />
Mixmaster requires either<br />
- a) An (open) smtp server SMTPRELAY in <em>/etc/mixmaster/remailer.conf</em>. Unfortunately, I haven't found any open smtp server (search term: open relay). A mailserver where the user registers first would probable work, but this would defeat the original idea: sending e-mails without depending on registration. Or,<br />
- b) a mta (mail transfer agent), which speaks to the remailer directly. <strong>TODO</strong>: Are there enough Tor exit nodes, which allow the SMTP port and does their ISP allow to speak SMTP? If there are too few servers, it could be bad for anonymity.<br />
</font></p>
<p>Open <em>/etc/postfix/main.cf</em>.</p>
<div class="codehilite"><pre><span class="n">kdesudo</span> <span class="n">leafpad</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">postfix</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="n">cf</span>
</pre></div>
<p>Replace the content with the following.</p>
<div class="codehilite"><pre><span class="c"># See /usr/share/postfix/main.cf.dist for a commented, more complete version</span>

<span class="c"># Debian specific:  Specifying a file name will cause the first</span>
<span class="c"># line of that file to be used as the name.  The Debian default</span>
<span class="c"># is /etc/mailname.</span>
<span class="c">#myorigin = /etc/mailname</span>

<span class="n">smtpd_banner</span> <span class="p">=</span> $<span class="n">myhostname</span> <span class="n">ESMTP</span> $<span class="n">mail_name</span> <span class="p">(</span><span class="n">Debian</span><span class="o">/</span><span class="n">GNU</span><span class="p">)</span>
<span class="n">biff</span> <span class="p">=</span> <span class="n">no</span>

<span class="c"># appending .domain is the MUA's job.</span>
<span class="n">append_dot_mydomain</span> <span class="p">=</span> <span class="n">no</span>

<span class="c"># Uncomment the next line to generate &quot;delayed mail&quot; warnings</span>
<span class="c">#delay_warning_time = 4h</span>

<span class="n">readme_directory</span> <span class="p">=</span> <span class="n">no</span>

<span class="c"># TLS parameters</span>
<span class="n">smtpd_tls_cert_file</span><span class="p">=</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssl</span><span class="o">/</span><span class="n">certs</span><span class="o">/</span><span class="n">ssl</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">snakeoil</span><span class="p">.</span><span class="n">pem</span>
<span class="n">smtpd_tls_key_file</span><span class="p">=</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssl</span><span class="o">/</span><span class="n">private</span><span class="o">/</span><span class="n">ssl</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">snakeoil</span><span class="p">.</span><span class="n">key</span>
<span class="n">smtpd_use_tls</span><span class="p">=</span><span class="n">yes</span>
<span class="n">smtpd_tls_session_cache_database</span> <span class="p">=</span> <span class="n">btree</span><span class="p">:</span>$<span class="p">{</span><span class="n">data_directory</span><span class="p">}</span><span class="o">/</span><span class="n">smtpd_scache</span>
<span class="n">smtp_tls_session_cache_database</span> <span class="p">=</span> <span class="n">btree</span><span class="p">:</span>$<span class="p">{</span><span class="n">data_directory</span><span class="p">}</span><span class="o">/</span><span class="n">smtp_scache</span>

<span class="c"># See /usr/share/doc/postfix/TLS_README.gz in the postfix-doc package for</span>
<span class="c"># information on enabling SSL in the smtp client.</span>

<span class="n">myhostname</span> <span class="p">=</span> <span class="n">host</span><span class="p">.</span><span class="n">localdomain</span>
<span class="n">alias_maps</span> <span class="p">=</span> <span class="n">hash</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">aliases</span>
<span class="n">alias_database</span> <span class="p">=</span> <span class="n">hash</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">aliases</span>
<span class="n">mydestination</span> <span class="p">=</span> <span class="n">host</span><span class="p">,</span> <span class="n">host</span><span class="p">.</span><span class="n">localdomain</span><span class="p">,</span> <span class="n">localhost</span><span class="p">.</span><span class="n">localdomain</span><span class="p">,</span> <span class="n">localhost</span>
<span class="n">mynetworks</span> <span class="p">=</span> 127<span class="p">.</span>0<span class="p">.</span>0<span class="p">.</span>0<span class="o">/</span>8 <span class="p">[::</span><span class="n">ffff</span><span class="p">:</span>127<span class="p">.</span>0<span class="p">.</span>0<span class="p">.</span>0<span class="p">]</span><span class="o">/</span>104 <span class="p">[::</span>1<span class="p">]</span><span class="o">/</span>128
<span class="n">mailbox_command</span> <span class="p">=</span> 
<span class="n">mailbox_size_limit</span> <span class="p">=</span> 0
<span class="n">recipient_delimiter</span> <span class="p">=</span> <span class="o">+</span>
<span class="n">inet_interfaces</span> <span class="p">=</span> <span class="n">loopback</span><span class="o">-</span><span class="n">only</span>
<span class="n">inet_protocols</span> <span class="p">=</span> <span class="nb">all</span>

<span class="n">relayhost</span> <span class="p">=</span> 1<span class="p">.</span>1<span class="p">.</span>1<span class="p">.</span>1
<span class="c">#relayhost = 2.2.2.2</span>
</pre></div>
<h2 id="debugging-postfix">Debugging Postfix</h2>
<p>Looking into the mail log.</p>
<div class="codehilite"><pre><span class="n">tail</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">mail</span><span class="p">.</span><span class="n">info</span>
</pre></div>
<p>Should contain something like this.</p>
<div class="codehilite"><pre><span class="o">&lt;</span><span class="n">date</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span> <span class="n">debian</span> <span class="n">postfix</span><span class="o">/</span><span class="n">pickup</span><span class="p">[</span><span class="n">id</span><span class="p">]:</span> <span class="n">id2</span><span class="p">:</span> <span class="n">uid</span><span class="p">=</span>1000 <span class="n">from</span><span class="p">=</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">date</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span> <span class="n">debian</span> <span class="n">postfix</span><span class="o">/</span><span class="n">cleanup</span><span class="p">[</span><span class="n">id</span><span class="p">]:</span> <span class="n">id2</span><span class="p">:</span> <span class="n">message</span><span class="o">-</span><span class="n">id</span><span class="p">=</span><span class="o">&lt;</span><span class="n">id3</span><span class="p">.</span><span class="n">id4</span><span class="p">@</span><span class="n">host</span><span class="p">.</span><span class="n">localdomain</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">date</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span> <span class="n">debian</span> <span class="n">postfix</span><span class="o">/</span><span class="n">qmgr</span><span class="p">[</span><span class="n">id</span><span class="p">]:</span> <span class="n">id2</span><span class="p">:</span> <span class="n">from</span><span class="p">=</span><span class="o">&lt;</span><span class="n">user</span><span class="p">@</span><span class="n">host</span><span class="p">.</span><span class="n">localdomain</span><span class="o">&gt;</span><span class="p">,</span> <span class="nb">size</span><span class="p">=</span>30000<span class="p">,</span> <span class="n">nrcpt</span><span class="p">=</span>1 <span class="p">(</span><span class="n">queue</span> <span class="n">active</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">date</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span> <span class="n">debian</span> <span class="n">postfix</span><span class="o">/</span><span class="n">smtp</span><span class="p">[</span>300<span class="p">]:</span> <span class="n">id2</span><span class="p">:</span> <span class="n">to</span><span class="p">=</span><span class="o">&lt;</span><span class="n">remailer</span><span class="p">@</span><span class="n">breaka</span><span class="p">.</span><span class="n">net</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">relay</span><span class="p">=</span><span class="n">mail</span><span class="p">.</span><span class="n">breaka</span><span class="p">.</span><span class="n">net</span><span class="p">[</span>202<span class="p">.</span>75<span class="p">.</span>54<span class="p">.</span>8<span class="p">]:</span>25<span class="p">,</span> <span class="n">delay</span><span class="p">=</span>30<span class="p">,</span> <span class="n">delays</span><span class="p">=</span>0<span class="p">.</span>30<span class="o">/</span>0<span class="p">.</span>01<span class="o">/</span>30<span class="o">/</span>3<span class="p">.</span>0<span class="p">,</span> <span class="n">dsn</span><span class="p">=</span>2<span class="p">.</span>0<span class="p">.</span>0<span class="p">,</span> <span class="n">status</span><span class="p">=</span><span class="n">sent</span> <span class="p">(</span>250 <span class="n">OK</span> <span class="n">id</span><span class="p">=</span><span class="n">id5</span><span class="o">-</span><span class="n">id6</span><span class="o">-</span><span class="n">id7</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">date</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span> <span class="n">debian</span> <span class="n">postfix</span><span class="o">/</span><span class="n">qmgr</span><span class="p">[</span><span class="n">id</span><span class="p">]:</span> <span class="n">id2</span><span class="p">:</span> <span class="n">removed</span>
</pre></div>
<p>Reading local mail.</p>
<div class="codehilite"><pre><span class="c">## Either with cli tool mail.</span>
<span class="n">mail</span>

<span class="c">## Or using gui tool Icedove (Debian version of Mozilla Thunderbird)</span>
<span class="c">## using movemail.</span>
</pre></div>
<p>If all went well, there will be no local mail. Only error messages result in local mails.</p>
<h1 id="bugs">Bugs</h1>
<ul>
<li>In Whonix 0.4.5, due to a <a class="" href="https://trac.torproject.org/projects/tor/ticket/7668" rel="nofollow">Tor Browser upstream bug</a> (they forgot to update the changelog) and because the keyserver is/was down, the torbrowser and whonixcheck script in Whonix can no longer find out which Tor Browser version is locally installed. (<a class="" href="https://sourceforge.net/p/whonix/discussion/general/thread/6122990d/">Whonix Bug Report</a>) The <a class="" href="https://sourceforge.net/p/whonix/wiki/TorBrowser/#update-tor-browser">Update Tor Browser</a> chapter contains a workaround and a fix is available for testers.</li>
</ul></div>

  <div id="create_wiki_page_holder" title="Create New Page" style="display:none">
    <form>
        <label class="grid-2">Name</label>
        <div class="grid-7"><input type="text" name="name"/></div>
    </form>
  </div>

          </div>
			
          
  <hr class="grid-19" style="margin-top: 1em; margin-bottom: 2em; clear:both;">
  
  
    <h4>Related</h4>
    <p>
    
      <a href="/p/whonix/wiki/Stream%20Isolation/">Wiki: Stream Isolation</a><br>
    
      <a href="/p/whonix/wiki/Mixmaster/">Wiki: Mixmaster</a><br>
    
      <a href="/p/whonix/wiki/Chat/">Wiki: Chat</a><br>
    
    </p>
  
  

        </div>
      </div>
    </section>
      
<footer id="site-footer">
    <div class="wrapper">
        <nav>
            <h5>SourceForge</h5>
            <a href="/about">About</a>
            <a href="/blog/category/sitestatus/">Site Status</a>
            <a href="http://twitter.com/sfnet_ops">@sfnet_ops</a>
        </nav>
        <nav>
            <h5>Find and Develop Software</h5>
            <a href="/create/">Create a Project</a>
            <a href="/directory/">Software Directory</a>
            <a href="/top">Top Downloaded Projects</a>
        </nav>
        <nav>
            <h5>Community</h5>
            <a href="/blog/">Blog</a>
            <a href="http://twitter.com/sourceforge">@sourceforge</a>
            <a href="/jobs?source=footer">Job Board</a>
        </nav>
        <nav>
            <h5>Help</h5>
            <a href="/apps/trac/sourceforge/wiki/WikiStart">Site Documentation</a>
            <a href="/support">Support Request</a>
            <a href="https://sourceforge.net/p/forge/documentation/Support%20via%20IRC/">Real-Time Support</a>
        </nav>
    </div>
</footer>
<footer id="site-copyright-footer">
    <div class="wrapper">
        <div id="copyright">
            Copyright &copy; 2013 SourceForge. All Rights Reserved.<br />
            SourceForge is a <a href="http://www.diceholdingsinc.com/phoenix.zhtml?c=211152&amp;p=irol-landing">Dice Holdings, Inc.</a> company.
        </div>
        <nav>
            <a href="http://geeknetmedia.com/terms-of-use">Terms</a>
            <a href="http://geeknetmedia.com/privacy-statement/">Privacy</a>
            <a href="http://geeknetmedia.com/opt-out-choices">Cookies/Opt Out</a>
            <a href="http://geeknetmedia.com">Advertise</a>
            <a href="http://sourceforge.jp/">SourceForge.JP</a>
        </nav>
    </div>
</footer>
    <div id="messages">
        
    </div>
    
      <!-- ew:body_js -->

    
      <script type="text/javascript" src="http://a.fsdn.com/allura/nf/1358968642/_ew_/_slim/js?href=allura%2Fjs%2Fjquery-base.js%3Ballura%2Fjs%2Fjquery.notify.js%3Ballura%2Fjs%2Fsylvester.js%3Ballura%2Fjs%2Fpb.transformie.min.js%3Ballura%2Fjs%2Fallura-base.js%3Bjs%2Fjquery.lightbox_me.js%3Bjs%2Fjquery.autosize-min.js%3Bjs%2Fjquery.textarea.js%3Bjs%2Fsf_markitup.js%3Bjs%2Fjquery.tag.editor.js"></script>
    
      
<!-- /ew:body_js -->

    
    
      <!-- ew:body_js_tail -->

    
      <script type="text/javascript">$(function () {
            var $lightbox = $('#lightbox_create_wiki_page');
            var $trigger = $('#sidebar a.add_wiki_page');
            $trigger.bind('click', function(e) {
                $lightbox.lightbox_me();
                return false;
            });
            $($lightbox).delegate('.close', 'click', function(e) {
                $lightbox.trigger('close');
                return false;
            });
        });
$(function () {
            $('#lightbox_create_wiki_page form').submit(function(){
                location.href = $('#sidebar a.add_wiki_page').attr('href') +
                    encodeURIComponent($('input[name=name]', $(this)).val().replace('/', '-')) + '/edit';
                return false;
            });
        });
$(function () {
            $('textarea.auto_resize').focus(function(){$(this).autosize();});
        });
$(document).ready(function () {
            $("a.attachment_form_add_button").click(function(evt){
                $(this).hide();
                $(".attachment_form_fields", this.parentNode).show();
                evt.preventDefault();
            });
            $("a.cancel_edit_post").click(function(evt){
                $("textarea", this.parentNode).val($("input.original_value", this.parentNode).val());
                $(".attachment_form_fields input", this.parentNode).val('');
                evt.preventDefault();
            });
         });

        (function () {
            $('div.discussion-post').each(function () {
                var post = this;
                $('.submit', post).button();
                $('.flag_post, .delete_post', post).click(function (ele) {
                    this.parentNode.submit();
                    return false;
                });
                if($('a.edit_post', post)){
                    $('a.edit_post', post).click(function (ele) {
                        $('.display_post', post).hide();
                        $('.edit_post_form', post).show();
                        $('.edit_post_form textarea', post).focus();
                        return false;
                    });
                    $("a.cancel_edit_post", post).click(function(evt){
                        $('.display_post', post).show();
                        $('.edit_post_form', post).hide();
                    });
                }
                if($('.reply_post', post)){
                    $('.reply_post', post).click(function (ele) {
                        $('.reply_post_form', post).show();
                        $('.reply_post_form textarea', post).focus();
                        return false;
                    });
                    $('.reply_post', post).button();
                }
                if($('.add_attachment', post)){
                    $('.add_attachment', post).click(function (ele) {
                        $('.add_attachment_form', post).show();
                        return false;
                    });
                }
                if($('.promote_to_thread', post)){
                    $('.promote_to_thread', post).click(function (ele) {
                        $('.promote_to_thread_form', post).show();
                        return false;
                    });
                }
                if($('.shortlink', post)){
                    var popup = $('.shortlink_popup', post);
                    $('.shortlink', post).click(function(evt){
                        evt.preventDefault();
                        popup.lightbox_me({
                            onLoad: function() {
                                $('input', popup).select();
                            }
                        });
                    });
                    $('.close', popup).bind('click', function() {
                        popup.hide();
                    });
                }
            });
        }());
        
$(function () {
            $('select.results_per_page').change(function () {
                this.form.submit();});});
$(function () {
          $('input.label_edit').tagEditor({
            confirmRemoval: false,
            completeOnSeparator: true,
            completeOnBlur: true
          });
        });

        $(document).ready(function () {
            var thread_tag = $('a.thread_tag');
            var thread_spam = $('a.sidebar_thread_spam');
            var tag_thread_holder = $('#tag_thread_holder');
            var allow_moderate = $('#allow_moderate');
            var mod_thread_link = $('#mod_thread_link');
            var mod_thread_form = $('#mod_thread_form');
            if (mod_thread_link.length) {
                if (mod_thread_form.length) {
                    mod_thread_link.click(function (e) {
                        mod_thread_form.show();
                        return false;
                    });
                }
            }
            if (thread_tag.length) {
                if (tag_thread_holder.length) {
                    var submit_button = $('input[type="submit"]', tag_thread_holder);
                    var cancel_button = $('<a href="#" class="btn link">Cancel</a>').click(function(evt){
                        evt.preventDefault();
                        tag_thread_holder.hide();
                        thread_tag.removeClass('active');
                    });
                    submit_button.after(cancel_button);
                    thread_tag.click(function (e) {
                        tag_thread_holder.show();
                        thread_tag.addClass('active');
                        // focus the submit to scroll to the form, then focus the subject for them to start typing
                        submit_button.focus();
                        $('input[type="text"]', tag_thread_holder).focus();
                        return false;
                    });
                }
            }
            if (thread_spam.length) {
                if (allow_moderate.length) {
                    var cval = $.cookie('_session_id');
                    thread_spam[0].style.display='block';
                }
            }
        });
        </script>
    
      
<!-- /ew:body_js_tail -->

    
    
  <div id="lightbox_create_wiki_page" class="modal" style="display:none">
  <b data-icon="D" class="ico ico-close close"></b>
  
    <h1>Add a Wiki Page</h1>
    <form class="grid-10">
        <label class="grid-2">Name</label>
        <div class="grid-7"><input type="text" name="name"></div>
        <label class="grid-2">&nbsp;</label>
        <div class="grid-7"><input type="submit" value="Create page"></div>
    </form>
  
</div>
<script type="text/javascript">
  /*<![CDATA[*/
  $('.post-link')
    .click(function(evt) {
        var cval = $.cookie('_session_id');
        evt.preventDefault();
        $.post(this.href, {_session_id:cval}, function(val)
            { window.location = val.location; },
            'json');
      });
  /*]]>*/
</script>
  

    
      
    
    
   
    
  </body>
</html>