<!DOCTYPE html>
<!-- Server: sfn-web-2 -->


  










<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]>--> <html lang="en" class="no-js"> <!--<![endif]-->
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
    <title>Whonix / Documentation / PhysicalIsolation</title>
    

<script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/modernizr.custom.90514.js"></script>

<script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/jquery-1.8.0.min.js"></script>

<script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/header.js"></script>
<!--[if lt IE 7 ]>
  <script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
<![endif]-->
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular' rel='stylesheet' type='text/css'>
<style type="text/css">
    @font-face {
        font-family: "Pictos";
        src: url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.eot');
        src: local("â˜º"), url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.woff') format('woff'), url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.ttf') format('truetype'), url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.svg') format('svg');
    }
</style>
    <script type="text/javascript">
            /*jslint onevar: false, nomen: false, evil: true, css: true, plusplus: false, white: false, forin: true, on: true, immed: false */
            /*global confirm, alert, unescape, window, jQuery, $, net, COMSCORE */
    </script>
    
      <!-- ew:head_css -->

    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/allura/css/forge/hilite.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/tool/wiki/css/wiki.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/forge.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/_slim/css?href=css%2Fmarkitup_sf.css%3Bcss%2Fpage_list.css"
                >
    
      <style>
            input.label_edit{ float: left; }
            .tagEditor{
                margin: 4px 0;
                padding: 0;
                float: left;
            }

            .tagEditor li, .removable{
                display: inline;
                background-image: url('http://a.fsdn.com/allura/nf/1358968642/_static_/images/minus_small.png');
                background-color: #eef;
                background-position: right center;
                background-repeat: no-repeat;
                list-style-type: none;
                padding: 0 18px 0 6px;
                margin: 0 4px;
                cursor: pointer;
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
            }

            .tagEditor li:hover{
                background-color: #ebebeb;
            }</style>
    
      
<!-- /ew:head_css -->

    
    
    
      <!-- ew:head_js -->

    
      
<!-- /ew:head_js -->

    
    

    
      <style type="text/css">
        #page-body.project---init-- #top_nav { display: none; }
#page-body.project---init-- #nav_menu_holder { display: none; margin-bottom: 0; }
#page-body.project---init-- #content_base {margin-top: 0; }
      </style>
    
    
<style>
  .hidden { display: none }
  a.notfound { color: #f00; }
</style>

      <style>.XgaTRPlbFtCvJSIIRnIsw { display:none }</style>

    
<link rel="alternate" type="application/rss+xml" title="Page RSS" href="feed.rss"/>
<link rel="alternate" type="application/atom+xml" title="Page Atom" href="feed.atom"/>
<link rel="alternate" type="application/rss+xml" title="Wiki RSS" href="../feed.rss"/>
<link rel="alternate" type="application/atom+xml" title="Wiki Atom" href="../feed.atom"/>

    
    


<script type="text/javascript">
    var _gaq = _gaq || [];

    function _add_tracking(prefix, tracking_id, send_user) {
        _gaq.push([prefix+'._setAccount', tracking_id]);
        _gaq.push([prefix+'._setCustomVar', 1, 'Page Type', 'wiki', 3]);_gaq.push([prefix+'._trackPageview']);
    }
      _add_tracking('sfnt1', 'UA-32013-6', true);
      _add_tracking('sfnt2', 'UA-36130941-1', true);
    

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' === document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </head>

  <body class="wiki-PhysicalIsolation" id="forge">
    
      <!-- ew:body_top_js -->

    
      
<!-- /ew:body_top_js -->

    
    
<header id="site-header">
    <div class="wrapper">
        <a href="/" class="logo">
            <span>SourceForge</span>
        </a>
        
        <form method="get" action="/directory/">
            <input type="text" id="words" name="q" placeholder="Search">
        </form>
        
        <!--Switch to {language}-->
        <nav id="nav-site">
            <a href="/directory/" title="Browse our software.">Browse</a>
            <a href="/blog/" title="Read the latest news from the SF HQ.">Blog</a>
            <a href="/support" title="Contact us for help and feedback.">Help</a>
        </nav>
        <nav id="nav-account">
            
              <div class="logged_out">
                <a href="/account/login.php">Log In</a>
                <span>or</span>
                <a href="https://sourceforge.net/user/registration/">Join</a>
              </div>
            
        </nav>
        
    </div>
</header>
<header id="site-sec-header">
    <div class="wrapper">
        <nav id="nav-hubs">
            <h4>Solution Centers</h4>
            <a href="http://ibmsmartercommerce.sourceforge.net/">Smarter Commerce</a>
            <a href="http://goparallel.sourceforge.net/">Go Parallel</a>
            <a href="http://html5center.sourceforge.net/">HTML5</a>
            <a href="http://ibmsmarteritservices.sourceforge.net/">Smarter IT</a>
        </nav>
        <nav id="nav-collateral">
            <a href="/jobs?source=header">Jobs</a>
            <a href="http://library.geeknetmedia.com">Resources</a>
            
            <a href="">Newsletters</a>
            
        </nav>
    </div>
</header>
    
    <section id="page-body" class=" neighborhood-Projects project-whonix mountpoint-wiki">
	  <div class="grid-24" id="nav_menu_holder">
            
            


  
  <a href="/p/whonix/">
    
      <img src="/p/whonix//icon?2012-10-18 23:06:52+00:00" class="project_icon" alt="Project Logo">
    
	<h1 class="project_title">
      
        Whonix
      
	</h1>
	</a>

            
      </div>
      <div id="top_nav" class="">
        
        
  
    <a href="/p/whonix/homelink/" class="ui-icon-tool-link">
      Homepage
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/wiki/" class="ui-icon-tool-wiki">
      Documentation
      
        
          <span class="diamond"></span>
        
      
      
      
    </a>
	
    <a href="/p/whonix/blog/" class="ui-icon-tool-blog">
      Important Blog
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/featureblog/" class="ui-icon-tool-blog">
      Feature Blog
      
        
      
      
      
    </a>
	
    <a href="/projects/whonix/files/" class="ui-icon-tool-files">
      _
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/discussion/" class="ui-icon-tool-discussion">
      User Help Forum
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/mailman/" class="ui-icon-tool-mailman">
      Developer Mailing List
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/code/" class="ui-icon-tool-git">
      Source Code
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/donate/" class="ui-icon-tool-link">
      Donate
      
        
      
      
      
    </a>
	
	<div style="clear:both"></div>

        
      </div>
      <div id="content_base">
			  
          
        
			  
          
        
        <div class="grid-24 pad">
          <h2 class="dark title">PhysicalIsolation
            <!-- actions -->
            <small>
            
  
    
    <a href="history" title="History"><b data-icon="N" class="ico ico-history" title="History"></b></a>
  
  
	<a href="feed" title="RSS"><b data-icon="f" class="ico ico-feed" title="Feed"></b></a>
  <a href="../search" title="Search"><b data-icon="s" class="ico ico-search" title="Search"></b></a>

            </small>
            <!-- /actions -->
          </h2>
		
  

          <div>
            
            
  
<div class="markdown_content"><div>
<div class="markdown_content"><p><a class="" href="https://sourceforge.net/p/whonix/wiki/Home/#whonix-homepage">Whonix Homepage</a> | <img alt="" src="http://whonix.sourceforge.net/screenshots/BC_Rnd_32px.png" /> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/#donate">Donate</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Download/#stay-tuned">News</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Screenshots/">Screenshots</a> | <a class="" href="http://whonix.sourceforge.net/videos.html">Videos</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Download/">Download</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Documentation/">Documentation</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/About/">About</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Features/">Features</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Security%20Guide/">Security Guide</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/FAQ/">FAQ</a> | <a class="" href="https://sourceforge.net/p/whonix/discussion/">Forum</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contact/">Contact</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Bridges/">Bridges Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Features/#vpn-tunnel-support">VPN/Tunnel Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Hidden%20Services/">Hidden Service Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/OtherOperatingSystems/">Windows Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/BrowserPlugins/">Flash Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/">You Can Help</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/">Contribiute</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Design/">Tech. Design</a> | <a class="" href="https://trac.torproject.org/projects/tor/wiki/doc/TorBOX/Dev" rel="nofollow">Development</a> | <a class="" href="https://github.com/adrelanos/Whonix" rel="nofollow">Source Code</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/BuildDocumentation/">Build Documentation</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Changelog/">Changelog</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Authorship/">Authorship</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Authorship/#disclaimer">Disclaimer</a></p></div>
</div>
<p><strong>WARNING</strong>: Please don't forget reading the Warnings chapter.</p>
<div class="toc">
<ul>
<li><a href="#introduction">Introduction</a><ul>
<li><a href="#technical-introduction">Technical Introduction</a></li>
<li><a href="#warnings">Warnings</a></li>
<li><a href="#using-spare-hardware-virtual-machine">Using spare hardware + Virtual Machine</a></li>
<li><a href="#using-spare-hardware-without-virtual-machine">Using spare hardware without Virtual Machine</a></li>
<li><a href="#hardware">Hardware</a><ul>
<li><a href="#general">General</a></li>
<li><a href="#non-anonymous-use">non-anonymous use</a></li>
<li><a href="#anonymous-use">anonymous use</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#installation">Installation</a><ul>
<li><a href="#general_1">General</a></li>
<li><a href="#how-to-install-whonix-gateway-on-hardware-recommended">How To Install Whonix-Gateway on hardware (RECOMMENDED)</a></li>
<li><a href="#how-to-install-whonix-gateway-in-a-vm-untested-not-recommend">How To Install Whonix-Gateway in a VM (UNTESTED / NOT RECOMMEND)</a></li>
<li><a href="#install-whonix-workstation-in-a-vm-recommend">Install Whonix-Workstation in a VM (RECOMMEND)</a><ul>
<li><a href="#first-steps">First Steps</a></li>
<li><a href="#host-network-adapter">Host Network Adapter</a></li>
<li><a href="#nat-vs-bridging">NAT vs Bridging</a><ul>
<li><a href="#two-choices">Two Choices</a></li>
<li><a href="#nat-recommend">NAT (RECOMMEND)</a></li>
<li><a href="#bridged-network-untested-not-recommend">Bridged Network (UNTESTED / NOT RECOMMEND)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#install-whonix-workstation-on-hardware-untested-not-recommend">Install Whonix-Workstation on hardware (UNTESTED / NOT RECOMMEND)</a></li>
</ul>
</li>
<li><a href="#further-required-reading">Further required reading</a></li>
</ul>
</div>
<h1 id="introduction">Introduction</h1>
<h2 id="technical-introduction">Technical Introduction</h2>
<p>When setting up Whonix in the form of two Virtual Machines running on the same physical host, exploits targeting the VM implementation or the host can still break out of the torified Client VM and expose the IP of a user. Malware running on the host has full control over all VMs. To protect such attacks we need a different approach: In this context we called it Physical Isolation, because the gateway system is installed on separate hardware. This drastically reduces the <a class="" href="https://en.wikipedia.org/wiki/Trusted_computing_base" rel="nofollow">TCB</a> by more than the half.</p>
<p>In total we'll be installing and configuring two computers and set up an isolated point to point network between them (you could also set up a an ordinary, completely isolated, LAN behind the Whonix-Gateway). One computer acts as the client or "Whonix-Workstation", the other as a proxy or "Whonix-Gateway" which will transparently route all of the Whonix-Workstation's traffic through Tor.</p>
<p>The Whonix-Gateway on its own physical device can either run directly on hardware or inside a virtual machine. Both options have advantages and disadvantages. We recommend to use no additional Virtual Machine for the Whonix-Gateway.</p>
<p>The Whonix-Workstation should always be installed in a Virtual Machine: A VM hides hardware serial numbers. See also <a class="" href="https://sourceforge.net/p/whonix/wiki/Security%20Guide/#recommendation-to-use-multiple-vm-snapshots">Recommendation to use multiple VM Snapshots</a>.</p>
<p>The host operating system(s) should only be used for downloading operating system updating, hosting Whonix-Gateway or Whonix-Workstation and nothing else.</p>
<p>Bonus points if the physical systems are exclusively used for hosting Whonix, or if storage devices are separated for Whonix and non-Whonix use cases, to avoid a Whonix hard drive getting infected by a another operating system.</p>
<h2 id="warnings">Warnings</h2>
<p><strong>WARNING</strong>: Instructions for Whonix 0.4.5.1 with Physical Isolation are still under development. Advanced Linux users can already understand them. As recently <a class="" href="http://sourceforge.net/p/whonix/discussion/general/thread/24115e26/">reported</a> in the user help forum, they are working.</p>
<p><strong>WARNING</strong>: <a class="" href="https://sourceforge.net/p/whonix/wiki/Build%20Anonymity/">Build Anonymity</a> has not been considered for this article.</p>
<p><strong>WARNING</strong>: This article currently lacks information about Whonix-Gateway's and Whonix-Workstation's MAC address. See also</p>
<ul>
<li><a class="" href="https://sourceforge.net/p/whonix/wiki/Whonix%27s%20Protocol-Leak-Protection%20and%20Fingerprinting-Protection/">Whonix's Protocol-Leak-Protection and Fingerprinting-Protection</a></li>
<li><a class="" href="https://sourceforge.net/p/whonix/wiki/Pre%20Install%20Advice/#mac-address">Whonix in public networks / MAC Address</a></li>
<li><a class="alink" href="/p/whonix/wiki/Dev/">[Dev]</a> Mac address in public networks.</li>
</ul>
<h2 id="using-spare-hardware-virtual-machine">Using spare hardware + Virtual Machine</h2>
<p>Advantages:</p>
<ul>
<li>You can install a graphical host.</li>
<li>Use the Whonix download version.</li>
<li>You can use the graphical network manager on the host, for example to connect to WiFi.</li>
<li>You can setup easily a VPN on the host. Tor will be tunneled through the VPN.</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>Higher attack surface, because the Virtual Machine code get's involved.</li>
</ul>
<h2 id="using-spare-hardware-without-virtual-machine">Using spare hardware without Virtual Machine</h2>
<p>Advantages:</p>
<ul>
<li>More secure, because less code is involved.</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>Slightly more complicated setup</li>
<li>More difficult to set up VPN</li>
<li>More difficult to set up 3G networking compared to using a Windows host</li>
</ul>
<h2 id="hardware">Hardware</h2>
<h3 id="general">General</h3>
<p>We recommend that you use two dedicated computers for Whonix that are never used for activities that could lead back to your identity. Alternatively you can use an already existing and otherwise used computer for the Whonix-Gateway. To offer some isolation you should disconnect all internal and external drives and boot from a eSATA, USB or another internal drive into a clean environment.</p>
<h3 id="non-anonymous-use">non-anonymous use</h3>
<ul>
<li>non-anonymous box (leave it as is is, like you want)</li>
<li>non-anonymous home dial up internet router (leave it as is is, like you want)</li>
</ul>
<h3 id="anonymous-use">anonymous use</h3>
<ul>
<li>Whonix-Gateway<ul>
<li>This really does not have to be a big desktop computer or ordinary server. There are alternatives.</li>
<li>smartphone ^1^, <a class="" href="https://en.wikipedia.org/wiki/Ultra-mobile_PC" rel="nofollow">UMPC</a>, pad, tablet, notebook, netbook, <a class="" href="https://en.wikipedia.org/wiki/Raspberry_Pi" rel="nofollow">Raspberry Pi</a>, router ^2^, set top box, etc.</li>
<li>how to utilize such a device as a linux server is beyond the scope of this guide, there are already better resources</li>
</ul>
</li>
<li>anonymous 3G modem (see below) or anonymous wifi adapter (see below)</li>
<li>Whonix-Workstation<ul>
<li>You get the idea. Use a device which suits you.^1^</li>
</ul>
</li>
</ul>
<p><font size="-3"><br />
,,<br />
^1^ Just some hints to get started. It is difficult and beyond the scope of Whonix, because you don't have an Ethernet interface. Some (after market) firmwares support USB-host. (You can plug USB devices into your phone, such as an USB ethernet card. For example some rooted android smartphones can <a class="" href="http://android.galoula.com/en/LinuxInstall/" rel="nofollow">install</a> Debian Linux.<br />
^2^ something like OpenWRT<br />
</font></p>
<h1 id="prerequisites">Prerequisites</h1>
<ul>
<li>Whonix-Gateway: A device with at least two network adapters, at least one of them ethernet^1^, capable of running Linux. It will run Debian.^2^</li>
<li>Whonix-Workstation: A device connected via ethernet to the Whonix-Gateway. It must only have this one NIC and no other network connectivity! Must be connected by wire.^3^ This will be the torified client system or Whonix-Workstation. It must be capable of running Debian.^4^ </li>
<li>We recommend to use a VM as the client, the same Whonix-Workstation, that most non Physical Isolation users use. ^7^</li>
<li>Whonix-Gateway is already read and started, host build environment has a working internet connection to Debian mirrors.</li>
</ul>
<p><font size="-3"><br />
,,<br />
^1^ The other one may be either an <a class="" href="https://sourceforge.net/p/whonix/wiki/Security%20Guide/#anonymous-3g-modem">Anonymous 3G modem</a>; <a class="" href="https://sourceforge.net/p/whonix/wiki/Security%20Guide/#anonymous-wifi-adapter">Anonymous WiFi adapter</a>, another ethernet or wifi connected to your modem/router.<br />
^2^ Theoretically you could use any OS that supports iptables or pf. If you don't want to use Debian you will have to edit the source code. This will be easy for Debian derivatives but much more difficult for *BSD for example. In any case, the choice of OS shouldn't really matter because this system isn't used for anything but running Tor. A cheap plug computer, something like Raspberry Pi or the hardware used by Torouter would be sufficient.<br />
^3^ If you don't connect by wire, you significantly weaken isolation and security. One the Whonix-Workstation were infected, it could jump onto another network and start leaking. <br />
^4^ Any OS can be used. But this is not recommended! If you do anyway, read warning, especially for Windows: <a class="" href="https://trac.torproject.org/projects/tor/wiki/doc/TransparentProxyLeaks" rel="nofollow">Transparent Proxy Leaks</a>.<br />
^5^ A generic VM image can neither leak identifying hardware serial numbers nor unique software fingerprints. (e.g. trough <a class="" href="https://trac.torproject.org/projects/tor/wiki/doc/TorifyHOWTO#Softwareupdaters" rel="nofollow">software updates</a>).<br />
^6^ This ensures that you get the latest security features and most secure configurations. (Such as stream isolation that protects against Identity correlation through circuit sharing, XChat IRC hardening or Whonix's Protocol-Leak-Protection and Fingerprinting-Protection etc.)<br />
^7^ From the download page or build it yourself from source code.<br />
</font></p>
<h1 id="installation">Installation</h1>
<h2 id="general_1">General</h2>
<p>From <a class="alink" href="/p/whonix/wiki/BuildDocumentation/">[BuildDocumentation]</a> general advice about Build Security and Host preparation apply.</p>
<h2 id="how-to-install-whonix-gateway-on-hardware-recommended">How To Install Whonix-Gateway on hardware (RECOMMENDED)</h2>
<p>These instructions were never updated for Whonix 0.2.1. Version 0.4.5.1 is currently in development. ^1^</p>
<p><font size="-3"><br />
,,<br />
^1^ The Whonix source code should be much more easy to understand, because there are no longer two immensely huge scripts, but all configuration files within their own files.<br />
</font></p>
<p>(1). Install Debian Wheezy and chose following settings:</p>
<div class="codehilite"><pre><span class="n">In</span> <span class="n">the</span> <span class="n">boot</span> <span class="n">menu</span> <span class="n">press</span> <span class="n">F4</span> <span class="n">and</span> <span class="n">select</span> &quot;<span class="n">Install</span> <span class="n">a</span> <span class="n">minimal</span> <span class="n">system</span>&quot;
<span class="n">Language</span><span class="p">:</span> <span class="n">English</span>
<span class="n">Country</span><span class="p">:</span> <span class="n">United</span> <span class="n">States</span>
<span class="n">keyboard</span> <span class="n">layout</span><span class="p">:</span> <span class="n">English</span> <span class="p">(</span><span class="n">US</span><span class="p">)</span> <span class="p">(</span><span class="n">don</span><span class="o">'</span><span class="n">t</span> <span class="n">autodetect</span><span class="p">)</span>
<span class="n">Primary</span> <span class="n">network</span> <span class="n">interface</span><span class="p">:</span> <span class="n">eth0</span> <span class="p">(</span><span class="n">depends</span> <span class="n">on</span> <span class="n">hardware</span> <span class="n">layout</span>?<span class="p">)</span>
<span class="n">Hostname</span><span class="p">:</span> <span class="n">debian</span>
<span class="n">Full</span> <span class="n">name</span> <span class="k">for</span> <span class="n">the</span> <span class="n">new</span> <span class="n">user</span><span class="p">:</span> <span class="n">user</span>
<span class="n">Username</span> <span class="k">for</span> <span class="n">your</span> <span class="n">account</span><span class="p">:</span> <span class="n">user</span>
<span class="n">Choose</span> <span class="n">a</span> <span class="n">password</span> <span class="k">for</span> <span class="n">the</span> <span class="n">new</span> <span class="n">user</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Set</span> <span class="n">up</span> <span class="n">a</span> <span class="n">strong</span> <span class="n">password</span><span class="o">&gt;</span>
<span class="n">encrypt</span> <span class="n">home</span> <span class="n">directory</span><span class="p">:</span> <span class="n">No</span>
<span class="n">Timezone</span><span class="p">:</span> <span class="n">UTC</span>
<span class="n">Partitioning</span><span class="p">:</span> <span class="n">It</span><span class="o">'</span><span class="n">s</span> <span class="n">a</span> <span class="n">good</span> <span class="n">idea</span> <span class="n">to</span> <span class="n">set</span> <span class="n">up</span> <span class="n">cryptsetup</span> <span class="n">based</span> <span class="n">FDE</span> <span class="n">at</span> <span class="n">this</span> <span class="n">point</span><span class="p">.</span>
<span class="n">No</span> <span class="n">proxy</span>
<span class="n">No</span> <span class="n">automatic</span> <span class="n">updates</span> 
<span class="n">tasksel</span> <span class="p">(</span><span class="n">Choose</span> <span class="n">software</span> <span class="n">to</span> <span class="n">install</span><span class="p">):</span> <span class="n">select</span> <span class="n">nothing</span>
</pre></div>
<p>(2). The external interface (usually eth0) may need to be configured according to the requirements of your local network, e.g. static or simply left to use dhcp if the gateway is connected to a dhcp capable router. For wlan follow the upstream documentations: <a class="" href="http://wiki.debian.org/WiFi" rel="nofollow">debian wiki</a>, <a class="" href="https://help.ubuntu.com/community/WifiDocs/WiFiHowTo" rel="nofollow">Ubuntu help</a>.</p>
<p>(3). Make sure the internet is working.</p>
<p>(4). Install all security updates and reboot.</p>
<p>(5). Before running the whonix_createvm ^2^ script make sure eth1 and eth0 refer to the correct interfaces. <em>dmesg | grep eth</em> may be helpful. Otherwise you have to change the variables in the configuration files. To find the affected files <em>grep -r eth0*</em> and <em>grep -r eth1*</em> may be helpful. ^3^</p>
<p><font size="-3"><br />
,,<br />
^2^ Do not get concerned about the "vm" within whonix_createvm. The name is historically and the functionalty for building an Whonix-Gateway featuring Physical Isolation has been added later. <br />
^3^ Should be really only a very few files. We used variables for eth0 and eth1 wherever possible. <br />
</font></p>
<p>(5.1) Install git, you'll need it to obtain the source code. ^1^</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">git</span>
</pre></div>
<p><font size="-3"><br />
,,<br />
^1^ Alternatively could cold also git tag from github using the browser: <a href="https://github.com/adrelanos/Whonix/tags" rel="nofollow">https://github.com/adrelanos/Whonix/tags</a><br />
</font></p>
<p>(6). On your Whonix-Gateway: It is assumed you created user account named "user".</p>
<div class="codehilite"><pre><span class="n">su</span> <span class="n">user</span>
<span class="n">cd</span> <span class="o">~</span>
</pre></div>
<p>(7). Get latest source code. When 0.4.5.1 gets released there will be a signed release tag, if you wish a signed release tag of a snapshot in meanwhile please get in contact.</p>
<div class="codehilite"><pre><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">adrelanos</span><span class="o">/</span><span class="n">Whonix</span>
</pre></div>
<p>(7.1) Verify the git tag you want to use.</p>
<div class="codehilite"><pre><span class="n">git</span> <span class="n">tag</span> <span class="o">-</span><span class="n">v</span> 0<span class="p">.</span>4<span class="p">.</span>5<span class="p">.</span>1
</pre></div>
<p>(7.2) Switch to the git tag you want to use.</p>
<div class="codehilite"><pre><span class="n">git</span> <span class="n">checkout</span> 0<span class="p">.</span>4<span class="p">.</span>5<span class="p">.</span>1
</pre></div>
<p>(8). Get into Whonix source folder.</p>
<div class="codehilite"><pre><span class="n">cd</span> <span class="n">Whonix</span>
</pre></div>
<p>(8.1) Make sure you have all packages installed which are listed in the file <em>Whonix-Gateway_packages</em>.</p>
<div class="codehilite"><pre><span class="c"># Currently only manually.</span>
</pre></div>
<p>(9). Most configuration files work well inside Virtual Machines and on hardware. Only minor things such as deactivating powersaving, passwordless reboot, shutdown etc. are only recommend for Virtual Machines. You can easily comment them out by putting a hash # in front of them. They are marked, to find them, grep can be used.</p>
<div class="codehilite"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">r</span> <span class="n">VMONLY</span><span class="o">*</span>
</pre></div>
<p>(10). Copy the pre files on Whonix-Gateway from the Whonix source folder to their correct place.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="o">./</span><span class="n">whonix_createvm</span> <span class="o">-</span><span class="n">tg</span><span class="o">-</span><span class="n">bare</span><span class="o">-</span><span class="n">metal</span><span class="o">-</span><span class="n">pre</span>
</pre></div>
<p>(12). Start whonix_internal_install_script.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">whonix</span><span class="o">/</span><span class="n">whonix_internal_install_script</span> <span class="o">-</span><span class="n">install</span>
</pre></div>
<p>(13). Copy the post files on Whonix-Gateway from the Whonix source folder to their correct place.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="o">./</span><span class="n">whonix_createvm</span> <span class="o">-</span><span class="n">tg</span><span class="o">-</span><span class="n">bare</span><span class="o">-</span><span class="n">metal</span><span class="o">-</span><span class="n">post</span>
</pre></div>
<p>(14). Reboot.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">reboot</span>
</pre></div>
<p>(15). Done.</p>
<h2 id="how-to-install-whonix-gateway-in-a-vm-untested-not-recommend">How To Install Whonix-Gateway in a VM (UNTESTED / NOT RECOMMEND)</h2>
<p>It is advised to install a new OS just for hosting the Gateway VM, any OS that can run VirtualBox works but we recommend an Open Source system.</p>
<p>Download the Whonix-Gateway image. <font size="-3">(Or build it from source code.)</font></p>
<p>Adapter 1 can be set up as a NAT network. Adapter 2 must either be set to NAT as well (but you will need to forward ports from the host to the guest) or much simpler: use bridged networking and set it to the second physical interface (the one that goes into the isolated network/point to point ethernet). See "NAT vs Bridging" below.</p>
<p>This configuration is entirely untested and not recommended unless you need to run Tor through a VPN (can't that be done without VMs?) or an unsupported 3G modem and can't afford a 3rd physical device.</p>
<p>When using NAT for a virtualized Gateway you need to set up port forwarding in VirtualBox. Using bridged network may be easier, but then the router may see the Whonix-Gateway MAC address which identifies as Whonix-Gateway. (Should not be of concern in home networks. Should be of concern in untrusted networks or when using a modem to connect.)</p>
<h2 id="install-whonix-workstation-in-a-vm-recommend">Install Whonix-Workstation in a VM (RECOMMEND)</h2>
<h3 id="first-steps">First Steps</h3>
<p>Install and update a host operating system. On the host can run any OS that is capable of running VirtualBox, but be aware of <a class="" href="https://trac.torproject.org/projects/tor/wiki/doc/TransparentProxyLeaks" rel="nofollow">Transparent Proxy Leaks</a>. It is recommended against to use Windows or another other commercial proprietary system as host operating system.</p>
<p>Download the Whonix-Workstation image. <font size="-3">(Or build it from source code.)</font></p>
<p>Note sure what we wanted to say with this sentence:<br />
If the physical network (between Whonix-Gateway and a router) uses 192.168.0.* you need to review and edit all shell scripts and switch the internal network to something else!</p>
<h3 id="host-network-adapter">Host Network Adapter</h3>
<p>The host has to be configured to use the static IP configuration.</p>
<div class="codehilite"><pre><span class="c">## Whonix-Workstation</span>
<span class="c">## /etc/network/interfaces for the host,</span>
<span class="c">## when using Physical Isolation,</span>
<span class="c">## with Whonix-Workstation in a VM.</span>

<span class="n">auto</span> <span class="n">lo</span>
<span class="n">iface</span> <span class="n">lo</span> <span class="n">inet</span> <span class="n">loopback</span>

<span class="n">auto</span> <span class="n">eth0</span>
<span class="n">iface</span> <span class="n">eth0</span> <span class="n">inet</span> <span class="k">static</span>
   <span class="c">## Increment last octet of address</span>
   <span class="c">## on optional additional hosts.</span>
   <span class="n">address</span> 192<span class="p">.</span>168<span class="p">.</span>0<span class="p">.</span>11
   <span class="n">netmask</span> 255<span class="p">.</span>255<span class="p">.</span>255<span class="p">.</span>0
   <span class="n">gateway</span> 192<span class="p">.</span>168<span class="p">.</span>0<span class="p">.</span>10
   <span class="c">#pre-up /usr/local/bin/whonix_firewall</span>

   <span class="c">## Out commented.</span>
   <span class="c">## For what do we require the network and broadcast</span>
   <span class="c">## instances anyway?</span>
   <span class="c">#network 192.168.0.0</span>
   <span class="c">#broadcast 192.168.0.255</span>

<span class="c">#auto eth0</span>
<span class="c">#iface eth0 inet dhcp</span>

<span class="c">## end of /etc/network/interfaces</span>
</pre></div>
<p>If the physical network (between Whonix-Gateway and a router) uses 192.168.0.<em> you need to review and edit all </em>/etc/network/interfaces*.</p>
<h3 id="nat-vs-bridging">NAT vs Bridging</h3>
<h4 id="two-choices">Two Choices</h4>
<p>In the default Whonix Virtual Box image, the network adapter setting for Adapter 1 (eth0) is set to internal network and will therefore not work out of the box. There are two choices to fix this. NAT (recommend) or bridged network.</p>
<h4 id="nat-recommend">NAT (RECOMMEND)</h4>
<p>If you use NAT you will have to edit the <em>/etc/network/interfaces/</em> in Whonix-Workstation to use DHCP (easier, shown in the example below) <font size="-3">or a static IP for Virtual Box NAT</font>.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">nano</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">network</span><span class="o">/</span><span class="n">interfaces</span><span class="o">/</span>
</pre></div>
<p>Replace it with.</p>
<div class="codehilite"><pre><span class="c">## Whonix-Workstation</span>
<span class="c">## /etc/network/interfaces in a VM</span>
<span class="c">## when using Physical Isolation.</span>

<span class="n">auto</span> <span class="n">lo</span>
<span class="n">iface</span> <span class="n">lo</span> <span class="n">inet</span> <span class="n">loopback</span>

<span class="n">auto</span> <span class="n">eth0</span>
<span class="n">iface</span> <span class="n">eth0</span> <span class="n">inet</span> <span class="n">dhcp</span>

<span class="c">## end of /etc/network/interfaces</span>
</pre></div>
<h4 id="bridged-network-untested-not-recommend">Bridged Network (UNTESTED / NOT RECOMMEND)</h4>
<p>If you use bridged networking things will (or should, we haven't tested anything yet) just work.</p>
<p>Since in the bridged network case, Whonix-Workstation can see the MAC address of whatever network adapter it is connected to, you should change the MAC address of the Workstation host and of the Whonix-Gateway.</p>
<p>See <a class="" href="https://sourceforge.net/p/whonix/wiki/Pre%20Install%20Advice/#mac-address">Whonix in public networks / MAC Address</a>.</p>
<h2 id="install-whonix-workstation-on-hardware-untested-not-recommend">Install Whonix-Workstation on hardware (UNTESTED / NOT RECOMMEND)</h2>
<p>Install Whonix-Workstation on hardware without using a VM is recommend against, because hardware serials would be visible to Whonix-Workstation.</p>
<p>This is untested and currently undocumented. Please get in contact if you are interested. The instructions would most likely be very similar to those in "How To Install Whonix-Gateway on hardware".</p>
<h1 id="further-required-reading">Further required reading</h1>
<p><a class="alink" href="/p/whonix/wiki/Documentation/">[Documentation]</a>. The host security chapter applies to both computers!</p></div>

  <div id="create_wiki_page_holder" title="Create New Page" style="display:none">
    <form>
        <label class="grid-2">Name</label>
        <div class="grid-7"><input type="text" name="name"/></div>
    </form>
  </div>

          </div>
			
          
  <hr class="grid-19" style="margin-top: 1em; margin-bottom: 2em; clear:both;">
  
  
    <h4>Related</h4>
    <p>
    
      <a href="/p/whonix/wiki/BuildDocumentation/">Wiki: BuildDocumentation</a><br>
    
      <a href="/p/whonix/wiki/Documentation/">Wiki: Documentation</a><br>
    
      <a href="/p/whonix/wiki/Dev/">Wiki: Dev</a><br>
    
      <a href="/p/whonix/wiki/OptionalConfigurations/">Wiki: OptionalConfigurations</a><br>
    
      <a href="/p/whonix/wiki/Threat%20Model/">Wiki: Threat Model</a><br>
    
      <a href="/p/whonix/wiki/Comparison%20of%20different%20Whonix%20variants/">Wiki: Comparison of different Whonix variants</a><br>
    
      <a href="/p/whonix/wiki/Pre%20Install%20Advice/">Wiki: Pre Install Advice</a><br>
    
      <a href="/p/whonix/wiki/FAQ/">Wiki: FAQ</a><br>
    
      <a href="/p/whonix/wiki/Advanced%20Security%20Guide/">Wiki: Advanced Security Guide</a><br>
    
      <a href="/p/whonix/wiki/Warning/">Wiki: Warning</a><br>
    
      <a href="/p/whonix/wiki/Security%20Guide/">Wiki: Security Guide</a><br>
    
      <a href="/p/whonix/wiki/Technical%20Introduction/">Wiki: Technical Introduction</a><br>
    
      <a href="/p/whonix/wiki/Whonix%20Manual%20Installation/">Wiki: Whonix Manual Installation</a><br>
    
    </p>
  
  

        </div>
      </div>
    </section>
      
<footer id="site-footer">
    <div class="wrapper">
        <nav>
            <h5>SourceForge</h5>
            <a href="/about">About</a>
            <a href="/blog/category/sitestatus/">Site Status</a>
            <a href="http://twitter.com/sfnet_ops">@sfnet_ops</a>
        </nav>
        <nav>
            <h5>Find and Develop Software</h5>
            <a href="/create/">Create a Project</a>
            <a href="/directory/">Software Directory</a>
            <a href="/top">Top Downloaded Projects</a>
        </nav>
        <nav>
            <h5>Community</h5>
            <a href="/blog/">Blog</a>
            <a href="http://twitter.com/sourceforge">@sourceforge</a>
            <a href="/jobs?source=footer">Job Board</a>
        </nav>
        <nav>
            <h5>Help</h5>
            <a href="/apps/trac/sourceforge/wiki/WikiStart">Site Documentation</a>
            <a href="/support">Support Request</a>
            <a href="https://sourceforge.net/p/forge/documentation/Support%20via%20IRC/">Real-Time Support</a>
        </nav>
    </div>
</footer>
<footer id="site-copyright-footer">
    <div class="wrapper">
        <div id="copyright">
            Copyright &copy; 2013 SourceForge. All Rights Reserved.<br />
            SourceForge is a <a href="http://www.diceholdingsinc.com/phoenix.zhtml?c=211152&amp;p=irol-landing">Dice Holdings, Inc.</a> company.
        </div>
        <nav>
            <a href="http://geeknetmedia.com/terms-of-use">Terms</a>
            <a href="http://geeknetmedia.com/privacy-statement/">Privacy</a>
            <a href="http://geeknetmedia.com/opt-out-choices">Cookies/Opt Out</a>
            <a href="http://geeknetmedia.com">Advertise</a>
            <a href="http://sourceforge.jp/">SourceForge.JP</a>
        </nav>
    </div>
</footer>
    <div id="messages">
        
    </div>
    
      <!-- ew:body_js -->

    
      <script type="text/javascript" src="http://a.fsdn.com/allura/nf/1358968642/_ew_/_slim/js?href=allura%2Fjs%2Fjquery-base.js%3Ballura%2Fjs%2Fjquery.notify.js%3Ballura%2Fjs%2Fsylvester.js%3Ballura%2Fjs%2Fpb.transformie.min.js%3Ballura%2Fjs%2Fallura-base.js%3Bjs%2Fjquery.lightbox_me.js%3Bjs%2Fjquery.autosize-min.js%3Bjs%2Fjquery.textarea.js%3Bjs%2Fsf_markitup.js%3Bjs%2Fjquery.tag.editor.js"></script>
    
      
<!-- /ew:body_js -->

    
    
      <!-- ew:body_js_tail -->

    
      <script type="text/javascript">$(function () {
            var $lightbox = $('#lightbox_create_wiki_page');
            var $trigger = $('#sidebar a.add_wiki_page');
            $trigger.bind('click', function(e) {
                $lightbox.lightbox_me();
                return false;
            });
            $($lightbox).delegate('.close', 'click', function(e) {
                $lightbox.trigger('close');
                return false;
            });
        });
$(function () {
            $('#lightbox_create_wiki_page form').submit(function(){
                location.href = $('#sidebar a.add_wiki_page').attr('href') +
                    encodeURIComponent($('input[name=name]', $(this)).val().replace('/', '-')) + '/edit';
                return false;
            });
        });
$(function () {
            $('textarea.auto_resize').focus(function(){$(this).autosize();});
        });
$(document).ready(function () {
            $("a.attachment_form_add_button").click(function(evt){
                $(this).hide();
                $(".attachment_form_fields", this.parentNode).show();
                evt.preventDefault();
            });
            $("a.cancel_edit_post").click(function(evt){
                $("textarea", this.parentNode).val($("input.original_value", this.parentNode).val());
                $(".attachment_form_fields input", this.parentNode).val('');
                evt.preventDefault();
            });
         });

        (function () {
            $('div.discussion-post').each(function () {
                var post = this;
                $('.submit', post).button();
                $('.flag_post, .delete_post', post).click(function (ele) {
                    this.parentNode.submit();
                    return false;
                });
                if($('a.edit_post', post)){
                    $('a.edit_post', post).click(function (ele) {
                        $('.display_post', post).hide();
                        $('.edit_post_form', post).show();
                        $('.edit_post_form textarea', post).focus();
                        return false;
                    });
                    $("a.cancel_edit_post", post).click(function(evt){
                        $('.display_post', post).show();
                        $('.edit_post_form', post).hide();
                    });
                }
                if($('.reply_post', post)){
                    $('.reply_post', post).click(function (ele) {
                        $('.reply_post_form', post).show();
                        $('.reply_post_form textarea', post).focus();
                        return false;
                    });
                    $('.reply_post', post).button();
                }
                if($('.add_attachment', post)){
                    $('.add_attachment', post).click(function (ele) {
                        $('.add_attachment_form', post).show();
                        return false;
                    });
                }
                if($('.promote_to_thread', post)){
                    $('.promote_to_thread', post).click(function (ele) {
                        $('.promote_to_thread_form', post).show();
                        return false;
                    });
                }
                if($('.shortlink', post)){
                    var popup = $('.shortlink_popup', post);
                    $('.shortlink', post).click(function(evt){
                        evt.preventDefault();
                        popup.lightbox_me({
                            onLoad: function() {
                                $('input', popup).select();
                            }
                        });
                    });
                    $('.close', popup).bind('click', function() {
                        popup.hide();
                    });
                }
            });
        }());
        
$(function () {
            $('select.results_per_page').change(function () {
                this.form.submit();});});
$(function () {
          $('input.label_edit').tagEditor({
            confirmRemoval: false,
            completeOnSeparator: true,
            completeOnBlur: true
          });
        });

        $(document).ready(function () {
            var thread_tag = $('a.thread_tag');
            var thread_spam = $('a.sidebar_thread_spam');
            var tag_thread_holder = $('#tag_thread_holder');
            var allow_moderate = $('#allow_moderate');
            var mod_thread_link = $('#mod_thread_link');
            var mod_thread_form = $('#mod_thread_form');
            if (mod_thread_link.length) {
                if (mod_thread_form.length) {
                    mod_thread_link.click(function (e) {
                        mod_thread_form.show();
                        return false;
                    });
                }
            }
            if (thread_tag.length) {
                if (tag_thread_holder.length) {
                    var submit_button = $('input[type="submit"]', tag_thread_holder);
                    var cancel_button = $('<a href="#" class="btn link">Cancel</a>').click(function(evt){
                        evt.preventDefault();
                        tag_thread_holder.hide();
                        thread_tag.removeClass('active');
                    });
                    submit_button.after(cancel_button);
                    thread_tag.click(function (e) {
                        tag_thread_holder.show();
                        thread_tag.addClass('active');
                        // focus the submit to scroll to the form, then focus the subject for them to start typing
                        submit_button.focus();
                        $('input[type="text"]', tag_thread_holder).focus();
                        return false;
                    });
                }
            }
            if (thread_spam.length) {
                if (allow_moderate.length) {
                    var cval = $.cookie('_session_id');
                    thread_spam[0].style.display='block';
                }
            }
        });
        </script>
    
      
<!-- /ew:body_js_tail -->

    
    
  <div id="lightbox_create_wiki_page" class="modal" style="display:none">
  <b data-icon="D" class="ico ico-close close"></b>
  
    <h1>Add a Wiki Page</h1>
    <form class="grid-10">
        <label class="grid-2">Name</label>
        <div class="grid-7"><input type="text" name="name"></div>
        <label class="grid-2">&nbsp;</label>
        <div class="grid-7"><input type="submit" value="Create page"></div>
    </form>
  
</div>
<script type="text/javascript">
  /*<![CDATA[*/
  $('.post-link')
    .click(function(evt) {
        var cval = $.cookie('_session_id');
        evt.preventDefault();
        $.post(this.href, {_session_id:cval}, function(val)
            { window.location = val.location; },
            'json');
      });
  /*]]>*/
</script>
  

    
      
    
    
   
    
  </body>
</html>