<!DOCTYPE html>
<!-- Server: sfn-web-4 -->


  










<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]>--> <html lang="en" class="no-js"> <!--<![endif]-->
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
    <title>Whonix / Documentation / Threat Model</title>
    

<script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/modernizr.custom.90514.js"></script>

<script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/jquery-1.8.0.min.js"></script>

<script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/header.js"></script>
<!--[if lt IE 7 ]>
  <script src="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/js/sftheme/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
<![endif]-->
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular' rel='stylesheet' type='text/css'>
<style type="text/css">
    @font-face {
        font-family: "Pictos";
        src: url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.eot');
        src: local("â˜º"), url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.woff') format('woff'), url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.ttf') format('truetype'), url('http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.svg') format('svg');
    }
</style>
    <script type="text/javascript">
            /*jslint onevar: false, nomen: false, evil: true, css: true, plusplus: false, white: false, forin: true, on: true, immed: false */
            /*global confirm, alert, unescape, window, jQuery, $, net, COMSCORE */
    </script>
    
      <!-- ew:head_css -->

    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/allura/css/forge/hilite.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/tool/wiki/css/wiki.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/theme/sftheme/css/forge.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1358968642/_ew_/_slim/css?href=css%2Fmarkitup_sf.css%3Bcss%2Fpage_list.css"
                >
    
      <style>
            input.label_edit{ float: left; }
            .tagEditor{
                margin: 4px 0;
                padding: 0;
                float: left;
            }

            .tagEditor li, .removable{
                display: inline;
                background-image: url('http://a.fsdn.com/allura/nf/1358968642/_static_/images/minus_small.png');
                background-color: #eef;
                background-position: right center;
                background-repeat: no-repeat;
                list-style-type: none;
                padding: 0 18px 0 6px;
                margin: 0 4px;
                cursor: pointer;
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
            }

            .tagEditor li:hover{
                background-color: #ebebeb;
            }</style>
    
      
<!-- /ew:head_css -->

    
    
    
      <!-- ew:head_js -->

    
      
<!-- /ew:head_js -->

    
    

    
      <style type="text/css">
        #page-body.project---init-- #top_nav { display: none; }
#page-body.project---init-- #nav_menu_holder { display: none; margin-bottom: 0; }
#page-body.project---init-- #content_base {margin-top: 0; }
      </style>
    
    
<style>
  .hidden { display: none }
  a.notfound { color: #f00; }
</style>

      <style>.XjyhQacmhgWFjkHsgNGXFwYM { display:none }</style>

    
<link rel="alternate" type="application/rss+xml" title="Page RSS" href="feed.rss"/>
<link rel="alternate" type="application/atom+xml" title="Page Atom" href="feed.atom"/>
<link rel="alternate" type="application/rss+xml" title="Wiki RSS" href="../feed.rss"/>
<link rel="alternate" type="application/atom+xml" title="Wiki Atom" href="../feed.atom"/>

    
    


<script type="text/javascript">
    var _gaq = _gaq || [];

    function _add_tracking(prefix, tracking_id, send_user) {
        _gaq.push([prefix+'._setAccount', tracking_id]);
        _gaq.push([prefix+'._setCustomVar', 1, 'Page Type', 'wiki', 3]);_gaq.push([prefix+'._trackPageview']);
    }
      _add_tracking('sfnt1', 'UA-32013-6', true);
      _add_tracking('sfnt2', 'UA-36130941-1', true);
    

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' === document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </head>

  <body class="wiki-Threat_Model" id="forge">
    
      <!-- ew:body_top_js -->

    
      
<!-- /ew:body_top_js -->

    
    
<header id="site-header">
    <div class="wrapper">
        <a href="/" class="logo">
            <span>SourceForge</span>
        </a>
        
        <form method="get" action="/directory/">
            <input type="text" id="words" name="q" placeholder="Search">
        </form>
        
        <!--Switch to {language}-->
        <nav id="nav-site">
            <a href="/directory/" title="Browse our software.">Browse</a>
            <a href="/blog/" title="Read the latest news from the SF HQ.">Blog</a>
            <a href="/support" title="Contact us for help and feedback.">Help</a>
        </nav>
        <nav id="nav-account">
            
              <div class="logged_out">
                <a href="/account/login.php">Log In</a>
                <span>or</span>
                <a href="https://sourceforge.net/user/registration/">Join</a>
              </div>
            
        </nav>
        
    </div>
</header>
<header id="site-sec-header">
    <div class="wrapper">
        <nav id="nav-hubs">
            <h4>Solution Centers</h4>
            <a href="http://ibmsmartercommerce.sourceforge.net/">Smarter Commerce</a>
            <a href="http://goparallel.sourceforge.net/">Go Parallel</a>
            <a href="http://html5center.sourceforge.net/">HTML5</a>
            <a href="http://ibmsmarteritservices.sourceforge.net/">Smarter IT</a>
        </nav>
        <nav id="nav-collateral">
            <a href="/jobs?source=header">Jobs</a>
            <a href="http://library.geeknetmedia.com">Resources</a>
            
            <a href="">Newsletters</a>
            
        </nav>
    </div>
</header>
    
    <section id="page-body" class=" neighborhood-Projects project-whonix mountpoint-wiki">
	  <div class="grid-24" id="nav_menu_holder">
            
            


  
  <a href="/p/whonix/">
    
      <img src="/p/whonix//icon?2012-10-18 23:06:52+00:00" class="project_icon" alt="Project Logo">
    
	<h1 class="project_title">
      
        Whonix
      
	</h1>
	</a>

            
      </div>
      <div id="top_nav" class="">
        
        
  
    <a href="/p/whonix/homelink/" class="ui-icon-tool-link">
      Homepage
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/wiki/" class="ui-icon-tool-wiki">
      Documentation
      
        
          <span class="diamond"></span>
        
      
      
      
    </a>
	
    <a href="/p/whonix/blog/" class="ui-icon-tool-blog">
      Important Blog
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/featureblog/" class="ui-icon-tool-blog">
      Feature Blog
      
        
      
      
      
    </a>
	
    <a href="/projects/whonix/files/" class="ui-icon-tool-files">
      _
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/discussion/" class="ui-icon-tool-discussion">
      User Help Forum
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/mailman/" class="ui-icon-tool-mailman">
      Developer Mailing List
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/code/" class="ui-icon-tool-git">
      Source Code
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/donate/" class="ui-icon-tool-link">
      Donate
      
        
      
      
      
    </a>
	
	<div style="clear:both"></div>

        
      </div>
      <div id="content_base">
			  
          
        
			  
          
        
        <div class="grid-24 pad">
          <h2 class="dark title">Threat Model
            <!-- actions -->
            <small>
            
  
    
    <a href="history" title="History"><b data-icon="N" class="ico ico-history" title="History"></b></a>
  
  
	<a href="feed" title="RSS"><b data-icon="f" class="ico ico-feed" title="Feed"></b></a>
  <a href="../search" title="Search"><b data-icon="s" class="ico ico-search" title="Search"></b></a>

            </small>
            <!-- /actions -->
          </h2>
		
  

          <div>
            
            
  
<div class="markdown_content"><div>
<div class="markdown_content"><p><a class="" href="https://sourceforge.net/p/whonix/wiki/Home/#whonix-homepage">Whonix Homepage</a> | <img alt="" src="http://whonix.sourceforge.net/screenshots/BC_Rnd_32px.png" /> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/#donate">Donate</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Download/#stay-tuned">News</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Screenshots/">Screenshots</a> | <a class="" href="http://whonix.sourceforge.net/videos.html">Videos</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Download/">Download</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Documentation/">Documentation</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/About/">About</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Features/">Features</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Security%20Guide/">Security Guide</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/FAQ/">FAQ</a> | <a class="" href="https://sourceforge.net/p/whonix/discussion/">Forum</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contact/">Contact</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Bridges/">Bridges Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Features/#vpn-tunnel-support">VPN/Tunnel Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Hidden%20Services/">Hidden Service Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/OtherOperatingSystems/">Windows Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/BrowserPlugins/">Flash Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/">You Can Help</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/">Contribiute</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Design/">Tech. Design</a> | <a class="" href="https://trac.torproject.org/projects/tor/wiki/doc/TorBOX/Dev" rel="nofollow">Development</a> | <a class="" href="https://github.com/adrelanos/Whonix" rel="nofollow">Source Code</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/BuildDocumentation/">Build Documentation</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Changelog/">Changelog</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Authorship/">Authorship</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Authorship/#disclaimer">Disclaimer</a></p></div>
</div>
<div class="toc">
<ul>
<li><a href="#threat-model">Threat Model</a><ul>
<li><a href="#the-threats">The Threats</a></li>
<li><a href="#attacker-capabilities">Attacker capabilities</a></li>
<li><a href="#our-goals">Our Goals</a></li>
<li><a href="#our-attack-surface">Our Attack Surface</a></li>
<li><a href="#applying-the-threat-model-to-whonix">Applying the threat model to Whonix</a><ul>
<li><a href="#notes-about-securing-confidentiality-integrity-and-authenticity">Notes about securing Confidentiality, Integrity and Authenticity</a><ul>
<li><a href="#notes-about-end-to-end-security-of-hidden-services">Notes about End-to-end security of Hidden Services</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#attack-on-whonix">Attack on Whonix</a></li>
<li><a href="#design-document-innovations-and-research">Design Document, innovations and research</a></li>
<li><a href="#whonix-threat-model-not-available-as-pdf-or-paper-version">Whonix Threat Model not available as pdf or paper version</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="threat-model">Threat Model</h1>
<h2 id="the-threats">The Threats</h2>
<p>First let's quickly consider all the possible threats we could face. We can put threats against computer systems into five categories:</p>
<p>(1) Non-technical/non-computer-based and legal attacks<br />
E.g. "rubber hose cryptanalysis", mandatory key disclosure, subpoena, real police work/espionage (done by real humans, not bots), bugs, surveillance cameras...</p>
<p>(2) Hardware attacks through physical access.<br />
RAM and Hard disk Forensics, keylogger, TEMPEST, Evil Maid attack...</p>
<p>(3) Backdoors<br />
Intentional weaknesses or additional hidden "functionality" put into your system by a manufacturer, vendor or distributor (hardware or software) allowing remote access^1^ Can be put in anywhere between design/source code, manufacturing/compilation or distribution.</p>
<p>(4) Vulnerabilities<br />
Coding or hardware design errors that can be exploited to gain remote access^1^ Vulnerabilities and Backdoors in practice can look exactly the same, only the way they are created differ.</p>
<p>(5) Design flaws<br />
Even in a backdoors-free, error-free system with perfect physical and legal protection (no such thing in reality) perfect security may still be impossible. This is especially true for anonymity systems. While with cryptography a perfect design exists (the one time pad) anonymity isn't binary. You are not either anonymous or not, you only have some non-zero but not-perfect degree of anonymity. Your anonymity depends on hiding amongst others. Anonymity networks require trust and a large and diverse userbase. A perfect security system wouldn't require trusting other parties or depending on such extraneous factors. Any design of a complex (but still usable) system (all computer systems are complex) needs to make tradeoffs. That's why pretty much everything uses non-perfect cryptography instead of the one-time-pad...</p>
<p>Bug <a class="" href="https://trac.torproject.org/projects/tor/ticket/5928" rel="nofollow">Research: IP discovery through Tor behind isolated network</a> seems to only be about learning the IP address which a Tor client connects to the Internet through. It doesn't mention other information leaks.</p>
<p><font size="-3"><br />
,,^1^ Used in the broadest sense, can be classic remote code execution, privilege escalation, DoS... Essentially they all allow remote parties to send your system instructions that diverge from the allowed security policy<br />
</font></p>
<h2 id="attacker-capabilities">Attacker capabilities</h2>
<ul>
<li>
<p>Legal/Non-technical "attacks" and physical access is expensive<br />
Anything that requires real humans to do work instead of letting computers and algorithms do it is prohibitively expensive against more than a small target group.</p>
</li>
<li>
<p>Backdoors (hardware or software) are expensive<br />
It is hard to make one and it's risky. The more you use it the more likely it is it will be caught and closed. Adversaries are not going to waste it on anything but high profile targets. However, well hidden passive "backdoors" are of a concern, they can practically be impossible to detect and remain functional for years. Imagine a backdoor in a compiler affecting the PRNG. The cost for such backdoor is high (for this example an attacker need patience, non-trivial coding and social engineering as well as some crypto skills) but the "ROI" would be great too...</p>
</li>
<li>
<p>Software attacks are cheap<br />
A good 0day can still cost a lot and isn't useful for very long once you start using it. But new vulnerabilities are found all the time, new exploits can be written. Compared to physical access and backdoors it is cheap. It can be fully automated against a large target set.<br />
If you are wondering how realistic or important the client application 0day threat is consider pwn2own 2012. A semi-legal but most certainly immoral and reckless company demonstrated how they can exploit every web browser circumventing all state of the art security features (MAC, Sandbox, ASRL, NX, etc). This is not too surprising, we already established how big code bases always have bugs and a subset of those bugs will always be exploitable. The noteworthy news here is that this company doesn't report their findings to the developers, they sell it to governments (and/or the highest bidder) as offensive "cyber weapons" (naturally not their term).<br />
It's only likely that also Tor vulnerabilities are sold behind closed doors. You should act accordingly and never rely on Tor alone if your threat model demands "reasonably strong anonymity" even from not-nearly-global but well funded adversaries.</p>
</li>
<li>
<p>Crypto-attacks are enormously expensive<br />
If you know how to break currently used crypto you will try keep this a secret at all costs. Most crypto attacks will most likely require enormous computing power.</p>
</li>
<li>
<p>Attacking design flaws: it depends...<br />
The costs can vary greatly but in every case, once you attack a design flaw and it becomes publicly known the target will fix the flaw and will become harder to attack in the future. This can result in an arms race and often neither party wants to go that way. A grave problem for the defender side can be that some systems are so widely used that it becomes almost impossible to mitigate away to a more secure design. The best example for that is the certificate authority system. It's design is flawed on so many levels yet it's relied upon, often solely for all authentication and confidentiality, to this day by pretty much everyone who's ever used a computer. Similarly, a lack of crypto and hash agility in many applications results in a dependence on weak and broken algorithms, not because we don't know any better but because backwards compatibility and some bad apples spoil it for everyone. There's certainly a threshold, were, if an attacker plays it slow and carefully, he can stay just below the radar for a long time and let everyone believe that it's not "that bad yet". For example, a <a class="" href="https://en.wikipedia.org/wiki/Collision_attack#Attack_scenarios" rel="nofollow">collision attack</a> against SHA-1 (which would affect software updates, version control systems as well as Tor, GPG, TLS and pretty much everything that uses public key crypto) is known to be "within the reach of a powerful adversary" since 2005, with Moore's Law and Schneier/NSA's Law ("Attacks always get better; they never get worse") in play the range of potential adversaries only got larger. SHA-1 will probably be relied on pretty universally until someone publicly demonstrates a collision. Not because we don't know any better, but because to cost of switching are so high.</p>
</li>
</ul>
<h2 id="our-goals">Our Goals</h2>
<ul>
<li>Hiding our Location and Identity when transmitting information</li>
<li>Confidentiality, Integrity, Authenticity and Availability of transmitted data</li>
</ul>
<h2 id="our-attack-surface">Our Attack Surface</h2>
<p>Basically any part used by us to achieve our goals can be attacked:</p>
<ul>
<li>We need some physical security and privacy. It's obvious that anonymity and confidentiality is difficult or impossible to achieve otherwise.</li>
<li>Tor, the code, the design, the whole network (see "Whonix's Tor Setup" below for more)<br />
We also can't look at Tor as an isolated piece of software, we need to consider its whole TCB because if any part of a TCB can be subverted the Tor process can be subverted. The attack surface in case of backdoors is the full TCB, in case of vulnerabilities "only" the network facing parts of the TCB.<ul>
<li>The Whonix-Gateway Hardware</li>
<li>GNU/Linux/OS: kernel, essential userland, apt-get and all software update packages provided by the OS distributor/vendor</li>
<li>Tor itself</li>
<li>The build system (gcc...)<br />
Using Virtualization (instead of "PhyIso") increases the TCB significantly. In addition to the above:</li>
<li>Host Kernel</li>
<li>Host applications</li>
<li>Host software updater</li>
<li>Virtualization software</li>
</ul>
</li>
<li>We rely that the software we use doesn't more than absolutely necessary reduce our anonymity set through protocol leaks, identity correlation and fingerprinting. For that we also have to rely on the Whonix-Workstation and the TCB of the applications we use. (for more see <br />
"Whonix's Protocol-Leak-Protection and Fingerprinting-Protection" below).</li>
</ul>
<p>For Confidentiality, Integrity and Authenticity we (we all, not just Whonix...) are still way too heavily dependent on TLS (Transport Layer Security, the "s" in https). Further we depend on:</p>
<ul>
<li>The complete Host (Hardware and Software)</li>
<li>all software in Whonix-Workstation</li>
<li>TLS/PKI infrastructure</li>
<li>In case of hidden services: The full location/identity TCB.</li>
<li>The "other end", the security of whoever you are communicating with, unless it's symmetric key crypto and you got the only key.</li>
</ul>
<p>To achieve Availability of information we depend on:</p>
<ul>
<li>the upstream internet provider, uptime and connectivity </li>
<li>Tor network resilience against DoS</li>
<li>resilience of webservers you connect to against DoS</li>
<li>Your own system's resilience against DoS</li>
</ul>
<h2 id="applying-the-threat-model-to-whonix">Applying the threat model to Whonix</h2>
<p>First of all, you don't want to end up in the "high profile target" list of any of your resourceful adversaries. Because if you do neither Whonix nor any other computer based system can protect you. </p>
<p>Whonix is mostly a software project. There isn't a lot we can do on the hardware and physical side of things. Hardware security would be a much smaller problem if we weren't using monolithic systems where dozens of parts have full system access through DRM (or indirectly though hardware drivers that all run in kernel space). Have a look at QubesOS for state of the art hardware deprivileging. It requires latest gen hardware and software support still needs to catch up, therefore this isn't available in Whonix yet. </p>
<p>We assume the hardware is trustworthy, we assume the physical location is not compromised. To protect against forensic analysis we recommend to use full disk encryption, wipe the RAM on shutdown. We recommend to use "clean" computers made of parts manufactured by reputable companies and to pay in cash so as to not have hardware IDs leak our identity. Further some pointers:</p>
<ul>
<li>DMA is bad, IOMMU is good, avoid attaching untrusted (or any for that matter) devices on FireWire and PCI* interfaces.</li>
<li>Use open source hardware or at least open source friendly that makes specifications public. Open source means that multiple companies can implement the hardware, the Linus law of "many eyeballs and all bugs are shallow" applies, backdoors are harder to hide.</li>
<li>simple is beautiful, complexity is the enemy Nr.1 of security. Whonix-Gateway can run on very simple hardware like the Raspberry Pi. </li>
</ul>
<p>Crypto is even worse, the only thing we can do is to use <a class="" href="https://en.wikipedia.org/wiki/Multiple_encryption" rel="nofollow">cascades</a> of different cipher and hash families. This is slightly more complicated than it sounds and we don't know of any software that does it right.</p>
<p>As established above in "Attacker capabilities" the main attack vector we need to concern (and we can actually do something about) is software attacks.</p>
<p>To protect against software backdoors and vulnerabilities:</p>
<ul>
<li>the source needs to be audited, preferably by yourself and many others and should ideally be bug free.<br />
Popular open source projects are your best bet. Whonix is fully open source, anyone can audit and patch. Whonix comes with a software updater which allows rapid deployment of security patches. </li>
<li>if you rely on others (you do), you need to make sure that you get the same code as everyone else<br />
Hash sums + signatures, the more public they are, the better. If completely transparent signing is used (as common in proprietary systems) it's much more difficult to determine that you get the same files as everybody else. By default signing is only concerned with making sure that you get code by someone with access to the key. This protects against 3rd parties but not insiders.<br />
Checksums and signatures of Whonix and updates are publicly available.</li>
<li>the code you use should have a good track record, know issues must be corrected immediately<br />
Code that doesn't get checked but has zero known problems is worse than code that has hundreds of known and patched security issues but is constantly being reviewed and worked on. However, a trustworthy code should have very few if any security issues despite having been audited thoroughly. After all, projects that constantly need security patches are constantly insecure. But it's not really about numbers, check the severity of the bugs. Linux needs many security patches but fatal flaws that would affect Whonix are few and far between (i.e. remote code execution with root privileges). Fatal flaws in user facing applications (like browsers, pdf readers, media players, IRC) are frequent and therefore such software is not be part of the TCB (see below).</li>
<li>checking the source is not enough, you need trustworthy binaries<br />
analyzing binaries is a lot more difficult than analyzing source code. If you rely on source code auditing you absolutely require a trustworthy compiler (and a complete trusted system to run it on) and use <a class="" href="http://www.dwheeler.com/trusting-trust/" rel="nofollow">DCC</a>. Similarly you already need a trusted system to check signature and hashes. This is the bootstrapping chicken and egg problem we mentioned earlier. Generally, to address it you need to use at least two different diverse systems that are completely independent (includes their parent build system and compiler) and set up the system in such a way that both would have to be compromised by the same adversary in a compatible way in order to result in a fatal security breach.</li>
</ul>
<p>If the code base is huge and complex code auditing isn't a realistic strategy, therefore we need to reducing complexity and attack surface by:</p>
<ul>
<li>
<p>making the TCB small <br />
and</p>
</li>
<li>
<p>using privilege separation:<br />
The TCB for identity/anonymity is as small as it gets on a monolithic general purpose OS. It could be smaller (e.g. a custom kernel, busybox, uclibc instead of libc and gnu-utils) but that comes at the cost of maintainability, security updates and ease of use. (and still leaves us with a comparably huge monolithic kernel and a gigantic gcc infrastructure). <br />
Linux/Xorg (with DAC or even MAC) isn't very good with privilege separation (e.g. no trusted path). The strongest privilege separation is offered by using multiple physical computers, that's what we recommend, <a class="alink" href="/p/whonix/wiki/PhysicalIsolation/">[PhysicalIsolation]</a>, <a class="" href="https://sourceforge.net/p/whonix/wiki/Multiple%20Whonix-Workstations/">multiple Whonix-Workstations</a>. The more practical but less secure alternative is virtualization. For details about privilege separation between IRC/Browser/Clients and Tor see <a class="" href="https://sourceforge.net/p/whonix/wiki/Security/#technical-intro">Technical Intro</a></p>
</li>
</ul>
<p>We've thought a lot about making Whonix yet more secure but with the (free and open source) tools available today it doesn't seam possible. What we'd need is a isolation kernel that would offer some strong guarantees of isolation between the different subsystems and ideally would be verified so you don't have to worry about sophisticated backdoors (apart from the compiler, see "Trusting trust"/chicken and egg), software vulnerabilities and even some hardware backdoors and vulnerabilities (through IOMMU and microkernel design one can put hardware and firmware components, apart from the CPU, out of the TCB).<br />
For Fingerprint/Protocol leaks and the <a class="" href="https://en.wikipedia.org/wiki/CIA_triad#Key_concepts" rel="nofollow">CIA Triad</a> we are depending on the Whonix-Workstation TCB. This is a hopelessly large TCB/attack surface. For this reason we use yet another approach which can be called "security through non-persistence". That is, you should extensively make use of the snapshot and roll back feature of the virtual machine. Instead of privilege separation within a Tor-Workstation (e.g. by using a Mandatory Access Control framework) which would come at great usability costs we recommend to use the coarse-grained isolation provided through multiple VMs (also see "About grsecurity" below).</p>
<p>To protect against software attacks (vulnerabilities) in particular:</p>
<ul>
<li>make software hard to attack<br />
ASLR, canaries, NX, kernel hardening, See the Debian section below: <a class="" href="https://sourceforge.net/p/whonix/wiki/Security/#operating-system">About Debian</a>. Note that this makes attacks "harder" but not impossible. Hardening is no replacement for fixing bugs. In a really trustworthy system hardening would not be necessary.</li>
<li>detection<br />
This is still left to the user. IDS, Log auditing. The usefulness of this approach is limited. It doesn't prevent security breaches. It can only help making future breaches less likely.</li>
</ul>
<p>To mitigate Design flaws the primary strategy is eliminating single points of failure. Do not rely on Tor alone, use wifi or tunnel through another system running VPN. Do not rely on TLS alone, use GPG as well (and vice versa). Do not rely on a software monoculture, you shouldn't have to rely on Debian infrastructure to never be compromised. We are currently guilty of not following this advice. To lessen the impact of a potential compromise of the update infrastructure (which includes developer machines, build systems, key security and cryptographic primitives like PRNG - remember openssl or Flame?) we do not enable automatic software updates. After all, they are essentially remote root level backdoors (although with some checks in place).</p>
<h3 id="notes-about-securing-confidentiality-integrity-and-authenticity">Notes about securing Confidentiality, Integrity and Authenticity</h3>
<p>This is no different than in any other computer system without Tor. Use end to end public key encryption, there is not really an alternative to that. But there are alternative implementations: TLS, SSH, GPG... End to end means both ends need to be secure, one end is the Whonix-Workstation which you can control and secure. In case of hidden services, the Whonix-Gateway is ALSO part of the TCB! </p>
<p>Whonix-Worstation isn't specifically hardened because hardening a Desktop system to a degree that makes it actually secure against a serious adversary makes the system unusable. Instead we follow the nuke and restore approach, see <a class="" href="https://sourceforge.net/p/whonix/wiki/Multiple%20Whonix-Workstations/">Multiple Whonix-Workstations</a> and <a class="" href="https://sourceforge.net/p/whonix/wiki/Security/#recommendation-to-use-multiple-vm-snapshots">Recommendation to use multiple Snapshots</a>.</p>
<p>About Availability: This is most likely the least of our worries. The most resilient approach is probably a distributed data store, like Tahoe-LAFS or Freenet. i2p offers multi-homing built in. For Tor we don't know of any solutions ready for general usage.</p>
<h4 id="notes-about-end-to-end-security-of-hidden-services">Notes about End-to-end security of Hidden Services</h4>
<p>Hidden services are not really "end-to-end" encrypted, they encrypted only Tor to End. (or "Tor to Tor") The communication between the browser or server and Tor is sent in clear text. This doesn't really constitute a security issue, as localhost (or Workstation to Gateway on an isolated network), is supposed to be secure. But it has some security implications:</p>
<p>With hidden services alone, without TLS enabled, the adversary only needs to compromise Whonix-Gateway to get knowledge of the content of the connection and the clients identity/location. To compromise the content of the connection, the adversary only needs to compromise either the gateway or the workstation.</p>
<p>With hidden services, and TLS enabled, an adversary needs to compromise Whonix-Workstation to gain knowledge of the content of the connection. The adversary would have to compromise Whonix-Gateway as well, to gain knowledge of the client's identity/location.</p>
<p>It is possible to use hidden services and TLS at the same time, i.e. https://<strong><em>*</em></strong><strong><em>*</em></strong>**.onion. There are only a very few hidden services reachable over TLS. For example <a href="https://pad.riseup.net/" rel="nofollow">https://pad.riseup.net/</a> can be reached over <a href="https://ttbmov2dezfs2fln.onion/." rel="nofollow">https://ttbmov2dezfs2fln.onion/.</a> But since this only offers benefits to users of Whonix (and other Tor gateway implementations), there is no demand. It would provide some nice defense in depth as it eliminates a single point of failure.</p>
<p>It would open the question, how would the certificate be verified?</p>
<p>That's simple for private sites, where server and clients know each other. They simply verify it over preshared secure channel, for example, a meeting.</p>
<p>And public hidden services? It is unlikely, that certificate authorities will give out certificates for .onion sites. Startssl.com declined, because .onion is no .gTLD, see <a class="" href="https://trac.torproject.org/projects/tor/ticket/6116" rel="nofollow">Bug #6116: apply for .onion gTLD at IANA</a>. Although you could try asking other certificate authorities, if they offer SSL certificates for people who can prove that they own a .onion domain. You can prove, that you have control over the domain by editing its contents on their request.</p>
<p>But CAs should not be relied on anyway. See chapter <a class="" href="https://sourceforge.net/p/whonix/wiki/Security/#ssl">SSL</a>.</p>
<p>Hidden Services with Whonix are still safer than running Tor and the server software on the same host, see <a class="" href="https://sourceforge.net/p/whonix/wiki/Security/#hidden-services">Hidden Services</a> for more information.</p>
<h2 id="attack-on-whonix">Attack on Whonix</h2>
<p>There is a comparison of TBB, Tails, Whonix Standard/Download version (host+VM+VM) and Whonix with Physical Isolation in chapter <a class="" href="https://sourceforge.net/p/whonix/wiki/Comparison%20with%20Others/#attacks">Attacks against Whonix</a>.</p>
<h2 id="design-document-innovations-and-research">Design Document, innovations and research</h2>
<p>Whonix developer proper is also interested in serious design documents. There is only one design documents with respect to Tor, transparent/isolated proxying, isolation and Virtual Machines. Proper has read the old design paper "A Tor Virtual Machine Design and Implementation" from 2009, which can be found at <a class="alink" href="/p/whonix/wiki/DesignDocumentBase/">[DesignDocumentBase]</a>. After reading, adrelanos forked that paper, removed non-essential, non-security relevant stuff and made sure, all considerations from the old design paper, were implemented into Whonix. The forked paper can be found at <a class="alink" href="/p/whonix/wiki/DesignDocument/">[DesignDocument]</a>.</p>
<p>The whole Whonix documentation, especially this page and <a class="alink" href="/p/whonix/wiki/Applications/">[Applications]</a> supersede the old design document. Also the <a class="" href="https://trac.torproject.org/projects/tor/wiki/doc/TorifyHOWTO" rel="nofollow">TorifyHOWTO</a> is co-maintained by adrelanos.</p>
<p>Also the following documents are being monitored.</p>
<ul>
<li><a class="" href="https://tails.boum.org/contribute/index.en.html" rel="nofollow">Tails Design</a></li>
<li><a class="" href="https://tails.boum.org/contribute/design/" rel="nofollow">Tails Design: specification and implementation</a></li>
<li><a class="" href="http://dee.su/liberte-security" rel="nofollow">Security and Anonymity in LibertÃ© Linux</a></li>
<li><a class="" href="http://dee.su/liberte-motivation" rel="nofollow">LibertÃ© Linux Motivation and Philosophy</a></li>
</ul>
<p>If there are any security/privacy/anonymity updates they will be considered for Whonix.</p>
<p>The Whonix project also enjoys asking good questions, providing useful suggestions and creating useful things.</p>
<p>The following list is to keep track of all discussions and to review them in the future again, to see if something has changed.</p>
<ul>
<li>Smarm created serious <a class="alink" href="/p/whonix/wiki/LeakTestsOld/">[LeakTestsOld]</a>, which have been scripted by adrealanos (see <a class="alink notfound" href="../Leaktests">[Leaktests]</a>) and which are potentially useful for other projects as well.</li>
<li><a class="" href="https://mailman.boum.org/pipermail/tails-dev/2012-June/001245.html" rel="nofollow">Tails-dev Removing SSL CA dependency for HTP</a></li>
<li><a class="" href="https://trac.torproject.org/projects/tor/wiki/doc/torsocks" rel="nofollow">Modified usewithtor to support setting ip and port by command line parameter by adrelanos</a></li>
<li><a class="" href="https://trac.torproject.org/projects/tor/ticket/5928" rel="nofollow">Research: IP discovery through Tor behind isolated network</a></li>
<li><a class="" href="https://trac.torproject.org/projects/tor/ticket/5611" rel="nofollow">Enhance "Transparent Torification (Requires custom transproxy or Tor router)" in Tor Button.</a></li>
<li>Read <a class="alink" href="/p/whonix/wiki/Dev/">[Dev]</a> and also read the archives. We don't just do things. Everyone is invited to add some points and then we try to make the best decision.</li>
<li><a class="" href="https://lists.torproject.org/pipermail/tor-talk/2012-May/024227.html" rel="nofollow">tor-talk Tor Browser disabling Javascript anonymity set reduction</a></li>
<li><a class="" href="https://lists.torproject.org/pipermail/tor-talk/2012-March/023535.html" rel="nofollow">tor-talk Awareness for identity correlation through circuit sharing is almost zero.</a>; <a class="" href="https://trac.torproject.org/projects/tor/ticket/6102" rel="nofollow">Add warning related to Identity correlation through circuit sharing</a></li>
<li><a class="" href="https://lists.torproject.org/pipermail/tor-talk/2012-March/023486.html" rel="nofollow">tor-talk Operating system updates / software installation behind Tor Transparent Proxy</a></li>
<li><a class="" href="https://lists.torproject.org/pipermail/tor-talk/2012-August/025128.html" rel="nofollow">tor-talk Attack against Tor: Statistic Manipulation Attack</a></li>
<li><a class="" href="https://mailman.boum.org/pipermail/tails-dev/2012-July/001394.html" rel="nofollow">Tails-dev tails_htp: exit node can fingerprint Tails users until exit node is changed</a>; <a class="" href="https://mailman.boum.org/pipermail/tails-dev/2012-August/001421.html" rel="nofollow">2</a></li>
<li><a class="" href="https://mailman.boum.org/pipermail/tails-dev/2012-August/001436.html" rel="nofollow">Tails-dev better IRC client, include XChat</a></li>
<li>
<p><a class="" href="https://mailman.boum.org/pipermail/tails-dev/2012-August/001422.html" rel="nofollow">Tails-dev separate Tor streams</a></p>
</li>
<li>
<p>...</p>
</li>
</ul>
<p>This list is incomplete...</p>
<p>Searching...</p>
<ul>
<li><a class="" href="https://trac.torproject.org/projects/tor/query?reporter=proper&amp;col=id&amp;col=summary&amp;col=reporter&amp;col=owner&amp;col=type&amp;col=status&amp;col=priority&amp;order=priority" rel="nofollow">Tor project trac, Reporter is proper</a></li>
<li>site:<a href="https://mailman.boum.org/pipermail/tails-dev/" rel="nofollow">https://mailman.boum.org/pipermail/tails-dev/</a> adrelanos</li>
<li>site:<a href="https://lists.torproject.org/pipermail/tor-talk/" rel="nofollow">https://lists.torproject.org/pipermail/tor-talk/</a> adrelanos</li>
</ul>
<h2 id="whonix-threat-model-not-available-as-pdf-or-paper-version">Whonix Threat Model not available as pdf or paper version</h2>
<p>You may skip this optional chapter. Written by Whonix developer adrelanos.</p>
<p>While I read real papers, like the <a class="" href="https://svn.torproject.org/svn/projects/design-paper/tor-design.pdf" rel="nofollow">Onion routing design paper</a> and many others, I can't be coerced into creating a paper "Designing an anonymous operating system" with latex as pdf.</p>
<p>Like Mike Perry, developer of Tor Browser <a class="" href="https://lists.torproject.org/pipermail/tor-talk/2012-May/024405.html" rel="nofollow">said</a> "I find the pdf format heavy and unnerving from a security perspective.". That also goes for adrelanos and I also find the pdf format inconvinient. It would also take me some time to learn latex, pdf creation, formatting etiquette and so on. Time, which I rather invest into improving the design, developing and so on. The "Onion routing design paper" is now also outdated and I rather have an editable, often updated and revised website compared to a paper/pdf.</p>
<p>Tails does also not have a design paper as pdf and still lots of users and developers. Also TrueCrypt had not design paper about plausible deniability and still got reviewed by Bruce Schneier et al.</p></div>

  <div id="create_wiki_page_holder" title="Create New Page" style="display:none">
    <form>
        <label class="grid-2">Name</label>
        <div class="grid-7"><input type="text" name="name"/></div>
    </form>
  </div>

          </div>
			
          
  <hr class="grid-19" style="margin-top: 1em; margin-bottom: 2em; clear:both;">
  
  
    <h4>Related</h4>
    <p>
    
      <a href="/p/whonix/wiki/DesignDocumentBase/">Wiki: DesignDocumentBase</a><br>
    
      <a href="/p/whonix/wiki/DesignDocument/">Wiki: DesignDocument</a><br>
    
      <a href="/p/whonix/wiki/Applications/">Wiki: Applications</a><br>
    
      <a href="/p/whonix/wiki/LeakTestsOld/">Wiki: LeakTestsOld</a><br>
    
      <a href="/p/whonix/wiki/Dev/">Wiki: Dev</a><br>
    
      <a href="/p/whonix/wiki/PhysicalIsolation/">Wiki: PhysicalIsolation</a><br>
    
    </p>
  
  

        </div>
      </div>
    </section>
      
<footer id="site-footer">
    <div class="wrapper">
        <nav>
            <h5>SourceForge</h5>
            <a href="/about">About</a>
            <a href="/blog/category/sitestatus/">Site Status</a>
            <a href="http://twitter.com/sfnet_ops">@sfnet_ops</a>
        </nav>
        <nav>
            <h5>Find and Develop Software</h5>
            <a href="/create/">Create a Project</a>
            <a href="/directory/">Software Directory</a>
            <a href="/top">Top Downloaded Projects</a>
        </nav>
        <nav>
            <h5>Community</h5>
            <a href="/blog/">Blog</a>
            <a href="http://twitter.com/sourceforge">@sourceforge</a>
            <a href="/jobs?source=footer">Job Board</a>
        </nav>
        <nav>
            <h5>Help</h5>
            <a href="/apps/trac/sourceforge/wiki/WikiStart">Site Documentation</a>
            <a href="/support">Support Request</a>
            <a href="https://sourceforge.net/p/forge/documentation/Support%20via%20IRC/">Real-Time Support</a>
        </nav>
    </div>
</footer>
<footer id="site-copyright-footer">
    <div class="wrapper">
        <div id="copyright">
            Copyright &copy; 2013 SourceForge. All Rights Reserved.<br />
            SourceForge is a <a href="http://www.diceholdingsinc.com/phoenix.zhtml?c=211152&amp;p=irol-landing">Dice Holdings, Inc.</a> company.
        </div>
        <nav>
            <a href="http://geeknetmedia.com/terms-of-use">Terms</a>
            <a href="http://geeknetmedia.com/privacy-statement/">Privacy</a>
            <a href="http://geeknetmedia.com/opt-out-choices">Cookies/Opt Out</a>
            <a href="http://geeknetmedia.com">Advertise</a>
            <a href="http://sourceforge.jp/">SourceForge.JP</a>
        </nav>
    </div>
</footer>
    <div id="messages">
        
    </div>
    
      <!-- ew:body_js -->

    
      <script type="text/javascript" src="http://a.fsdn.com/allura/nf/1358968642/_ew_/_slim/js?href=allura%2Fjs%2Fjquery-base.js%3Ballura%2Fjs%2Fjquery.notify.js%3Ballura%2Fjs%2Fsylvester.js%3Ballura%2Fjs%2Fpb.transformie.min.js%3Ballura%2Fjs%2Fallura-base.js%3Bjs%2Fjquery.lightbox_me.js%3Bjs%2Fjquery.autosize-min.js%3Bjs%2Fjquery.textarea.js%3Bjs%2Fsf_markitup.js%3Bjs%2Fjquery.tag.editor.js"></script>
    
      
<!-- /ew:body_js -->

    
    
      <!-- ew:body_js_tail -->

    
      <script type="text/javascript">$(function () {
            var $lightbox = $('#lightbox_create_wiki_page');
            var $trigger = $('#sidebar a.add_wiki_page');
            $trigger.bind('click', function(e) {
                $lightbox.lightbox_me();
                return false;
            });
            $($lightbox).delegate('.close', 'click', function(e) {
                $lightbox.trigger('close');
                return false;
            });
        });
$(function () {
            $('#lightbox_create_wiki_page form').submit(function(){
                location.href = $('#sidebar a.add_wiki_page').attr('href') +
                    encodeURIComponent($('input[name=name]', $(this)).val().replace('/', '-')) + '/edit';
                return false;
            });
        });
$(function () {
            $('textarea.auto_resize').focus(function(){$(this).autosize();});
        });
$(document).ready(function () {
            $("a.attachment_form_add_button").click(function(evt){
                $(this).hide();
                $(".attachment_form_fields", this.parentNode).show();
                evt.preventDefault();
            });
            $("a.cancel_edit_post").click(function(evt){
                $("textarea", this.parentNode).val($("input.original_value", this.parentNode).val());
                $(".attachment_form_fields input", this.parentNode).val('');
                evt.preventDefault();
            });
         });

        (function () {
            $('div.discussion-post').each(function () {
                var post = this;
                $('.submit', post).button();
                $('.flag_post, .delete_post', post).click(function (ele) {
                    this.parentNode.submit();
                    return false;
                });
                if($('a.edit_post', post)){
                    $('a.edit_post', post).click(function (ele) {
                        $('.display_post', post).hide();
                        $('.edit_post_form', post).show();
                        $('.edit_post_form textarea', post).focus();
                        return false;
                    });
                    $("a.cancel_edit_post", post).click(function(evt){
                        $('.display_post', post).show();
                        $('.edit_post_form', post).hide();
                    });
                }
                if($('.reply_post', post)){
                    $('.reply_post', post).click(function (ele) {
                        $('.reply_post_form', post).show();
                        $('.reply_post_form textarea', post).focus();
                        return false;
                    });
                    $('.reply_post', post).button();
                }
                if($('.add_attachment', post)){
                    $('.add_attachment', post).click(function (ele) {
                        $('.add_attachment_form', post).show();
                        return false;
                    });
                }
                if($('.promote_to_thread', post)){
                    $('.promote_to_thread', post).click(function (ele) {
                        $('.promote_to_thread_form', post).show();
                        return false;
                    });
                }
                if($('.shortlink', post)){
                    var popup = $('.shortlink_popup', post);
                    $('.shortlink', post).click(function(evt){
                        evt.preventDefault();
                        popup.lightbox_me({
                            onLoad: function() {
                                $('input', popup).select();
                            }
                        });
                    });
                    $('.close', popup).bind('click', function() {
                        popup.hide();
                    });
                }
            });
        }());
        
$(function () {
            $('select.results_per_page').change(function () {
                this.form.submit();});});
$(function () {
          $('input.label_edit').tagEditor({
            confirmRemoval: false,
            completeOnSeparator: true,
            completeOnBlur: true
          });
        });

        $(document).ready(function () {
            var thread_tag = $('a.thread_tag');
            var thread_spam = $('a.sidebar_thread_spam');
            var tag_thread_holder = $('#tag_thread_holder');
            var allow_moderate = $('#allow_moderate');
            var mod_thread_link = $('#mod_thread_link');
            var mod_thread_form = $('#mod_thread_form');
            if (mod_thread_link.length) {
                if (mod_thread_form.length) {
                    mod_thread_link.click(function (e) {
                        mod_thread_form.show();
                        return false;
                    });
                }
            }
            if (thread_tag.length) {
                if (tag_thread_holder.length) {
                    var submit_button = $('input[type="submit"]', tag_thread_holder);
                    var cancel_button = $('<a href="#" class="btn link">Cancel</a>').click(function(evt){
                        evt.preventDefault();
                        tag_thread_holder.hide();
                        thread_tag.removeClass('active');
                    });
                    submit_button.after(cancel_button);
                    thread_tag.click(function (e) {
                        tag_thread_holder.show();
                        thread_tag.addClass('active');
                        // focus the submit to scroll to the form, then focus the subject for them to start typing
                        submit_button.focus();
                        $('input[type="text"]', tag_thread_holder).focus();
                        return false;
                    });
                }
            }
            if (thread_spam.length) {
                if (allow_moderate.length) {
                    var cval = $.cookie('_session_id');
                    thread_spam[0].style.display='block';
                }
            }
        });
        </script>
    
      
<!-- /ew:body_js_tail -->

    
    
  <div id="lightbox_create_wiki_page" class="modal" style="display:none">
  <b data-icon="D" class="ico ico-close close"></b>
  
    <h1>Add a Wiki Page</h1>
    <form class="grid-10">
        <label class="grid-2">Name</label>
        <div class="grid-7"><input type="text" name="name"></div>
        <label class="grid-2">&nbsp;</label>
        <div class="grid-7"><input type="submit" value="Create page"></div>
    </form>
  
</div>
<script type="text/javascript">
  /*<![CDATA[*/
  $('.post-link')
    .click(function(evt) {
        var cval = $.cookie('_session_id');
        evt.preventDefault();
        $.post(this.href, {_session_id:cval}, function(val)
            { window.location = val.location; },
            'json');
      });
  /*]]>*/
</script>
  

    
      
    
    
   
    
  </body>
</html>