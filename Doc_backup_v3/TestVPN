<!DOCTYPE html>
<!-- Server: sfn-web-8 -->


  










<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]>--> <html lang="en" class="no-js"> <!--<![endif]-->
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
    <title>Whonix / Documentation / TestVPN</title>
    

<script src="http://a.fsdn.com/allura/nf/1364319766/_ew_/theme/sftheme/js/sftheme/modernizr.custom.90514.js"></script>

<script src="http://a.fsdn.com/allura/nf/1364319766/_ew_/theme/sftheme/js/sftheme/jquery-1.8.0.min.js"></script>

<script src="http://a.fsdn.com/allura/nf/1364319766/_ew_/theme/sftheme/js/sftheme/header.js"></script>
<!--[if lt IE 7 ]>
  <script src="http://a.fsdn.com/allura/nf/1364319766/_ew_/theme/sftheme/js/sftheme/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
<![endif]-->
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular' rel='stylesheet' type='text/css'>
<style type="text/css">
    @font-face {
        font-family: "Pictos";
        src: url('http://a.fsdn.com/allura/nf/1364319766/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.eot');
        src: local("â˜º"), url('http://a.fsdn.com/allura/nf/1364319766/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.woff') format('woff'), url('http://a.fsdn.com/allura/nf/1364319766/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.ttf') format('truetype'), url('http://a.fsdn.com/allura/nf/1364319766/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.svg') format('svg');
    }
</style>
    <script type="text/javascript">
            /*jslint onevar: false, nomen: false, evil: true, css: true, plusplus: false, white: false, forin: true, on: true, immed: false */
            /*global confirm, alert, unescape, window, jQuery, $, net, COMSCORE */
    </script>
    
      <!-- ew:head_css -->

    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1364319766/_ew_/allura/css/forge/hilite.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1364319766/_ew_/tool/wiki/css/wiki.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1364319766/_ew_/theme/sftheme/css/forge.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1364319766/_ew_/_slim/css?href=css%2Fmarkitup_sf.css%3Bcss%2Fpage_list.css%3Bcss%2Fjquery.tagsinput.css"
                >
    
      
<!-- /ew:head_css -->

    
    
    
      <!-- ew:head_js -->

    
      
<!-- /ew:head_js -->

    
    

    
      <style type="text/css">
        #page-body.project---init-- #top_nav { display: none; }
#page-body.project---init-- #nav_menu_holder { display: none; margin-bottom: 0; }
#page-body.project---init-- #content_base {margin-top: 0; }
      </style>
    
    
<style>
  .hidden { display: none }
  a.notfound { color: #f00; }
</style>

      <style>.XPrmbfPBzDBVACBixImaJET { display:none }</style>

    
<link rel="alternate" type="application/rss+xml" title="Page RSS" href="feed.rss"/>
<link rel="alternate" type="application/atom+xml" title="Page Atom" href="feed.atom"/>
<link rel="alternate" type="application/rss+xml" title="Wiki RSS" href="../feed.rss"/>
<link rel="alternate" type="application/atom+xml" title="Wiki Atom" href="../feed.atom"/>

    
    


<script type="text/javascript">
    var _gaq = _gaq || [];

    function _add_tracking(prefix, tracking_id, send_user) {
        _gaq.push([prefix+'._setAccount', tracking_id]);
        _gaq.push([prefix+'._setCustomVar', 1, 'Page Type', 'wiki', 3]);_gaq.push([prefix+'._trackPageview']);
    }
      _add_tracking('sfnt1', 'UA-32013-6', true);
      _add_tracking('sfnt2', 'UA-36130941-1', true);
    

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' === document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </head>

  <body class="wiki-TestVPN" id="forge">
    
      <!-- ew:body_top_js -->

    
      
<!-- /ew:body_top_js -->

    
    
<header id="site-header">
    <div class="wrapper">
        <a href="/" class="logo">
            <span>SourceForge</span>
        </a>
        
        <form method="get" action="/directory/">
            <input type="text" id="words" name="q" placeholder="Search">
        </form>
        
        <!--Switch to {language}-->
        <nav id="nav-site">
            <a href="/directory/" title="Browse our software.">Browse</a>
            <a href="/directory/enterprise" title="Browse our Enterprise software.">Enterprise</a>
            <a href="/blog/" title="Read the latest news from the SF HQ.">Blog</a>
            <a href="/support" title="Contact us for help and feedback.">Help</a>
            <a href="/jobs?source=header" title="Search 80k+ tech jobs." class="featured-link">Jobs</a>
        </nav>
        <nav id="nav-account">
            
              <div class="logged_out">
                <a href="/account/login.php">Log In</a>
                <span>or</span>
                <a href="https://sourceforge.net/user/registration/">Join</a>
              </div>
            
        </nav>
        
    </div>
</header>
<header id="site-sec-header">
    <div class="wrapper">
        <nav id="nav-hubs">
            <h4>Solution Centers</h4>
            <a href="http://ibmsmartercommerce.sourceforge.net/">Smarter Commerce</a>
            <a href="http://goparallel.sourceforge.net/">Go Parallel</a>
            <a href="http://html5center.sourceforge.net/">HTML5</a>
            <a href="http://ibmsmarteritservices.sourceforge.net/">Smarter IT</a>
        </nav>
        <nav id="nav-collateral">
            <a href="http://library.geeknetmedia.com">Resources</a>
            
            <a href="">Newsletters</a>
            
        </nav>
    </div>
</header>
    
    <section id="page-body" class=" neighborhood-Projects project-whonix mountpoint-wiki">
	  <div class="grid-24" id="nav_menu_holder">
            
            


  
  <a href="/p/whonix/">
    
      <img src="/p/whonix//icon?2012-10-18 23:06:52+00:00" class="project_icon" alt="Project Logo">
    
	<h1 class="project_title">
      
        Whonix
      
	</h1>
	</a>

            
      </div>
      <div id="top_nav" class="">
        
        
  
    <a href="/p/whonix/homelink/" class="ui-icon-tool-link">
      Homepage
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/wiki/" class="ui-icon-tool-wiki">
      Documentation
      
        
          <span class="diamond"></span>
        
      
      
      
    </a>
	
    <a href="/p/whonix/blog/" class="ui-icon-tool-blog">
      Important Blog
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/featureblog/" class="ui-icon-tool-blog">
      Feature Blog
      
        
      
      
      
    </a>
	
    <a href="/projects/whonix/files/" class="ui-icon-tool-files">
      _
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/discussion/" class="ui-icon-tool-discussion">
      User Help Forum
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/mailman/" class="ui-icon-tool-mailman">
      Developer Mailing List
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/code/" class="ui-icon-tool-git">
      Source Code
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/donate/" class="ui-icon-tool-link">
      Donate
      
        
      
      
      
    </a>
	
    <a href="/p/whonix/awiki/" class="ui-icon-tool-wiki">
      _
      
        
      
      
      
    </a>
	
	<div style="clear:both"></div>

        
      </div>
      <div id="content_base">
			  
          
        
			  
          
        
        <div class="grid-24 pad">
          <h2 class="dark title">TestVPN
            <!-- actions -->
            <small>
            
  
    
    <a href="history" title="History"><b data-icon="N" class="ico ico-history" title="History"></b></a>
  
  
	<a href="feed" title="RSS"><b data-icon="f" class="ico ico-feed" title="Feed"></b></a>
  <a href="../search" title="Search"><b data-icon="s" class="ico ico-search" title="Search"></b></a>

            </small>
            <!-- /actions -->
          </h2>
		
  

          <div>
            
            
  
<div class="markdown_content"><div>
<div class="markdown_content"><p><a class="" href="https://sourceforge.net/p/whonix/wiki/Home/#whonix-homepage">Whonix Homepage</a> | <img alt="" src="http://whonix.sourceforge.net/screenshots/BC_Rnd_32px.png" /> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/#donate">Donate</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Download/#stay-tuned">News</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Screenshots/">Screenshots</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Videos/">Videos</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Download/">Download</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Documentation/">Documentation</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/About/">About</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Features/">Features</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Security%20Guide/">Security Guide</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/FAQ/">FAQ</a> | <a class="" href="https://sourceforge.net/p/whonix/discussion/">Forum</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contact/">Contact</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Bridges/">Bridges Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Features/#vpn-tunnel-support">VPN/Tunnel Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/HostingLocationHiddenServers/">Location/IP Hidden Servers</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/OtherOperatingSystems/">Windows Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/BrowserPlugins/">Flash Support</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/">You Can Help</a></p>
<p><a class="" href="https://sourceforge.net/p/whonix/wiki/Contribute/">Contribiute</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Design/">Tech. Design</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Dev_SourceCode/">Source Code / Hacking / Development Tickets</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Changelog/">Changelog</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Authorship/">Authorship</a> | <a class="" href="https://sourceforge.net/p/whonix/wiki/Authorship/#disclaimer">Disclaimer</a></p>
<p><font size="-3">This is a wiki. Want to improve this page? Contact us!</font></p></div>
</div>
<div class="toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#examples">Examples</a><ul>
<li><a href="#riseupnet">Riseup.net</a><ul>
<li><a href="#riseupnet-quick-vpn-command-line-test">Riseup.net Quick VPN Command Line Test</a></li>
<li><a href="#riseupnet-riseupovpn">Riseup.net riseup.ovpn</a></li>
<li><a href="#riseup-dns">Riseup DNS</a><ul>
<li><a href="#setup">Setup</a></li>
<li><a href="#testing">Testing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#securitykisscom">securityKISS.com</a></li>
<li><a href="#usaipeu">usaip.eu</a></li>
</ul>
</li>
<li><a href="#footer">Footer</a></li>
</ul>
</div>
<h1 id="introduction">Introduction</h1>
<p>The purpose of this page is mainly to demonstrate, how easy it is, to add a VPN to Whonix, to tunnel user -&gt; Tor -&gt; VPN or the other way around. </p>
<p>Read first <a class="" href="https://sourceforge.net/p/whonix/wiki/Authorship/#whonix-vpn-disclaimer">Whonix VPN disclaimer</a>.</p>
<p>Can be either:</p>
<ul>
<li><a class="" href="https://sourceforge.net/p/whonix/wiki/Tunnel_Tor_through_proxy_or_VPN_or_SSH/">Tunnel Tor through VPN</a>. (Read first!) (Install on Whonix-Gateway.)</li>
<li><a class="" href="https://sourceforge.net/p/whonix/wiki/Tunnel_Proxy_or_SSH_or_VPN_through_Tor/">Tunnel VPN through Tor</a>. (Read first!) (Install on Whonix-Workstation.)</li>
</ul>
<p>Leave no personal information while signing up. Use an extra e-mail address for registration, which you will never use for anything else. If you plan to use user -&gt; Tor -&gt; VPN, you should obviously also sign up using Tor. (Not sure, whats best, Tor or not, to sign up when planing on using user -&gt; VPN -&gt; Tor. Probable Tor can't hurt.)</p>
<h1 id="examples">Examples</h1>
<h2 id="riseupnet">Riseup.net</h2>
<h3 id="riseupnet-quick-vpn-command-line-test">Riseup.net Quick VPN Command Line Test</h3>
<p>Known to support TCP, UDP, SSL.</p>
<p>(1) You need a riseup.net account.</p>
<p>(2) You need to know your riseup account name.</p>
<p>(3) Go to riseup.net -&gt; help -&gt; VPN and obtain your VPN secret. (VPN password)</p>
<p>(4) Look inside the <a class="" href="https://help.riseup.net/en/vpn-howto" rel="nofollow">riseup VPN help page</a> for <a class="" href="https://help.riseup.net/en/riseup-ca" rel="nofollow"><em>RiseupCA.pem</em></a> and download it.</p>
<p>(5) Open a terminal. (konsole) Get into the same folder, you stored <em>RiseupCA.pem</em>.</p>
<p>(6) Install openvpn.</p>
<div class="codehilite"><pre><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">openvpn</span>
</pre></div>
<p>(7) The following line from the <a class="" href="https://help.riseup.net/en/openvpn-linux" rel="nofollow">riseup OpenVPN help page</a> won't work for user -&gt; Tor -&gt; VPN, because the Tor network does not support UDP.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">openvpn</span> <span class="o">--</span><span class="n">client</span> <span class="o">--</span><span class="n">dev</span> <span class="n">tun</span> <span class="o">--</span><span class="n">auth</span><span class="o">-</span><span class="n">user</span><span class="o">-</span><span class="n">pass</span> <span class="o">--</span><span class="n">remote</span> <span class="n">vpn</span><span class="p">.</span><span class="n">riseup</span><span class="p">.</span><span class="n">net</span> 1194 <span class="o">--</span><span class="n">ca</span> <span class="n">RiseupCA</span><span class="p">.</span><span class="n">pem</span>
</pre></div>
<p>The following line works for user -&gt; Tor -&gt; VPN.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">openvpn</span> <span class="o">--</span><span class="n">client</span> <span class="o">--</span><span class="n">dev</span> <span class="n">tun</span> <span class="o">--</span><span class="n">auth</span><span class="o">-</span><span class="n">user</span><span class="o">-</span><span class="n">pass</span> <span class="o">--</span><span class="n">remote</span> <span class="n">vpn</span><span class="p">.</span><span class="n">riseup</span><span class="p">.</span><span class="n">net</span> 1194 <span class="o">--</span><span class="n">ca</span> <span class="n">RiseupCA</span><span class="p">.</span><span class="n">pem</span> <span class="o">--</span><span class="n">proto</span> <span class="n">tcp</span>
</pre></div>
<p>(8) For DNS, see Riseup DNS below.</p>
<h3 id="riseupnet-riseupovpn">Riseup.net riseup.ovpn</h3>
<p>Known to support TCP, UDP, SSL.</p>
<p>(1) You need a riseup.net account.</p>
<p>(2) You need to know your riseup account name.</p>
<p>(3) Go to riseup.net -&gt; help -&gt; VPN and obtain your VPN secret. (VPN password)</p>
<p>(4) Look inside the <a class="" href="https://help.riseup.net/en/vpn-howto" rel="nofollow">riseup VPN help page</a> for <a class="" href="https://help.riseup.net/en/riseup-ca" rel="nofollow"><em>RiseupCA.pem</em></a> and download it.</p>
<p>(5) Create a file <em>auth.txt</em> inside the same folder.</p>
<div class="codehilite"><pre><span class="n">riseupusername</span>
<span class="n">vpnsecret</span>
</pre></div>
<p>(6) Create a file <em>riseup.ovpn</em> inside the same folder.</p>
<div class="codehilite"><pre><span class="n">client</span>
<span class="n">dev</span> <span class="n">tun</span>
<span class="n">auth</span><span class="o">-</span><span class="n">user</span><span class="o">-</span><span class="n">pass</span> <span class="n">auth</span><span class="p">.</span><span class="n">txt</span>
#<span class="n">remote</span> <span class="n">vpn</span><span class="p">.</span><span class="n">riseup</span><span class="p">.</span><span class="n">net</span> 443
#<span class="n">remote</span> <span class="n">seattle</span><span class="p">.</span><span class="n">vpn</span><span class="p">.</span><span class="n">riseup</span><span class="p">.</span><span class="n">net</span> 443
<span class="n">remote</span> <span class="n">nyc</span><span class="p">.</span><span class="n">vpn</span><span class="p">.</span><span class="n">riseup</span><span class="p">.</span><span class="n">net</span> 80
<span class="n">ca</span> <span class="n">RiseupCA</span><span class="p">.</span><span class="n">pem</span>
<span class="n">remote</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">tls</span> <span class="n">server</span>
<span class="n">script</span><span class="o">-</span><span class="n">security</span> 1
#<span class="n">user</span> <span class="n">nobody</span>
#<span class="n">group</span> <span class="n">nobody</span>
<span class="n">proto</span> <span class="n">tcp</span>
</pre></div>
<p>(7) Start OpenVPN.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">openvpn</span> <span class="n">riseup</span><span class="p">.</span><span class="n">ovpn</span>
</pre></div>
<p>(8) For DNS, see Riseup DNS below.</p>
<h3 id="riseup-dns">Riseup DNS</h3>
<h4 id="setup">Setup</h4>
<p>Open <em>/etc/resolv.conf</em>.</p>
<div class="codehilite"><pre><span class="n">kdesudo</span> <span class="n">kwrite</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">resolv</span><span class="p">.</span><span class="n">conf</span>
</pre></div>
<p>Comment out.</p>
<div class="codehilite"><pre><span class="c">#nameserver 192.168.0.10</span>
</pre></div>
<p>Add.</p>
<div class="codehilite"><pre><span class="c">## Riseup.net OpenVPN DNS server</span>
<span class="n">nameserver</span> 172<span class="p">.</span>27<span class="p">.</span>100<span class="p">.</span>1
</pre></div>
<p>If you want to be sure, that <em>/etc/resolv.conf</em> does not get overwritten by other packages. (Such as DHCP or resolvconf.)</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">chattr</span> <span class="o">+</span><span class="nb">i</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">resolv</span><span class="p">.</span><span class="n">conf</span>
</pre></div>
<p>If you ever want to remove it, use <em>-i</em>.</p>
<h4 id="testing">Testing</h4>
<p>When using "<em>nameserver 192.168.0.10</em>"...</p>
<div class="codehilite"><pre><span class="n">nslookup</span> <span class="n">idnxcnkne4qt76tg</span><span class="p">.</span><span class="n">onion</span>
</pre></div>
<p>Will show.</p>
<div class="codehilite"><pre><span class="n">Server</span><span class="o">:</span>         <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.10</span>
<span class="n">Address</span><span class="o">:</span>        <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.10</span><span class="err">#</span><span class="mi">53</span>

<span class="n">Non</span><span class="o">-</span><span class="n">authoritative</span> <span class="n">answer</span><span class="o">:</span>
<span class="n">Name</span><span class="o">:</span>   <span class="n">idnxcnkne4qt76tg</span><span class="o">.</span><span class="na">onion</span>
<span class="n">Address</span><span class="o">:</span> <span class="mf">10.192</span><span class="o">.</span><span class="mf">0.1</span>
</pre></div>
<p>When using "<em>nameserver 172.27.100.1</em>"...</p>
<div class="codehilite"><pre><span class="n">nslookup</span> <span class="n">idnxcnkne4qt76tg</span><span class="p">.</span><span class="n">onion</span>
</pre></div>
<p>Will show.</p>
<div class="codehilite"><pre><span class="n">Server</span><span class="o">:</span>         <span class="mf">172.27</span><span class="o">.</span><span class="mf">100.1</span>
<span class="n">Address</span><span class="o">:</span>        <span class="mf">172.27</span><span class="o">.</span><span class="mf">100.1</span><span class="err">#</span><span class="mi">53</span>

<span class="o">**</span> <span class="n">server</span> <span class="n">can</span><span class="err">'</span><span class="n">t</span> <span class="n">find</span> <span class="n">idnxcnkne4qt76tg</span><span class="o">.</span><span class="na">onion</span><span class="o">:</span> <span class="n">NXDOMAIN</span>
</pre></div>
<p>Because you can not access .onion domains when a VPN has be chained. (user -&gt; Tor -&gt; VPN)</p>
<p>Resolving clearnet DNS should work.</p>
<div class="codehilite"><pre><span class="n">nslookup</span> <span class="n">riseup</span><span class="p">.</span><span class="n">net</span>
</pre></div>
<p>Should show.</p>
<div class="codehilite"><pre><span class="n">Server</span><span class="o">:</span>         <span class="mf">172.27</span><span class="o">.</span><span class="mf">100.1</span>
<span class="n">Address</span><span class="o">:</span>        <span class="mf">172.27</span><span class="o">.</span><span class="mf">100.1</span><span class="err">#</span><span class="mi">53</span>

<span class="n">Non</span><span class="o">-</span><span class="n">authoritative</span> <span class="n">answer</span><span class="o">:</span>
<span class="n">Name</span><span class="o">:</span>   <span class="n">riseup</span><span class="o">.</span><span class="na">net</span>
<span class="n">Address</span><span class="o">:</span> <span class="mf">198.252</span><span class="o">.</span><span class="mf">153.35</span>
</pre></div>
<h2 id="securitykisscom">securityKISS.com</h2>
<p>Unfortunately securityKISS.com drops many TCP and UDP ports beside ports 80 and 443. That limits it's usefulness for testing purposes, such as <a class="" href="https://sourceforge.net/p/whonix/wiki/TunnelUDPoverTor/">Tunnel UDP over Tor</a>. If you know a less restrictive free VPN provider, we'd be thankful for a comment.</p>
<p>Install openvpn.</p>
<div class="codehilite"><pre><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">openvpn</span>
</pre></div>
<p>Register at securitykiss.com, login and download their OpenVPN package to /home/user. Unpack. The folder contains contains ca.cert, client.cert, client.key, README.txt (with list of their servers and ports). Rename the folder to securitykiss. Structure should be like /home/user/ca.cert etc.</p>
<p><em>nano /etc/openvpn/client.conf</em>, edit server IP and port and past it. (It's almost only the default openvpn client.conf with minor changes.)</p>
<div class="codehilite"><pre><span class="c">##############################################</span>
<span class="c"># Sample client-side OpenVPN 2.0 config file #</span>
<span class="c"># for connecting to multi-client server.     #</span>
<span class="c">#                                            #</span>
<span class="c"># This configuration can be used by multiple #</span>
<span class="c"># clients, however each client should have   #</span>
<span class="c"># its own cert and key files.                #</span>
<span class="c">#                                            #</span>
<span class="c"># On Windows, you might want to rename this  #</span>
<span class="c"># file so it has a .ovpn extension           #</span>
<span class="c">##############################################</span>

<span class="c"># Specify that we are a client and that we</span>
<span class="c"># will be pulling certain config file directives</span>
<span class="c"># from the server.</span>
<span class="n">client</span>

<span class="c"># Use the same setting as you are using on</span>
<span class="c"># the server.</span>
<span class="c"># On most systems, the VPN will not function</span>
<span class="c"># unless you partially or fully disable</span>
<span class="c"># the firewall for the TUN/TAP interface.</span>
<span class="p">;</span><span class="n">dev</span> <span class="n">tap</span>
<span class="n">dev</span> <span class="n">tun</span>

<span class="c"># Windows needs the TAP-Win32 adapter name</span>
<span class="c"># from the Network Connections panel</span>
<span class="c"># if you have more than one.  On XP SP2,</span>
<span class="c"># you may need to disable the firewall</span>
<span class="c"># for the TAP adapter.</span>
<span class="p">;</span><span class="n">dev</span><span class="o">-</span><span class="n">node</span> <span class="n">MyTap</span>

<span class="c"># Are we connecting to a TCP or</span>
<span class="c"># UDP server?  Use the same setting as</span>
<span class="c"># on the server.</span>
<span class="n">proto</span> <span class="n">tcp</span>
<span class="p">;</span><span class="n">proto</span> <span class="n">udp</span>

<span class="c"># The hostname/IP and port of the server.</span>
<span class="c"># You can have multiple remote entries</span>
<span class="c"># to load balance between the servers.</span>
<span class="n">remote</span> 91<span class="p">.</span>121<span class="p">.</span>208<span class="p">.</span>218 443
<span class="p">;</span><span class="n">remote</span> <span class="n">my</span><span class="o">-</span><span class="n">server</span><span class="o">-</span>2 1194

<span class="c"># Choose a random host from the remote</span>
<span class="c"># list for load-balancing.  Otherwise</span>
<span class="c"># try hosts in the order specified.</span>
<span class="p">;</span><span class="n">remote</span><span class="o">-</span><span class="n">random</span>

<span class="c"># Keep trying indefinitely to resolve the</span>
<span class="c"># host name of the OpenVPN server.  Very useful</span>
<span class="c"># on machines which are not permanently connected</span>
<span class="c"># to the internet such as laptops.</span>
<span class="n">resolv</span><span class="o">-</span><span class="n">retry</span> <span class="n">infinite</span>

<span class="c"># Most clients don't need to bind to</span>
<span class="c"># a specific local port number.</span>
<span class="n">nobind</span>

<span class="c"># Downgrade privileges after initialization (non-Windows only)</span>
<span class="n">user</span> <span class="n">nobody</span>
<span class="n">group</span> <span class="n">nogroup</span>

<span class="c"># Try to preserve some state across restarts.</span>
<span class="n">persist</span><span class="o">-</span><span class="n">key</span>
<span class="n">persist</span><span class="o">-</span><span class="n">tun</span>

<span class="c"># If you are connecting through an</span>
<span class="c"># HTTP proxy to reach the actual OpenVPN</span>
<span class="c"># server, put the proxy server/IP and</span>
<span class="c"># port number here.  See the man page</span>
<span class="c"># if your proxy server requires</span>
<span class="c"># authentication.</span>
<span class="p">;</span><span class="n">http</span><span class="o">-</span><span class="n">proxy</span><span class="o">-</span><span class="n">retry</span> <span class="c"># retry on connection failures</span>
<span class="p">;</span><span class="n">http</span><span class="o">-</span><span class="n">proxy</span> <span class="p">[</span><span class="n">proxy</span> <span class="n">server</span><span class="p">]</span> <span class="p">[</span><span class="n">proxy</span> <span class="n">port</span> <span class="c">#]</span>

<span class="c"># Wireless networks often produce a lot</span>
<span class="c"># of duplicate packets.  Set this flag</span>
<span class="c"># to silence duplicate packet warnings.</span>
<span class="p">;</span><span class="n">mute</span><span class="o">-</span><span class="n">replay</span><span class="o">-</span><span class="n">warnings</span>

<span class="c"># SSL/TLS parms.</span>
<span class="c"># See the server config file for more</span>
<span class="c"># description.  It's best to use</span>
<span class="c"># a separate .crt/.key file pair</span>
<span class="c"># for each client.  A single ca</span>
<span class="c"># file can be used for all clients.</span>
<span class="n">ca</span> <span class="o">/</span><span class="nb">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">securitykiss</span><span class="o">/</span><span class="n">ca</span><span class="p">.</span><span class="n">crt</span>
<span class="n">cert</span> <span class="o">/</span><span class="nb">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">securitykiss</span><span class="o">/</span><span class="n">client</span><span class="p">.</span><span class="n">crt</span>
<span class="n">key</span> <span class="o">/</span><span class="nb">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">securitykiss</span><span class="o">/</span><span class="n">client</span><span class="p">.</span><span class="n">key</span>

<span class="c"># Verify server certificate by checking</span>
<span class="c"># that the certicate has the nsCertType</span>
<span class="c"># field set to &quot;server&quot;.  This is an</span>
<span class="c"># important precaution to protect against</span>
<span class="c"># a potential attack discussed here:</span>
<span class="c">#  http://openvpn.net/howto.html#mitm</span>
<span class="c">#</span>
<span class="c"># To use this feature, you will need to generate</span>
<span class="c"># your server certificates with the nsCertType</span>
<span class="c"># field set to &quot;server&quot;.  The build-key-server</span>
<span class="c"># script in the easy-rsa folder will do this.</span>
<span class="n">ns</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="nb">type</span> <span class="n">server</span>

<span class="c"># If a tls-auth key is used on the server</span>
<span class="c"># then every client must also have the key.</span>
<span class="p">;</span><span class="n">tls</span><span class="o">-</span><span class="n">auth</span> <span class="n">ta</span><span class="p">.</span><span class="n">key</span> 1

<span class="c"># Select a cryptographic cipher.</span>
<span class="c"># If the cipher option is used on the server</span>
<span class="c"># then you must also specify it here.</span>
<span class="p">;</span><span class="n">cipher</span> <span class="n">x</span>

<span class="c"># Enable compression on the VPN link.</span>
<span class="c"># Don't enable this unless it is also</span>
<span class="c"># enabled in the server config file.</span>
<span class="n">comp</span><span class="o">-</span><span class="n">lzo</span>

<span class="c"># Set log file verbosity.</span>
<span class="n">verb</span> 3

<span class="c"># Silence repeating messages</span>
<span class="p">;</span><span class="n">mute</span> 20
</pre></div>
<p>To initially start the VPN type:</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">openvpn</span> <span class="n">start</span>
<span class="n">sudo</span> <span class="n">openvpn</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">openvpn</span><span class="o">/</span><span class="n">client</span><span class="p">.</span><span class="n">conf</span>
</pre></div>
<p>After rebooting the VPN will be automatically started. </p>
<p>If you do not wish to start the VPN automatically for some reason: <em>nano /etc/default/openvpn</em></p>
<div class="codehilite"><pre><span class="n">AUTOSTART</span><span class="o">==</span>&quot;<span class="n">none</span>&quot;
</pre></div>
<p>DNS settings have not been considered for this securitykiss.com chapter.</p>
<h2 id="usaipeu">usaip.eu</h2>
<p>For testing purposes, in past, <a class="" href="https://www.usaip.eu/" rel="nofollow">usaip.eu</a> was used. They have been chosen, because they were free and didn't block the tested outgoing UDP port. The free version of usaip.eu can probable only be used for testing purposes, as it's only a test version, which force disconnects every 7 minutes. For longer and serious/stable use, you'll probable need another, VPN account.</p>
<p><strong>Note, usaip probable blocks SSL, therefore</strong> <em>/usr/bin/curl --tlsv1 --proto =https <a href="https://check.torproject.org" rel="nofollow"></a><a href="https://check.torproject.org" rel="nofollow">https://check.torproject.org</a></em> <strong>will not work.</strong></p>
<p>Install OpenVPN.</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">openvpn</span>
</pre></div>
<p>Go to <a class="" href="http://usaip.eu/en/index.php" rel="nofollow">usaip.eu</a> and click on free demo. Download the <em>usaip.zip</em>. It contains the OpenVPN configuration files. Unpack. Open a shell and get into the folder <em>cd usaip</em>. List all files <em>dir</em>. Connect to a VPN, for example:</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">openvpn</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">usaip</span><span class="o">/</span><span class="n">eu</span><span class="o">-</span><span class="n">luxemburg</span><span class="p">.</span><span class="n">ovpn</span>
</pre></div>
<p>At time of writing, the page stated, the password was <em>demo</em>, password also <em>demo</em>. Wait until it's connected. When success, it will show "Initialization Sequence Completed". It might happen, that the connection will not succeed for some unknown reason. In this case try replacing the eu-luxemburg.ovpn from the example above with another .ovpn from the usaip folder.</p>
<p>DNS settings have not been considered for this usaip.eu chapter.</p>
<h1 id="footer">Footer</h1>
<div>
<div class="markdown_content"><p>This is a wiki. Want to improve this page? Contact us!</p>
<p><font size="-3">Unless otherwise noted above, content of this particular page is copyrighted by <a class="" href="mailto:adrelanos%20at%20riseup%20dot%20net">adrelanos</a> and licensed under the same Free (as in speech) license as Whonix itself.</font></p></div>
</div>
</div>

  <div id="create_wiki_page_holder" title="Create New Page" style="display:none">
    <form>
        <label class="grid-2">Name</label>
        <div class="grid-7"><input type="text" name="name"/></div>
    </form>
  </div>

          </div>
			
          
  <hr class="grid-19" style="margin-top: 1em; margin-bottom: 2em; clear:both;">
  
  
    <h4>Related</h4>
    <p>
    
      <a href="/p/whonix/wiki/TunnelUDPoverTor/">Wiki: TunnelUDPoverTor</a><br>
    
    </p>
  
  

        </div>
      </div>
    </section>
      
<footer id="site-footer">
    <div class="wrapper">
        <nav>
            <h5>SourceForge</h5>
            <a href="/about">About</a>
            <a href="/blog/category/sitestatus/">Site Status</a>
            <a href="http://twitter.com/sfnet_ops">@sfnet_ops</a>
        </nav>
        <nav>
            <h5>Find and Develop Software</h5>
            <a href="/create/">Create a Project</a>
            <a href="/directory/">Software Directory</a>
            <a href="/top">Top Downloaded Projects</a>
        </nav>
        <nav>
            <h5>Community</h5>
            <a href="/blog/">Blog</a>
            <a href="http://twitter.com/sourceforge">@sourceforge</a>
            <a href="/jobs?source=footer">Job Board</a>
        </nav>
        <nav>
            <h5>Help</h5>
            <a href="http://p.sf.net/sourceforge/docs">Site Documentation</a>
            <a href="/support">Support Request</a>
            <a href="http://p.sf.net/sourceforge/irc">Real-Time Support</a>
        </nav>
    </div>
</footer>
<footer id="site-copyright-footer">
    <div class="wrapper">
        <div id="copyright">
            Copyright &copy; 2013 SourceForge. All Rights Reserved.<br />
            SourceForge is a <a href="http://www.diceholdingsinc.com/phoenix.zhtml?c=211152&amp;p=irol-landing">Dice Holdings, Inc.</a> company.
        </div>
        <nav>
            <a href="http://slashdotmedia.com/terms-of-use">Terms</a>
            <a href="http://slashdotmedia.com/privacy-statement/">Privacy</a>
            <a href="http://slashdotmedia.com/opt-out-choices">Cookies/Opt Out</a>
            <a href="http://slashdotmedia.com">Advertise</a>
            <a href="http://sourceforge.jp/">SourceForge.JP</a>
        </nav>
    </div>
</footer>
    <div id="messages">
        
    </div>
    
      <!-- ew:body_js -->

    
      <script type="text/javascript" src="http://a.fsdn.com/allura/nf/1364319766/_ew_/_slim/js?href=allura%2Fjs%2Fjquery-base.js%3Ballura%2Fjs%2Fjquery.notify.js%3Ballura%2Fjs%2Fsylvester.js%3Ballura%2Fjs%2Fpb.transformie.min.js%3Ballura%2Fjs%2Fallura-base.js%3Bjs%2Fjquery.lightbox_me.js%3Bjs%2Fjquery.autosize-min.js%3Bjs%2Fjquery.textarea.js%3Bjs%2Fsf_markitup.js%3Bjs%2Fjquery.tagsinput.js"></script>
    
      
<!-- /ew:body_js -->

    
    
      <!-- ew:body_js_tail -->

    
      <script type="text/javascript">$(function () {
            var $lightbox = $('#lightbox_create_wiki_page');
            var $trigger = $('#sidebar a.add_wiki_page');
            $trigger.bind('click', function(e) {
                $lightbox.lightbox_me();
                return false;
            });
            $($lightbox).delegate('.close', 'click', function(e) {
                $lightbox.trigger('close');
                return false;
            });
        });
$(function () {
            $('#lightbox_create_wiki_page form').submit(function(){
                location.href = $('#sidebar a.add_wiki_page').attr('href') +
                    encodeURIComponent($('input[name=name]', $(this)).val().replace('/', '-')) + '/edit';
                return false;
            });
        });
$(function () {
            $('textarea.auto_resize').focus(function(){$(this).autosize();});
        });
$(document).ready(function () {
            $("a.attachment_form_add_button").click(function(evt){
                $(this).hide();
                $(".attachment_form_fields", this.parentNode).show();
                evt.preventDefault();
            });
            $("a.cancel_edit_post").click(function(evt){
                $("textarea", this.parentNode).val($("input.original_value", this.parentNode).val());
                $(".attachment_form_fields input", this.parentNode).val('');
                evt.preventDefault();
            });
         });

        (function () {
            $('div.discussion-post').each(function () {
                var post = this;
                $('.submit', post).button();
                $('.flag_post', post).click(function (ele) {
                    this.parentNode.submit();
                    return false;
                });
                $('.moderate_post', post).click(function(e){
                    e.preventDefault();
                    var mod = $(this).text();
                    var id_post = $(post).attr('id');
                    $.ajax({
                        type: 'POST',
                        url: this.parentNode.action,
                        data: jQuery(this.parentNode).serialize(),
                        success: function() {
                            if (mod == 'Delete'){
                                $(post).remove();
                            }
                            else if (mod == 'Approve'){
                                $('a.reply_post, a.shortlink, form.moderate_spam, form.moderate_approve', post).toggle();
                                $('div.moderate', post).removeClass('moderate');
                            }
                            else if (mod == 'Spam'){
                                $(post).remove();
                            }
                        }
                    });
                });

                if($('a.edit_post', post)){
                    $('a.edit_post', post).click(function (ele) {
                        $('.display_post', post).hide();
                        $('.edit_post_form', post).show();
                        $('.edit_post_form textarea', post).focus();
                        return false;
                    });
                    $("a.cancel_edit_post", post).click(function(evt){
                        $('.display_post', post).show();
                        $('.edit_post_form', post).hide();
                    });
                }
                if($('.reply_post', post)){
                    $('.reply_post', post).click(function (ele) {
                        $('.reply_post_form', post).show();
                        $('.reply_post_form textarea', post).focus();
                        return false;
                    });
                    $('.reply_post', post).button();
                }
                if($('.add_attachment', post)){
                    $('.add_attachment', post).click(function (ele) {
                        $('.add_attachment_form', post).show();
                        return false;
                    });
                }
                if($('.promote_to_thread', post)){
                    $('.promote_to_thread', post).click(function (ele) {
                        $('.promote_to_thread_form', post).show();
                        return false;
                    });
                }
                if($('.shortlink', post)){
                    var popup = $('.shortlink_popup', post);
                    $('.shortlink', post).click(function(evt){
                        evt.preventDefault();
                        popup.lightbox_me({
                            onLoad: function() {
                                $('input', popup).select();
                            }
                        });
                    });
                    $('.close', popup).bind('click', function() {
                        popup.hide();
                    });
                }
            });
        }());
        
$(function () {
            $('select.results_per_page').change(function () {
                this.form.submit();});});
$(function () {
          $('input.label_edit').tagsInput({
              'height':'100%',
              'width':'100%'
          });
        });

        $(document).ready(function () {
            var thread_tag = $('a.thread_tag');
            var thread_spam = $('a.sidebar_thread_spam');
            var tag_thread_holder = $('#tag_thread_holder');
            var allow_moderate = $('#allow_moderate');
            var mod_thread_link = $('#mod_thread_link');
            var mod_thread_form = $('#mod_thread_form');
            if (mod_thread_link.length) {
                if (mod_thread_form.length) {
                    mod_thread_link.click(function (e) {
                        mod_thread_form.show();
                        return false;
                    });
                }
            }
            if (thread_tag.length) {
                if (tag_thread_holder.length) {
                    var submit_button = $('input[type="submit"]', tag_thread_holder);
                    var cancel_button = $('<a href="#" class="btn link">Cancel</a>').click(function(evt){
                        evt.preventDefault();
                        tag_thread_holder.hide();
                        thread_tag.removeClass('active');
                    });
                    submit_button.after(cancel_button);
                    thread_tag.click(function (e) {
                        tag_thread_holder.show();
                        thread_tag.addClass('active');
                        // focus the submit to scroll to the form, then focus the subject for them to start typing
                        submit_button.focus();
                        $('input[type="text"]', tag_thread_holder).focus();
                        return false;
                    });
                }
            }
            if (thread_spam.length) {
                if (allow_moderate.length) {
                    var cval = $.cookie('_session_id');
                    thread_spam[0].style.display='block';
                }
            }
        });
        </script>
    
      
<!-- /ew:body_js_tail -->

    
    
  <div id="lightbox_create_wiki_page" class="modal" style="display:none">
  <b data-icon="D" class="ico ico-close close"></b>
  
    <h1>Add a Wiki Page</h1>
    <form class="grid-10">
        <label class="grid-2">Name</label>
        <div class="grid-7"><input type="text" name="name"></div>
        <label class="grid-2">&nbsp;</label>
        <div class="grid-7"><input type="submit" value="Create page"></div>
    </form>
  
</div>
<script type="text/javascript">
  /*<![CDATA[*/
  $('.post-link')
    .click(function(evt) {
        var cval = $.cookie('_session_id');
        evt.preventDefault();
        $.post(this.href, {_session_id:cval}, function(val)
            { window.location = val.location; },
            'json');
      });
  /*]]>*/
</script>
  

    
      
    
    
   
    
  </body>
</html>